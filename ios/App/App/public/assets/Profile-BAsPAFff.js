import{j as e,L as a,i as s,p as r,e as l,m as t,U as n,X as i,B as o,c,$ as d,aj as m,a6 as x,M as p,G as u,a3 as h,ai as g,r as b,ak as y,h as j,T as f,H as v,al as N,am as _,an as k,ao as w,a8 as C,ap as S,aq as P}from"./ui-v2ReSvUE.js";import{r as E}from"./react-YWE4JMTy.js";import{u as R,s as A,f as I,c as T}from"./index-Cgc97SP_.js";import{i as O,g as F}from"./payment-router-B1dFo0bv.js";import{u as M}from"./router-BNBI7_bc.js";import{f as B}from"./format-DltpeZFQ.js";import{Q as D}from"./index-BRghSwZE.js";import"./supabase-Du4GZSDg.js";const U=["Silva57","Daniels5","Larson57","Colby5","Andy92","Brad49","Kyle54","Kaleb3","Slingin18","Claygrip33","Highline22","Dirtdog77","Slidejob04","Cushion55","Roostertail81","Gasit49","Sprintcar92","Latemodel68","Bullring11","Checkered99","Fullthrottle07","Redclay36","Wheelie29","Chassis14","Featurewin63","Trackside70","Pitside88","Glorylaps44","Pitboxmike","PITBOXPRO","RACEWINNER","SETUPKING","TRACKMASTER","SPEEDFREAK","CHAMPION24","GOLDENGRID","VICTORYLAP","FASTTRACK","DIRTLEGEND","CHECKEREDPRO","ENGINEEREDWIN","NITROBOOST","APEXPREMIUM","PODIUMPASS","VELOCITYMAX","ACCELERATE","ELITERACER","PROPERFORMANCE","PITBOXVIP","Chaz44","Chaz33","Chaz22","Chaz55","Chaz11"];function L(){const{subscriptionStatus:l,subscriptionPeriodEnd:t,createPortalSession:n,isLoading:i,error:o}=I(),c=M(),[d,m]=E.useState(!1),x=O(),p=F();return i?e.jsxs("div",{className:"glass-panel p-6 flex items-center justify-center",children:[e.jsx(a,{className:"w-6 h-6 animate-spin text-brand-gold mr-3"}),e.jsx("span",{children:"Loading subscription status..."})]}):"none"===l?e.jsxs("div",{className:"glass-panel p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(s,{className:"w-6 h-6 text-gray-400"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"No Active Subscription"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Subscribe to access premium features"})]})]}),e.jsx("button",{onClick:()=>c("/subscription"),className:"btn-primary w-full",children:"View Plans"})]}):e.jsxs("div",{className:"glass-panel p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(s,{className:"w-6 h-6 text-green-500"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"premium"===l?"Encrypted Setup Access":"Basic Setup Access"}),t&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-center gap-1",children:[e.jsx(r,{className:"w-4 h-4"}),"Renews ",B(t,"MMM d, yyyy")]})]})]}),e.jsx("button",{onClick:async()=>{if("none"===l)return void c("/subscription");if(x)return void alert(`To manage your ${p} subscription, please open your device settings:\n\niOS: Settings > Your Name > Subscriptions\nAndroid: Play Store > Menu > Subscriptions`);m(!0);const e=await n();e?window.location.href=e:c("/subscription"),m(!1)},disabled:d,className:"btn-secondary w-full flex items-center justify-center gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx(a,{className:"w-4 h-4 animate-spin"}),"Loading..."]}):"Manage Subscription"})]})}function Y(){const{user:r}=R(),[c,d]=E.useState([]),[m,x]=E.useState(!0),[p,u]=E.useState(null);E.useEffect(()=>{r&&h()},[r]);const h=async()=>{if(r){x(!0);try{const{data:e,error:a}=await A.from("blocked_users").select("\n          *,\n          blocked_profile:profiles!blocked_users_blocked_id_fkey(\n            id,\n            username,\n            full_name,\n            avatar_url\n          )\n        ").eq("blocker_id",r.id).order("created_at",{ascending:!1});if(a)throw a;d(e||[])}catch(e){}finally{x(!1)}}};return m?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(a,{className:"w-8 h-8 animate-spin text-brand-gold"})}):e.jsxs("div",{className:"glass-panel p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(s,{className:"w-6 h-6 text-brand-gold"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Blocked Users"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Manage users you've blocked"})]})]}),0===c.length?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(s,{className:"w-16 h-16 text-gray-300 dark:text-gray-700 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"You haven't blocked any users"})]}):e.jsx("div",{className:"space-y-3",children:e.jsx(l,{children:c.map(s=>{var l,o,c;return e.jsxs(t.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,x:-100},className:"flex items-center justify-between p-4 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-200 dark:bg-gray-700 overflow-hidden flex-shrink-0",children:(null==(l=s.blocked_profile)?void 0:l.avatar_url)?e.jsx("img",{src:s.blocked_profile.avatar_url,alt:s.blocked_profile.username,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(n,{className:"w-6 h-6 text-gray-400"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:(null==(o=s.blocked_profile)?void 0:o.full_name)||"Unknown User"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["@",(null==(c=s.blocked_profile)?void 0:c.username)||"unknown"]}),s.reason&&e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:["Reason: ",s.reason]})]})]}),e.jsx("button",{onClick:()=>(async e=>{if(r){u(e);try{const{error:a}=await A.from("blocked_users").delete().eq("blocker_id",r.id).eq("blocked_id",e);if(a)throw a;d(a=>a.filter(a=>a.blocked_id!==e))}catch(a){}finally{u(null)}}})(s.blocked_id),disabled:p===s.blocked_id,className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 transition-colors",children:p===s.blocked_id?e.jsxs(e.Fragment,{children:[e.jsx(a,{className:"w-4 h-4 animate-spin"}),"Unblocking..."]}):e.jsxs(e.Fragment,{children:[e.jsx(i,{className:"w-4 h-4"}),"Unblock"]})})]},s.id)})})}),e.jsx("div",{className:"mt-6 p-4 rounded-lg bg-gray-50 dark:bg-gray-800/50 border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(o,{className:"w-5 h-5 text-gray-600 dark:text-gray-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:[e.jsx("p",{className:"font-medium mb-1",children:"About blocking"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-gray-600 dark:text-gray-400",children:[e.jsx("li",{children:"Blocked users can't see your posts or profile"}),e.jsx("li",{children:"They can't send you messages or friend requests"}),e.jsx("li",{children:"You won't see their content in feeds"}),e.jsx("li",{children:"Existing friendships will be removed"})]})]})]})})]})}function q(){const{user:r}=R(),l=M(),{startChat:t}=T(),{validatePromoCode:I,applyPromoCode:O}=function(){const{user:e}=R(),[a,s]=E.useState(!1),[r,l]=E.useState(null),t=e=>{if(!e)return!1;const a=e.toLowerCase(),s=a.charAt(0).toUpperCase()+a.slice(1);return U.includes(s)};return{validatePromoCode:t,applyPromoCode:async a=>{if(!e)return l("You must be signed in to apply a promo code"),!1;s(!0),l(null);try{if(!t(a))return l("Invalid promo code"),!1;const s=a.toLowerCase(),r=s.charAt(0).toUpperCase()+s.slice(1),n=await(async e=>{try{const a=e.toLowerCase(),s=a.charAt(0).toUpperCase()+a.slice(1),{data:r,error:l}=await A.from("profiles").select("id").eq("promo_code",s).limit(1);if(l)throw l;return r&&r.length>0}catch(a){throw a}})(r);if(n)return l("This promo code has already been used"),!1;const{error:i}=await A.from("profiles").update({promo_code:r,has_premium:!0,updated_at:(new Date).toISOString()}).eq("id",e.id);if(i)throw i;return!0}catch(r){return l("Failed to apply promo code"),!1}finally{s(!1)}},checkPremiumStatus:async()=>{if(!e)return!1;s(!0),l(null);try{const{data:a,error:s}=await A.from("profiles").select("has_premium").eq("id",e.id).single();if(s)throw s;return(null==a?void 0:a.has_premium)||!1}catch(a){return l("Failed to check premium status"),!1}finally{s(!1)}},loading:a,error:r}}(),[F,B]=E.useState(!1),[q,z]=E.useState(!1),[G,H]=E.useState(null),K=E.useRef(null),[W,$]=E.useState(!1),[V,X]=E.useState(""),[Q,J]=E.useState(null),[Z,ee]=E.useState(!1),[ae,se]=E.useState(!1),[re,le]=E.useState(!1),[te,ne]=E.useState(!1),[ie,oe]=E.useState("basic"),[ce,de]=E.useState({username:"",full_name:"",avatar_url:"",bio:"",location:"",website:"",phone:"",promo_code:"",has_premium:!1,car_number:"",car_numbers:[],primary_racing_class:"",racing_role:"",years_racing_since:void 0,home_tracks:[],championships:[],notable_wins:"",current_team:"",previous_teams:[],birthday:void 0,relationship_status:"",education:"",day_job:"",hometown:"",mechanical_skills:[],racing_interests:[],looking_for:[],favorite_drivers:[],music_preference:"",privacy_racing_info:"public",privacy_career_info:"public",privacy_personal_info:"friends",privacy_contact_info:"private"}),me="https://pit-box.com";E.useEffect(()=>{r?xe():l("/",{replace:!0})},[r]);const xe=async()=>{try{const{data:e,error:a}=await A.from("profiles").select("*").eq("id",null==r?void 0:r.id).single();if(a)throw a;e&&de({username:e.username||"",full_name:e.full_name||"",avatar_url:e.avatar_url||"",bio:e.bio||"",location:e.location||"",website:e.website||"",phone:e.phone||"",promo_code:e.promo_code||"",has_premium:e.has_premium||!1,car_number:e.car_number||"",car_numbers:e.car_numbers||[],primary_racing_class:e.primary_racing_class||"",racing_role:e.racing_role||"",years_racing_since:e.years_racing_since||void 0,home_tracks:e.home_tracks||[],championships:e.championships||[],notable_wins:e.notable_wins||"",current_team:e.current_team||"",previous_teams:e.previous_teams||[],birthday:e.birthday||void 0,relationship_status:e.relationship_status||"",education:e.education||"",day_job:e.day_job||"",hometown:e.hometown||"",mechanical_skills:e.mechanical_skills||[],racing_interests:e.racing_interests||[],looking_for:e.looking_for||[],favorite_drivers:e.favorite_drivers||[],music_preference:e.music_preference||"",privacy_racing_info:e.privacy_racing_info||"public",privacy_career_info:e.privacy_career_info||"public",privacy_personal_info:e.privacy_personal_info||"friends",privacy_contact_info:e.privacy_contact_info||"private"})}catch(e){}},pe=e=>{const{name:a,value:s}=e.target;de(e=>({...e,[a]:s||""}))},ue=(e,a)=>{if(!a.trim())return;const s=ce[e]||[];de(r=>({...r,[e]:[...s,a.trim()]}))},he=({label:a,field:s,placeholder:r,icon:l})=>{const[t,n]=E.useState(""),o=ce[s]||[];return e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:a}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(l,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",value:t,onChange:e=>n(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),ue(s,t),n(""))},className:"w-full pl-10 pr-4 py-2 rounded-lg",placeholder:r})]}),e.jsx("button",{type:"button",onClick:()=>{ue(s,t),n("")},className:"px-4 py-2 bg-brand-gold text-white rounded-lg hover:bg-brand-gold-dark transition-colors",children:"Add"})]}),o.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:o.map((a,r)=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-brand-gold/10 text-brand-gold rounded-full text-sm",children:[a,e.jsx("button",{type:"button",onClick:()=>((e,a)=>{const s=ce[e]||[];de(r=>({...r,[e]:s.filter((e,s)=>s!==a)}))})(s,r),className:"hover:text-brand-gold-dark",children:e.jsx(i,{className:"w-3 h-3"})})]},r))})]})};return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 pb-8",children:[e.jsxs("div",{className:"glass-panel p-6",children:[e.jsx("div",{className:"flex justify-between items-start mb-6",children:e.jsx("h1",{className:"text-3xl font-bold",children:"Profile Settings"})}),G&&e.jsxs("div",{className:"mb-6 p-4 rounded-lg bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 flex items-center gap-2",children:[e.jsx(o,{className:"w-5 h-5 flex-shrink-0"}),G]}),q&&e.jsxs("div",{className:"mb-6 p-4 rounded-lg bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 flex items-center gap-2",children:[e.jsx(c,{className:"w-5 h-5 flex-shrink-0"}),"Profile updated successfully!"]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("button",{onClick:()=>oe("basic"),className:"px-4 py-2 font-medium transition-colors "+("basic"===ie?"border-b-2 border-brand-gold text-brand-gold":"text-gray-600 dark:text-gray-400 hover:text-brand-gold"),children:"Basic Info"}),e.jsx("button",{onClick:()=>oe("racing"),className:"px-4 py-2 font-medium transition-colors "+("racing"===ie?"border-b-2 border-brand-gold text-brand-gold":"text-gray-600 dark:text-gray-400 hover:text-brand-gold"),children:"Racing Background"}),e.jsx("button",{onClick:()=>oe("career"),className:"px-4 py-2 font-medium transition-colors "+("career"===ie?"border-b-2 border-brand-gold text-brand-gold":"text-gray-600 dark:text-gray-400 hover:text-brand-gold"),children:"Career & Achievements"}),e.jsx("button",{onClick:()=>oe("personal"),className:"px-4 py-2 font-medium transition-colors "+("personal"===ie?"border-b-2 border-brand-gold text-brand-gold":"text-gray-600 dark:text-gray-400 hover:text-brand-gold"),children:"Personal Info"}),e.jsx("button",{onClick:()=>oe("privacy"),className:"px-4 py-2 font-medium transition-colors "+("privacy"===ie?"border-b-2 border-brand-gold text-brand-gold":"text-gray-600 dark:text-gray-400 hover:text-brand-gold"),children:"Privacy"}),e.jsx("button",{onClick:()=>oe("blocked"),className:"px-4 py-2 font-medium transition-colors "+("blocked"===ie?"border-b-2 border-brand-gold text-brand-gold":"text-gray-600 dark:text-gray-400 hover:text-brand-gold"),children:"Blocked Users"})]}),e.jsxs("form",{onSubmit:async e=>{var a;if(e.preventDefault(),r)if(null==(a=ce.username)?void 0:a.trim()){B(!0),H(null);try{const{error:e}=await A.from("profiles").upsert({id:r.id,...ce,updated_at:(new Date).toISOString()});if(e)throw e;z(!0),setTimeout(()=>z(!1),3e3)}catch(s){H("Failed to update profile")}finally{B(!1)}}else H("Username is required")},className:"space-y-6",children:["basic"===ie&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"w-24 h-24 rounded-full bg-brand-gold/10 flex items-center justify-center overflow-hidden",children:[ce.avatar_url?e.jsx("img",{src:ce.avatar_url,alt:"Profile",className:"w-full h-full object-cover"}):e.jsx(n,{className:"w-12 h-12 text-brand-gold"}),W&&e.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:e.jsx(a,{className:"w-8 h-8 text-white animate-spin"})})]}),e.jsx("input",{ref:K,type:"file",accept:"image/*",onChange:async e=>{var a;const s=null==(a=e.target.files)?void 0:a[0];if(s&&r)if(s.type.startsWith("image/"))if(s.size>5242880)H("Image size must be less than 5MB");else{$(!0),H(null);try{const e=s.name.split(".").pop(),a=`avatars/${r.id}-${Math.random().toString(36).slice(2)}.${e}`,{error:l}=await A.storage.from("avatars").upload(a,s);if(l)throw l;const{data:{publicUrl:t}}=A.storage.from("avatars").getPublicUrl(a),{error:n}=await A.from("profiles").update({avatar_url:t,updated_at:(new Date).toISOString()}).eq("id",r.id);if(n)throw n;de(e=>({...e,avatar_url:t})),z(!0),setTimeout(()=>z(!1),3e3)}catch(l){H("Failed to upload avatar")}finally{$(!1),K.current&&(K.current.value="")}}else H("Please upload an image file")},className:"hidden"}),e.jsx("button",{type:"button",onClick:()=>{var e;return null==(e=K.current)?void 0:e.click()},disabled:W,className:"absolute bottom-0 right-0 p-2 rounded-full bg-brand-gold text-white hover:bg-brand-gold-dark transition-colors disabled:opacity-50",title:"Upload avatar",children:W?e.jsx(a,{className:"w-4 h-4 animate-spin"}):e.jsx(d,{className:"w-4 h-4"})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:ce.full_name||"Set Your Name"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:null==r?void 0:r.email}),ce.has_premium&&e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-brand-gold",children:[e.jsx(m,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Premium Access"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Username ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(n,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",name:"username",value:ce.username,onChange:pe,className:"w-full pl-10 pr-4 py-2 rounded-lg",placeholder:"Choose a username",required:!0})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Full Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(n,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",name:"full_name",value:ce.full_name,onChange:pe,className:"w-full pl-10 pr-4 py-2 rounded-lg",placeholder:"Your full name",required:!0})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(x,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"tel",name:"phone",value:ce.phone,onChange:pe,className:"w-full pl-10 pr-4 py-2 rounded-lg",placeholder:"Your phone number"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Location"}),e.jsxs("div",{className:"relative",children:[e.jsx(p,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",name:"location",value:ce.location,onChange:pe,className:"w-full pl-10 pr-4 py-2 rounded-lg",placeholder:"Your location"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Website"}),e.jsxs("div",{className:"relative",children:[e.jsx(u,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"url",name:"website",value:ce.website,onChange:pe,className:"w-full pl-10 pr-4 py-2 rounded-lg",placeholder:"Your website"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Bio"}),e.jsxs("div",{className:"relative",children:[e.jsx(h,{className:"absolute left-3 top-3 text-gray-400"}),e.jsx("textarea",{name:"bio",value:ce.bio,onChange:pe,className:"w-full pl-10 pr-4 py-2 rounded-lg",placeholder:"Tell us about yourself",rows:4})]})]})]}),!ce.has_premium&&e.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-800/50",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[e.jsx(m,{className:"w-5 h-5 text-brand-gold"}),"Premium Access"]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Enter a valid promo code to unlock premium features."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{type:"text",value:V,onChange:e=>{const a=e.target.value;X(a),J(I(a)),ee(!1),I(a)&&(async e=>{try{const a=e.toLowerCase(),s=a.charAt(0).toUpperCase()+a.slice(1),{data:r,error:l}=await A.from("profiles").select("id").eq("promo_code",s).limit(1);if(l)throw l;const t=r&&r.length>0;return ee(t),t&&J(!1),t}catch(a){return!1}})(a)},className:"w-full p-2 rounded-lg "+(!0!==Q||Z?!1===Q||Z?"border-red-500":"border-gray-300 dark:border-gray-600":"border-green-500"),placeholder:"Enter promo code"}),!0===Q&&!Z&&e.jsx(c,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-green-500"})]}),e.jsxs("button",{type:"button",onClick:async()=>{if(Q&&!Z){se(!0);try{await O(V)&&(le(!0),de(e=>({...e,promo_code:V,has_premium:!0})),setTimeout(()=>{X(""),le(!1)},3e3))}catch(e){}finally{se(!1)}}},disabled:!Q||Z||ae||re,className:"px-4 py-2 bg-brand-gold text-white rounded-lg hover:bg-brand-gold-dark transition-colors disabled:opacity-50 flex items-center gap-2",children:[ae?e.jsx(a,{className:"w-4 h-4 animate-spin"}):re?e.jsx(g,{className:"w-4 h-4"}):e.jsx(m,{className:"w-4 h-4"}),ae?"Applying...":re?"Applied!":"Apply"]})]}),!1===Q&&V&&!Z&&e.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:"Invalid promo code."}),Z&&e.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:"This promo code has already been used."}),re&&e.jsx("p",{className:"mt-2 text-sm text-green-600 dark:text-green-400",children:"Promo code applied successfully! You now have premium access."})]})]}),"racing"===ie&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(b,{className:"w-6 h-6 text-brand-gold"}),e.jsx("h2",{className:"text-xl font-bold",children:"Racing Background"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Primary Car Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(b,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",name:"car_number",value:ce.car_number,onChange:pe,className:"w-full pl-10 pr-4 py-2 rounded-lg",placeholder:"e.g., 24"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Racing Role"}),e.jsxs("select",{name:"racing_role",value:ce.racing_role,onChange:pe,className:"w-full px-4 py-2 rounded-lg",children:[e.jsx("option",{value:"",children:"Select role"}),e.jsx("option",{value:"Driver",children:"Driver"}),e.jsx("option",{value:"Crew Chief",children:"Crew Chief"}),e.jsx("option",{value:"Mechanic",children:"Mechanic"}),e.jsx("option",{value:"Owner",children:"Owner"}),e.jsx("option",{value:"Spotter",children:"Spotter"}),e.jsx("option",{value:"Fan",children:"Fan"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Primary Racing Class"}),e.jsx("input",{type:"text",name:"primary_racing_class",value:ce.primary_racing_class,onChange:pe,className:"w-full px-4 py-2 rounded-lg",placeholder:"e.g., 410 Sprints"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Racing Since (Year)"}),e.jsxs("div",{className:"relative",children:[e.jsx(y,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"number",name:"years_racing_since",value:ce.years_racing_since||"",onChange:pe,className:"w-full pl-10 pr-4 py-2 rounded-lg",placeholder:"e.g., 2015",min:"1900",max:(new Date).getFullYear()})]})]})]}),e.jsx(he,{label:"All Car Numbers Used",field:"car_numbers",placeholder:"Enter a car number",icon:b}),e.jsx(he,{label:"Home Tracks",field:"home_tracks",placeholder:"Enter a track name",icon:p}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Current Team"}),e.jsxs("div",{className:"relative",children:[e.jsx(j,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",name:"current_team",value:ce.current_team,onChange:pe,className:"w-full pl-10 pr-4 py-2 rounded-lg",placeholder:"Your current racing team"})]})]})]}),"career"===ie&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(f,{className:"w-6 h-6 text-brand-gold"}),e.jsx("h2",{className:"text-xl font-bold",children:"Career & Achievements"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Notable Wins & Achievements"}),e.jsx("textarea",{name:"notable_wins",value:ce.notable_wins,onChange:pe,className:"w-full px-4 py-2 rounded-lg",placeholder:"Describe your racing achievements, wins, and milestones...",rows:4})]}),e.jsx(he,{label:"Previous Teams",field:"previous_teams",placeholder:"Enter a team name",icon:j})]}),"personal"===ie&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(v,{className:"w-6 h-6 text-brand-gold"}),e.jsx("h2",{className:"text-xl font-bold",children:"Personal Information"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Birthday"}),e.jsxs("div",{className:"relative",children:[e.jsx(y,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"date",name:"birthday",value:ce.birthday||"",onChange:pe,className:"w-full pl-10 pr-4 py-2 rounded-lg"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Relationship Status"}),e.jsxs("select",{name:"relationship_status",value:ce.relationship_status,onChange:pe,className:"w-full px-4 py-2 rounded-lg",children:[e.jsx("option",{value:"",children:"Select status"}),e.jsx("option",{value:"Single",children:"Single"}),e.jsx("option",{value:"In a relationship",children:"In a relationship"}),e.jsx("option",{value:"Engaged",children:"Engaged"}),e.jsx("option",{value:"Married",children:"Married"}),e.jsx("option",{value:"Prefer not to say",children:"Prefer not to say"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Hometown"}),e.jsxs("div",{className:"relative",children:[e.jsx(N,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",name:"hometown",value:ce.hometown,onChange:pe,className:"w-full pl-10 pr-4 py-2 rounded-lg",placeholder:"Where you're from"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Day Job"}),e.jsxs("div",{className:"relative",children:[e.jsx(_,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",name:"day_job",value:ce.day_job,onChange:pe,className:"w-full pl-10 pr-4 py-2 rounded-lg",placeholder:"Your profession"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Education"}),e.jsxs("div",{className:"relative",children:[e.jsx(k,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",name:"education",value:ce.education,onChange:pe,className:"w-full pl-10 pr-4 py-2 rounded-lg",placeholder:"Your education background"})]})]}),e.jsx(he,{label:"Mechanical Skills",field:"mechanical_skills",placeholder:"e.g., Engine Building, Suspension Setup",icon:w}),e.jsx(he,{label:"Racing Interests",field:"racing_interests",placeholder:"e.g., Sprint Cars, Late Models",icon:b}),e.jsx(he,{label:"Looking For",field:"looking_for",placeholder:"e.g., Crew Members, Sponsors",icon:j}),e.jsx(he,{label:"Favorite Drivers",field:"favorite_drivers",placeholder:"Enter a driver name",icon:f})]}),"privacy"===ie&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(s,{className:"w-6 h-6 text-brand-gold"}),e.jsx("h2",{className:"text-xl font-bold",children:"Privacy Settings"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Control who can see different sections of your profile."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Racing Information"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2",children:"Car number, class, role, teams, home tracks"}),e.jsxs("select",{name:"privacy_racing_info",value:ce.privacy_racing_info,onChange:pe,className:"w-full px-4 py-2 rounded-lg",children:[e.jsx("option",{value:"public",children:"Public - Everyone can see"}),e.jsx("option",{value:"friends",children:"Friends Only"}),e.jsx("option",{value:"private",children:"Private - Only you"})]})]}),e.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Career & Achievements"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2",children:"Championships, wins, career highlights"}),e.jsxs("select",{name:"privacy_career_info",value:ce.privacy_career_info,onChange:pe,className:"w-full px-4 py-2 rounded-lg",children:[e.jsx("option",{value:"public",children:"Public - Everyone can see"}),e.jsx("option",{value:"friends",children:"Friends Only"}),e.jsx("option",{value:"private",children:"Private - Only you"})]})]}),e.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Personal Information"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2",children:"Birthday, hometown, day job, education, interests"}),e.jsxs("select",{name:"privacy_personal_info",value:ce.privacy_personal_info,onChange:pe,className:"w-full px-4 py-2 rounded-lg",children:[e.jsx("option",{value:"public",children:"Public - Everyone can see"}),e.jsx("option",{value:"friends",children:"Friends Only"}),e.jsx("option",{value:"private",children:"Private - Only you"})]})]}),e.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Contact Information"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2",children:"Phone number, email"}),e.jsxs("select",{name:"privacy_contact_info",value:ce.privacy_contact_info,onChange:pe,className:"w-full px-4 py-2 rounded-lg",children:[e.jsx("option",{value:"public",children:"Public - Everyone can see"}),e.jsx("option",{value:"friends",children:"Friends Only"}),e.jsx("option",{value:"private",children:"Private - Only you"})]})]})]}),e.jsx("div",{className:"bg-brand-gold/10 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[e.jsx("strong",{children:"Note:"})," Your posts and marketplace listings visibility is controlled separately and follows their own privacy settings."]})})]}),"blocked"===ie&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(s,{className:"w-6 h-6 text-brand-gold"}),e.jsx("h2",{className:"text-xl font-bold",children:"Blocked Users"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Manage users you've blocked. Blocked users cannot see your profile, posts, or contact you."}),e.jsx(Y,{})]}),"blocked"!==ie&&e.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:()=>l(-1),className:"px-6 py-2 rounded-lg bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:F,className:"btn-primary flex items-center gap-2",children:F?e.jsxs(e.Fragment,{children:[e.jsx(a,{className:"w-5 h-5 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})]}),e.jsxs("div",{className:"glass-panel p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Subscription"}),e.jsx(L,{})]}),e.jsxs("div",{className:"glass-panel p-8 bg-gradient-to-br from-brand-gold/5 to-brand-gold-light/5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(C,{className:"w-6 h-6 text-brand-gold"}),e.jsx("h2",{className:"text-2xl font-bold",children:"Share Pit-Box.com"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Help grow the racing community by sharing Pit-Box.com with your crew, friends, and fellow racers."}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 items-start",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-lg mb-4",children:e.jsx(D,{value:me,size:200,level:"H",includeMargin:!0})}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 text-center",children:"Scan to visit Pit-Box.com"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Website URL"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:me,readOnly:!0,className:"flex-1 px-4 py-2 rounded-lg bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700"}),e.jsx("button",{onClick:async()=>{try{await navigator.clipboard.writeText(me),ne(!0),setTimeout(()=>ne(!1),2e3)}catch(e){}},className:"px-4 py-2 bg-brand-gold text-white rounded-lg hover:bg-brand-gold-dark transition-colors flex items-center gap-2",children:te?e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"w-4 h-4"}),"Copied!"]}):e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"w-4 h-4"}),"Copy"]})})]})]}),e.jsxs("button",{onClick:()=>{l("/qr-download")},className:"w-full px-6 py-3 bg-brand-gold text-white rounded-lg hover:bg-brand-gold-dark transition-colors flex items-center justify-center gap-2 font-medium",children:[e.jsx(P,{className:"w-5 h-5"}),"Download QR Codes (All Sizes)"]}),e.jsx("div",{className:"bg-brand-gold/10 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[e.jsx("strong",{children:"Pro Tip:"})," Download high-resolution QR codes for business cards, flyers, vehicle decals, and more. Perfect for promoting Pit-Box.com at the track!"]})})]})]})]})]})}export{q as default};
