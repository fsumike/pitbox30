import{j as e,af as s,f as a,L as l,O as t}from"./ui-a5pT2S0L.js";import{r}from"./react-CLW9qjVv.js";import{u as i,s as n}from"./index-DMaHBciH.js";import"./supabase-Dols_XF-.js";import"./router-CsjlwGXH.js";function d(){const{user:d}=i(),[c,o]=r.useState({springRate:400,motionRatio:.85,installRatio:1,springTravel:3}),[m,x]=r.useState(""),[g,h]=r.useState(!1),[p,u]=r.useState(!1),j=(()=>{const{springRate:e,motionRatio:s,installRatio:a,springTravel:l}=c,t=e*(s*s)*a,r=e*l,i=l/s,n=Math.sqrt(386.4*t/100)/(2*Math.PI);return{wheelRate:t.toFixed(1),forceAtFullCompression:r.toFixed(0),wheelTravel:i.toFixed(2),naturalFrequency:n.toFixed(2)}})();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Spring Parameters"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Spring Rate (lbs/in)"}),e.jsx("input",{type:"number",value:c.springRate,onChange:e=>o({...c,springRate:parseFloat(e.target.value)||0}),className:"w-full p-3 rounded-lg",step:"25"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Force required to compress spring 1 inch"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Motion Ratio"}),e.jsx("input",{type:"number",value:c.motionRatio,onChange:e=>o({...c,motionRatio:parseFloat(e.target.value)||0}),className:"w-full p-3 rounded-lg",step:"0.05"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Typical range: 0.75-1.0 (spring travel / wheel travel)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Installation Ratio"}),e.jsx("input",{type:"number",value:c.installRatio,onChange:e=>o({...c,installRatio:parseFloat(e.target.value)||0}),className:"w-full p-3 rounded-lg",step:"0.1"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Usually 1.0 for coilovers, varies for pushrod/pullrod"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Spring Travel (inches)"}),e.jsx("input",{type:"number",value:c.springTravel,onChange:e=>o({...c,springTravel:parseFloat(e.target.value)||0}),className:"w-full p-3 rounded-lg",step:"0.5"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Available compression travel"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold mb-2 text-sm",children:"Common Spring Rates"}),e.jsxs("div",{className:"space-y-1 text-xs text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Sprint Car Front:"}),e.jsx("span",{className:"font-medium",children:"350-500 lbs/in"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Sprint Car Rear:"}),e.jsx("span",{className:"font-medium",children:"200-300 lbs/in"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Late Model Front:"}),e.jsx("span",{className:"font-medium",children:"400-600 lbs/in"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Late Model Rear:"}),e.jsx("span",{className:"font-medium",children:"250-400 lbs/in"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Calculated Values"}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-500/10 to-blue-600/10 rounded-lg p-6",children:[e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Wheel Rate"}),e.jsxs("div",{className:"text-4xl font-bold text-blue-600",children:[j.wheelRate," lbs/in"]}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-2",children:"Effective spring rate at the wheel"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-500/10 to-green-600/10 rounded-lg p-6",children:[e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Force at Full Compression"}),e.jsxs("div",{className:"text-4xl font-bold text-green-600",children:[j.forceAtFullCompression," lbs"]}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-2",children:"Maximum force when bottomed out"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Wheel Travel"}),e.jsxs("span",{className:"font-semibold",children:[j.wheelTravel," inches"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Natural Frequency"}),e.jsxs("span",{className:"font-semibold",children:[j.naturalFrequency," Hz"]})]})]}),e.jsxs("div",{className:"bg-brand-gold/10 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Spring Selection Guide"}),e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 space-y-1",children:[e.jsx("p",{children:"• Higher wheel rate = less roll, more responsive"}),e.jsx("p",{children:"• Lower wheel rate = more grip, smoother ride"}),e.jsx("p",{children:"• Target 1.5-2.5 Hz natural frequency for most dirt cars"}),e.jsx("p",{children:"• Motion ratio affects wheel rate significantly"})]})]}),d&&e.jsxs("button",{onClick:()=>h(!0),className:"w-full px-4 py-3 bg-brand-gold text-white rounded-lg hover:bg-brand-gold-dark inline-flex items-center justify-center gap-2",children:[e.jsx(s,{className:"w-5 h-5"}),"Save Spring Calculation"]})]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[e.jsx(a,{className:"w-5 h-5 text-blue-600"}),"Spring Rate Tips"]}),e.jsxs("ul",{className:"text-sm space-y-1 text-gray-600 dark:text-gray-400",children:[e.jsx("li",{children:"• Wheel rate is what matters for handling, not spring rate"}),e.jsx("li",{children:"• Motion ratio varies through suspension travel (non-linear)"}),e.jsx("li",{children:"• Stiffer springs reduce body roll but may hurt mechanical grip"}),e.jsx("li",{children:"• Front springs mainly affect turn-in and initial handling"}),e.jsx("li",{children:"• Rear springs mainly affect drive off corners and stability"}),e.jsx("li",{children:"• Always consider total package: springs, shocks, and bars"})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Save Spring Calculation"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Setup Name *"}),e.jsx("input",{type:"text",value:m,onChange:e=>x(e.target.value),className:"w-full p-3 rounded-lg",placeholder:"e.g., 400lb Front Spring Setup",required:!0})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600",children:"Cancel"}),e.jsxs("button",{onClick:async()=>{if(!d||!m.trim())return;u(!0);const{error:e}=await n.from("saved_calculations").insert({user_id:d.id,calculation_type:"spring_rate",name:m,inputs:c,results:j});e||(x(""),h(!1)),u(!1)},disabled:p||!m.trim(),className:"px-4 py-2 bg-brand-gold text-white rounded-lg hover:bg-brand-gold-dark disabled:opacity-50 flex items-center gap-2",children:[p?e.jsx(l,{className:"w-4 h-4 animate-spin"}):e.jsx(t,{className:"w-4 h-4"}),"Save"]})]})]})]})})})]})}export{d as default};
