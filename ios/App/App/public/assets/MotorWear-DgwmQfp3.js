import{j as e,V as s,B as a,L as t,D as l,e as r,m as n,aV as i,A as d,c,a0 as o,X as m,O as x,aW as p,ak as h,I as g}from"./ui-a5pT2S0L.js";import{r as u}from"./react-CLW9qjVv.js";import{u as j}from"./useMotorHealth-B_bojcQE.js";import{u as f}from"./index-DMaHBciH.js";import"./supabase-Dols_XF-.js";import"./router-CsjlwGXH.js";const b={"410_sprint":{name:"410 Sprint Car",expectedLife:750,refreshThreshold:80,description:"High-performance 410 cubic inch sprint car engines typically last 750-1000 laps between major rebuilds. These powerful engines operate at extreme RPMs and require careful monitoring.",tips:["Monitor oil pressure closely during races","Check compression every 100 laps","Refresh at 80% of expected life for optimal performance","Track RPM patterns to identify potential issues early"]},"360_sprint":{name:"360 Sprint Car",expectedLife:900,refreshThreshold:80,description:"360 cubic inch sprint car engines offer excellent durability while maintaining competitive power. Expected life is 900-1200 laps with proper maintenance.",tips:["Less stress than 410s allows for longer intervals","Still monitor oil consumption carefully","Valve adjustments every 200 laps recommended","Consider refresh at 720 laps for peak performance"]},crate_sprint:{name:"Crate Sprint",expectedLife:1200,refreshThreshold:85,description:"Sealed crate engines are designed for longevity and cost control. These engines typically last 1200-1500 laps with minimal maintenance.",tips:["Follow manufacturer maintenance schedule strictly","Oil changes every 3-4 races","Sealed nature means fewer adjustments needed","Focus on external components and cooling system"]},late_model:{name:"Late Model",expectedLife:800,refreshThreshold:75,description:"Late model engines balance power and durability for longer races. Expected life is 800-1000 laps depending on track conditions.",tips:["Longer races mean more heat cycles","Monitor water temperature closely","Check valve springs every 150 laps","Consider refresh earlier for championship events"]},crate_late_model:{name:"Crate Late Model",expectedLife:1e3,refreshThreshold:80,description:"Crate late model engines provide excellent reliability for cost-conscious teams. Expected life is 1000-1300 laps.",tips:["More durable than open engines","Follow crate engine maintenance guidelines","Oil analysis recommended every 200 laps","Cooling system maintenance is critical"]},modified:{name:"Modified",expectedLife:850,refreshThreshold:80,description:"Modified engines see varied conditions and power levels. Expected life ranges from 850-1100 laps based on setup.",tips:["Power levels vary significantly by class","Track conditions greatly affect engine life","Monitor for dirt ingestion on dusty tracks","Carburetor tuning affects engine longevity"]},micro_600:{name:"600 Micro",expectedLife:600,refreshThreshold:75,description:"High-revving 600cc motorcycle engines require frequent attention. Expected life is 600-800 laps due to extreme RPM operation.",tips:["Highest RPM operation of all classes","Check valve clearances every 100 laps","Oil changes every 2-3 races mandatory","Monitor for overheating during long races"]}};function y({isOpen:s,onClose:a,onSave:l,loading:r}){const[i,d]=u.useState({name:"",motor_type:"",engine_class:"",expected_life_laps:750,refresh_threshold:80,notes:""});return s?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsx(n.div,{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-2xl",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Add New Motor"}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full",children:e.jsx(m,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:e=>{e.preventDefault(),l(i),d({name:"",motor_type:"",engine_class:"",expected_life_laps:750,refresh_threshold:80,notes:""})},className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Motor Name *"}),e.jsx("input",{type:"text",value:i.name,onChange:e=>d((s=>({...s,name:e.target.value}))),className:"w-full p-3 rounded-lg",placeholder:"e.g., Primary 410, Backup 360, etc.",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Motor Type *"}),e.jsxs("select",{value:i.motor_type,onChange:e=>(e=>{const s=b[e];d((a=>({...a,motor_type:e,expected_life_laps:(null==s?void 0:s.expectedLife)||750,refresh_threshold:(null==s?void 0:s.refreshThreshold)||80})))})(e.target.value),className:"w-full p-3 rounded-lg",required:!0,children:[e.jsx("option",{value:"",children:"Select Motor Type"}),Object.entries(b).map((([s,a])=>e.jsx("option",{value:s,children:a.name},s)))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Engine Class"}),e.jsx("input",{type:"text",value:i.engine_class,onChange:e=>d((s=>({...s,engine_class:e.target.value}))),className:"w-full p-3 rounded-lg",placeholder:"e.g., Open, Crate, Restricted, etc."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Expected Life (Laps)"}),e.jsx("input",{type:"number",value:i.expected_life_laps,onChange:e=>d((s=>({...s,expected_life_laps:parseInt(e.target.value)}))),className:"w-full p-3 rounded-lg",min:"1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Refresh Threshold (%)"}),e.jsx("input",{type:"number",value:i.refresh_threshold,onChange:e=>d((s=>({...s,refresh_threshold:parseInt(e.target.value)}))),className:"w-full p-3 rounded-lg",min:"1",max:"100"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Notes"}),e.jsx("textarea",{value:i.notes,onChange:e=>d((s=>({...s,notes:e.target.value}))),className:"w-full p-3 rounded-lg",rows:3,placeholder:"Additional notes about this motor..."})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{type:"button",onClick:a,className:"px-6 py-2 bg-gray-100 dark:bg-gray-800 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:r,className:"px-6 py-2 bg-brand-gold text-white rounded-lg hover:bg-brand-gold-dark disabled:opacity-50 flex items-center gap-2",children:r?e.jsxs(e.Fragment,{children:[e.jsx(t,{className:"w-5 h-5 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(x,{className:"w-5 h-5"}),"Save Motor"]})})]})]})]})})}):null}function v({isOpen:s,onClose:a,onSave:l,motorId:r,loading:i}){const[d,c]=u.useState({date:(new Date).toISOString().split("T")[0],event_type:"race",laps:0,average_rpm:0,max_rpm:0,track_name:"",notes:""});return s?e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsx(n.div,{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-2xl",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Add Motor Event"}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full",children:e.jsx(m,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:e=>{e.preventDefault(),l({motor_id:r,...d}),c({date:(new Date).toISOString().split("T")[0],event_type:"race",laps:0,average_rpm:0,max_rpm:0,track_name:"",notes:""})},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Date *"}),e.jsx("input",{type:"date",value:d.date,onChange:e=>c((s=>({...s,date:e.target.value}))),className:"w-full p-3 rounded-lg",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Event Type *"}),e.jsxs("select",{value:d.event_type,onChange:e=>c((s=>({...s,event_type:e.target.value}))),className:"w-full p-3 rounded-lg",required:!0,children:[e.jsx("option",{value:"race",children:"Race"}),e.jsx("option",{value:"practice",children:"Practice"}),e.jsx("option",{value:"maintenance",children:"Maintenance"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Track Name"}),e.jsx("input",{type:"text",value:d.track_name,onChange:e=>c((s=>({...s,track_name:e.target.value}))),className:"w-full p-3 rounded-lg",placeholder:"e.g., Knoxville Raceway, Eldora Speedway"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Laps *"}),e.jsx("input",{type:"number",value:d.laps,onChange:e=>c((s=>({...s,laps:parseInt(e.target.value)||0}))),className:"w-full p-3 rounded-lg",min:"0",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Average RPM"}),e.jsx("input",{type:"number",value:d.average_rpm,onChange:e=>c((s=>({...s,average_rpm:parseInt(e.target.value)||0}))),className:"w-full p-3 rounded-lg",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Max RPM"}),e.jsx("input",{type:"number",value:d.max_rpm,onChange:e=>c((s=>({...s,max_rpm:parseInt(e.target.value)||0}))),className:"w-full p-3 rounded-lg",min:"0"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Notes"}),e.jsx("textarea",{value:d.notes,onChange:e=>c((s=>({...s,notes:e.target.value}))),className:"w-full p-3 rounded-lg",rows:3,placeholder:"Event notes, observations, issues, etc."})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{type:"button",onClick:a,className:"px-6 py-2 bg-gray-100 dark:bg-gray-800 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:i,className:"px-6 py-2 bg-brand-gold text-white rounded-lg hover:bg-brand-gold-dark disabled:opacity-50 flex items-center gap-2",children:i?e.jsxs(e.Fragment,{children:[e.jsx(t,{className:"w-5 h-5 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(x,{className:"w-5 h-5"}),"Add Event"]})})]})]})]})})}):null}function N({motor:a,events:l,onClose:r,onAddEvent:c,onEditMotor:x,onDeleteMotor:u,eventsLoading:j}){if(!a)return null;const f=Math.max(0,100-a.total_laps/a.expected_life_laps*100),y=f<=a.refresh_threshold,v=b[a.motor_type],N=e=>e>=70?"text-green-500":e>=40?"text-yellow-500":"text-red-500";return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsx(n.div,{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:a.name}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:(null==v?void 0:v.name)||a.motor_type})]}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full",children:e.jsx(m,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"glass-panel p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold",children:"Motor Health"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{className:`w-6 h-6 ${N(f)}`}),e.jsxs("span",{className:`text-2xl font-bold ${N(f)}`,children:[Math.round(f),"%"]})]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-4 mb-4",children:e.jsx("div",{className:"h-4 rounded-full transition-all duration-500 "+(w=f,w>=70?"bg-green-500":w>=40?"bg-yellow-500":"bg-red-500"),style:{width:`${f}%`}})}),y&&e.jsxs("div",{className:"p-3 rounded-lg bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 flex items-center gap-2",children:[e.jsx(d,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("span",{className:"text-sm font-medium",children:"Refresh Recommended"})]})]}),e.jsxs("div",{className:"glass-panel p-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Motor Stats"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Laps"}),e.jsx("span",{className:"font-semibold",children:a.total_laps.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Effective Laps"}),e.jsx("span",{className:"font-semibold",children:a.effective_laps.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Expected Life"}),e.jsx("span",{className:"font-semibold",children:a.expected_life_laps.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Engine Class"}),e.jsx("span",{className:"font-semibold",children:a.engine_class||"Not specified"})]}),a.last_serviced&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Last Serviced"}),e.jsx("span",{className:"font-semibold",children:new Date(a.last_serviced).toLocaleDateString()})]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 mb-8",children:[e.jsxs("button",{onClick:c,className:"btn-primary flex items-center gap-2",children:[e.jsx(s,{className:"w-5 h-5"}),"Add Event"]}),e.jsxs("button",{onClick:x,className:"btn-secondary flex items-center gap-2",children:[e.jsx(p,{className:"w-5 h-5"}),"Edit Motor"]}),e.jsxs("button",{onClick:u,className:"btn-danger flex items-center gap-2",children:[e.jsx(o,{className:"w-5 h-5"}),"Delete Motor"]})]}),e.jsxs("div",{className:"glass-panel p-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Event History"}),j?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(t,{className:"w-8 h-8 animate-spin text-brand-gold"})}):0===l.length?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(h,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No events recorded yet"}),e.jsxs("button",{onClick:c,className:"btn-primary mt-4 flex items-center gap-2 mx-auto",children:[e.jsx(s,{className:"w-5 h-5"}),"Add First Event"]})]}):e.jsx("div",{className:"space-y-4 max-h-[400px] overflow-y-auto",children:l.map((s=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full "+("race"===s.event_type?"bg-red-500":"practice"===s.event_type?"bg-blue-500":"bg-green-500")}),e.jsx("span",{className:"font-semibold capitalize",children:s.event_type}),s.track_name&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-gray-400",children:"•"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:s.track_name})]})]}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(s.date).toLocaleDateString()})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Laps:"}),e.jsx("span",{className:"ml-2 font-medium",children:s.laps})]}),s.average_rpm&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Avg RPM:"}),e.jsx("span",{className:"ml-2 font-medium",children:s.average_rpm.toLocaleString()})]}),s.max_rpm&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Max RPM:"}),e.jsx("span",{className:"ml-2 font-medium",children:s.max_rpm.toLocaleString()})]})]}),s.notes&&e.jsx("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:s.notes})})]},s.id)))})]}),v&&e.jsxs("div",{className:"glass-panel p-6 mt-6 bg-gradient-to-br from-blue-500/10 to-purple-500/10",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(g,{className:"w-6 h-6 text-blue-500"}),v.name," Information"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:v.description}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Maintenance Tips:"}),e.jsx("ul",{className:"space-y-1",children:v.tips.map(((s,a)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-brand-gold mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:s})]},a)))})]})]})]})})});var w}function w(){const{user:m}=f(),{saveMotor:x,addMotorEvent:p,loadMotors:h,loadMotorEvents:g,updateMotor:w,deleteMotor:k,loading:_,error:C}=j(),[M,S]=u.useState([]),[L,E]=u.useState(null),[T,R]=u.useState([]),[A,D]=u.useState(!1),[F,O]=u.useState(!1),[I,P]=u.useState(!1),[H,q]=u.useState(null),[$,z]=u.useState(!1),[V,Y]=u.useState(1);u.useEffect((()=>{m&&B()}),[m]);const B=async()=>{const e=await h();S(e)},G=async e=>{z(!0);const s=await g(e);R(s),z(!1)},K=async e=>{1!==V?await k(e)&&(S((s=>s.filter((s=>s.id!==e)))),q(null),E(null),Y(1)):Y(2)},U=(e,s)=>Math.max(0,100-e/s*100),W=e=>e>=70?"text-green-500":e>=40?"text-yellow-500":"text-red-500";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"glass-panel p-6 bg-gradient-to-br from-red-500/10 to-orange-500/10",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-2 text-red-600 dark:text-red-400",children:"Motor Health Management"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Track and manage your racing engines across all categories"})]}),e.jsxs("button",{onClick:()=>D(!0),className:"btn-primary flex items-center gap-2",children:[e.jsx(s,{className:"w-5 h-5"}),"Add New Motor"]})]}),C&&e.jsxs("div",{className:"mt-4 p-3 rounded-lg bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 flex items-center gap-2",children:[e.jsx(a,{className:"w-5 h-5 flex-shrink-0"}),C]})]}),e.jsxs("div",{className:"glass-panel p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Racing Motor Life Expectancy Guide"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Object.entries(b).map((([s,a])=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:a.name}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Expected Life:"}),e.jsxs("span",{className:"font-medium",children:[a.expectedLife.toLocaleString()," laps"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Refresh at:"}),e.jsxs("span",{className:"font-medium",children:[a.refreshThreshold,"% health"]})]})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-3 line-clamp-3",children:a.description})]},s)))})]}),e.jsxs("div",{className:"glass-panel p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Your Motors"}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[M.length," of 7 motors maximum per category"]})]}),_&&0===M.length?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(t,{className:"w-8 h-8 animate-spin text-brand-gold"})}):0===M.length?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(l,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"No Motors Added Yet"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Start tracking your racing engines by adding your first motor."}),e.jsxs("button",{onClick:()=>D(!0),className:"btn-primary flex items-center gap-2 mx-auto",children:[e.jsx(s,{className:"w-5 h-5"}),"Add Your First Motor"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.jsx(r,{children:M.map((s=>{const a=U(s.total_laps,s.expected_life_laps),t=a<=s.refresh_threshold,l=b[s.motor_type];return e.jsxs(n.div,{className:"glass-panel p-6 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors",onClick:()=>(async e=>{E(e),await G(e.id)})(s),initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},whileHover:{scale:1.02},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold truncate",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{className:`w-6 h-6 ${W(a)}`}),e.jsxs("span",{className:`text-lg font-bold ${W(a)}`,children:[Math.round(a),"%"]})]})]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:[(null==l?void 0:l.name)||s.motor_type," • ",s.engine_class||"Unspecified Class"]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3 mb-4",children:e.jsx("div",{className:"h-3 rounded-full transition-all duration-500 "+(r=a,r>=70?"bg-green-500":r>=40?"bg-yellow-500":"bg-red-500"),style:{width:`${a}%`}})}),t&&e.jsxs("div",{className:"mb-4 p-2 rounded-lg bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 flex items-center gap-2",children:[e.jsx(d,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"text-xs font-medium",children:"Refresh Recommended"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Laps"}),e.jsx("span",{className:"font-semibold",children:s.total_laps.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Expected Life"}),e.jsx("span",{className:"font-semibold",children:s.expected_life_laps.toLocaleString()})]}),s.last_serviced&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Last Serviced"}),e.jsx("span",{className:"font-semibold",children:new Date(s.last_serviced).toLocaleDateString()})]})]}),s.notes&&e.jsx("div",{className:"mt-3 p-2 bg-gray-50 dark:bg-gray-800 rounded-lg",children:e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 line-clamp-2",children:s.notes})})]},s.id);var r}))})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"glass-panel p-6 text-center",children:[e.jsx(l,{className:"w-8 h-8 text-blue-500 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:M.length}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Motors"})]}),e.jsxs("div",{className:"glass-panel p-6 text-center",children:[e.jsx(c,{className:"w-8 h-8 text-green-500 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:M.filter((e=>U(e.total_laps,e.expected_life_laps)>e.refresh_threshold)).length}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Healthy"})]}),e.jsxs("div",{className:"glass-panel p-6 text-center",children:[e.jsx(d,{className:"w-8 h-8 text-yellow-500 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:M.filter((e=>{const s=U(e.total_laps,e.expected_life_laps);return s<=e.refresh_threshold&&s>20})).length}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Need Service"})]}),e.jsxs("div",{className:"glass-panel p-6 text-center",children:[e.jsx(a,{className:"w-8 h-8 text-red-500 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:M.filter((e=>U(e.total_laps,e.expected_life_laps)<=20)).length}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Critical"})]})]}),e.jsx(y,{isOpen:A,onClose:()=>D(!1),onSave:async e=>{await x(e)&&(await B(),D(!1))},loading:_}),e.jsx(v,{isOpen:F,onClose:()=>O(!1),onSave:async e=>{await p(e)&&L&&(await G(L.id),await B(),O(!1))},motorId:(null==L?void 0:L.id)||"",loading:_}),e.jsx(N,{motor:L,events:T,onClose:()=>E(null),onAddEvent:()=>O(!0),onEditMotor:()=>P(!0),onDeleteMotor:()=>q((null==L?void 0:L.id)||null),eventsLoading:$}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsx(n.div,{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-md",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(d,{className:"w-8 h-8 text-red-500"}),e.jsxs("h3",{className:"text-xl font-bold",children:["Delete Motor - Step ",V," of 2"]})]}),1===V?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Are you sure you want to delete this motor? This will permanently remove all associated events and data."}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{onClick:()=>{q(null),Y(1)},className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600",children:"Cancel"}),e.jsx("button",{onClick:()=>K(H),className:"px-4 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600",children:"Continue to Step 2"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-red-600 dark:text-red-400 mb-6 font-medium",children:"FINAL CONFIRMATION: This action cannot be undone. All motor data and events will be permanently deleted."}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{onClick:()=>{q(null),Y(1)},className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600",children:"Cancel"}),e.jsx("button",{onClick:()=>K(H),disabled:_,className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 disabled:opacity-50 flex items-center gap-2",children:_?e.jsxs(e.Fragment,{children:[e.jsx(t,{className:"w-5 h-5 animate-spin"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(o,{className:"w-5 h-5"}),"Delete Permanently"]})})]})]})]})})})]})}export{w as default};
