import{j as e,V as l,aM as a,aq as s,_ as t,R as r,L as n,c as i,O as o}from"./ui-v2ReSvUE.js";import{r as c}from"./react-YWE4JMTy.js";import{u as d}from"./index-Cgc97SP_.js";import{N as m}from"./NumberInput-CMTJlAXY.js";function u(){const{user:u}=d(),[x,h]=c.useState(!1),[f,p]=c.useState(null),[b,g]=c.useState(!1),[j,v]=c.useState(null),[N,w]=c.useState(!1),[y,C]=c.useState(null),[k,S]=c.useState([]),[D,R]=c.useState("all"),$={id:crypto.randomUUID(),manufacturer:"",compound:"",car:"All Cars",vendor:"",dateNew:(new Date).toISOString().split("T")[0],corner:"",wheel:"",rollout:"",setNumber:"",offset:"",rimWidth:"",rimOffset:"",shortCode:"",serialNumber:"",dateCode:"",group:"",tireSize:"",inflatedSize:"",durometer:"",springRate:"",condition:5,comment:"",runs:0,laps:0,active:!0},[M,O]=c.useState($),T=(e,l)=>{C({fieldKey:e,title:l})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[e.jsx("button",{onClick:()=>R("all"),className:"flex-1 sm:flex-none px-4 py-2 rounded-lg transition-colors "+("all"===D?"bg-brand-gold text-white":"hover:bg-gray-100 dark:hover:bg-gray-800"),children:"All Tires"}),e.jsx("button",{onClick:()=>R("active"),className:"flex-1 sm:flex-none px-4 py-2 rounded-lg transition-colors "+("active"===D?"bg-brand-gold text-white":"hover:bg-gray-100 dark:hover:bg-gray-800"),children:"Active Only"})]}),e.jsxs("div",{className:"flex flex-wrap sm:flex-nowrap items-center gap-2 w-full sm:w-auto",children:[e.jsxs("button",{onClick:()=>v(null),className:"flex-1 sm:flex-none btn-primary flex items-center justify-center gap-2 px-4 py-2",children:[e.jsx(l,{className:"w-5 h-5"}),e.jsx("span",{className:"whitespace-nowrap",children:"New Tire"})]}),e.jsxs("button",{className:"flex-1 sm:flex-none btn-secondary flex items-center justify-center gap-2 px-4 py-2",children:[e.jsx(a,{className:"w-5 h-5"}),e.jsx("span",{className:"whitespace-nowrap",children:"Analytics"})]}),e.jsxs("button",{onClick:()=>{const e=`Pit Logic Tire,,,,,,,Exported:,${(new Date).toLocaleDateString()},,\nTire:,,,,Car:,${M.car},,,,,\nMfg:,${M.manufacturer},,,,Compound:,${M.compound},,,,\nVendor:,${M.vendor},,,,Date New:,${M.dateNew},,,,,\nCorner:,${M.corner},,,,Wheel:,${M.wheel},,,,,\nDate Code:,${M.dateCode},,,,Group:,${M.group},,,,\nSize:,${M.tireSize},,,,Inflated:,${M.inflatedSize},,,,\nDurometer:,${M.durometer},,,,Spring Rate:,${M.springRate},,,,\nComment:,${M.comment},,,,,,,,,,\n`,l=new Blob([e],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a");a.href=URL.createObjectURL(l),a.download=`tire_${M.id}_${(new Date).toISOString().split("T")[0]}.csv`,a.click()},className:"flex-1 sm:flex-none btn-secondary flex items-center justify-center gap-2 px-4 py-2",children:[e.jsx(s,{className:"w-5 h-5"}),e.jsx("span",{className:"whitespace-nowrap",children:"Export"})]}),e.jsxs("button",{className:"flex-1 sm:flex-none btn-secondary flex items-center justify-center gap-2 px-4 py-2",children:[e.jsx(t,{className:"w-5 h-5"}),e.jsx("span",{className:"whitespace-nowrap",children:"Import"})]})]})]}),f&&e.jsx("div",{className:"mb-4 p-3 rounded-lg bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300",children:f}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Manufacturer"}),e.jsxs("select",{value:M.manufacturer,onChange:e=>O(l=>({...l,manufacturer:e.target.value})),className:"w-full p-2 rounded-lg",children:[e.jsx("option",{value:"",children:"Select Manufacturer"}),["Hoosier","American Racer","Goodyear","McCreary","Other"].map(l=>e.jsx("option",{value:l,children:l},l))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Compound"}),e.jsxs("select",{value:M.compound,onChange:e=>O(l=>({...l,compound:e.target.value})),className:"w-full p-2 rounded-lg",children:[e.jsx("option",{value:"",children:"Select Compound"}),M.manufacturer&&{Hoosier:["D12","D15","D25","D35","D55","RD12","RD15","RD20"],"American Racer":["M28","M32","M44","SD44","SD48"],Goodyear:["D10","D12","D14","D16"],McCreary:["M28","M32","M44"],Other:["Custom"]}[M.manufacturer].map(l=>e.jsx("option",{value:l,children:l},l))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Corner"}),e.jsxs("select",{value:M.corner,onChange:e=>O(l=>({...l,corner:e.target.value})),className:"w-full p-2 rounded-lg",children:[e.jsx("option",{value:"",children:"Select Corner"}),["Left Front","Right Front","Left Rear","Right Rear"].map(l=>e.jsx("option",{value:l,children:l},l))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Date New"}),e.jsx("input",{type:"date",value:M.dateNew,onChange:e=>O(l=>({...l,dateNew:e.target.value})),className:"w-full p-2 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tire Size"}),e.jsx("button",{onClick:()=>T("tireSize","Enter Tire Size"),className:"w-full p-2 text-left bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-600",children:M.tireSize||"Click to enter size"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Durometer"}),e.jsx("button",{onClick:()=>T("durometer","Enter Durometer"),className:"w-full p-2 text-left bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-600",children:M.durometer||"Click to enter durometer"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Rollout"}),e.jsx("button",{onClick:()=>T("rollout","Enter Rollout"),className:"w-full p-2 text-left bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-600",children:M.rollout||"Click to enter rollout"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Rim Width"}),e.jsxs("select",{value:M.rimWidth,onChange:e=>O(l=>({...l,rimWidth:e.target.value})),className:"w-full p-2 rounded-lg",children:[e.jsx("option",{value:"",children:"Select Width"}),['10"','12"','14"','15"','16"'].map(l=>e.jsx("option",{value:l,children:l},l))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Rim Offset"}),e.jsxs("select",{value:M.rimOffset,onChange:e=>O(l=>({...l,rimOffset:e.target.value})),className:"w-full p-2 rounded-lg",children:[e.jsx("option",{value:"",children:"Select Offset"}),[{value:"-4",label:"-4 inches"},{value:"-3",label:"-3 inches"},{value:"-2",label:"-2 inches"},{value:"-1",label:"-1 inch"},{value:"0",label:"0 (neutral)"},{value:"1",label:"+1 inch"},{value:"2",label:"+2 inches"},{value:"3",label:"+3 inches"},{value:"4",label:"+4 inches"}].map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))]})]}),e.jsxs("div",{className:"col-span-full",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Condition"}),e.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(l=>e.jsx("button",{onClick:()=>O(e=>({...e,condition:l})),className:"w-8 h-8 rounded-full "+(l<=M.condition?"bg-green-500":"bg-gray-200 dark:bg-gray-700")},l))})]}),e.jsxs("div",{className:"col-span-full",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Comments"}),e.jsx("textarea",{value:M.comment,onChange:e=>O(l=>({...l,comment:e.target.value})),className:"w-full p-2 rounded-lg",rows:4,placeholder:"Add notes about the tire..."})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[e.jsxs("button",{onClick:()=>O($),className:"btn-secondary flex items-center gap-2",children:[e.jsx(r,{className:"w-5 h-5"}),"Reset"]}),e.jsx("button",{onClick:async()=>{if(u){h(!0),p(null);try{g(!0),setTimeout(()=>g(!1),2e3)}catch(e){p("Failed to save tire details")}finally{h(!1)}}},disabled:x,className:"btn-primary flex items-center gap-2",children:x?e.jsxs(e.Fragment,{children:[e.jsx(n,{className:"w-5 h-5 animate-spin"}),"Saving..."]}):b?e.jsxs(e.Fragment,{children:[e.jsx(i,{className:"w-5 h-5"}),"Saved!"]}):e.jsxs(e.Fragment,{children:[e.jsx(o,{className:"w-5 h-5"}),"Save Tire"]})})]}),y&&e.jsx(m,{value:M[y.fieldKey],onChange:e=>{O(l=>({...l,[y.fieldKey]:e})),C(null)},title:y.title,onClose:()=>C(null)})]})}export{u as T};
