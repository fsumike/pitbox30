import{j as e,af as s,a_ as t,L as a,O as l}from"./ui-a5pT2S0L.js";import{r}from"./react-CLW9qjVv.js";import{u as i,s as d}from"./index-DMaHBciH.js";import"./supabase-Dols_XF-.js";import"./router-CsjlwGXH.js";function n(){const{user:n}=i(),[c,o]=r.useState({leftFront:500,rightFront:550,leftRear:425,rightRear:475}),[x,g]=r.useState(""),[m,h]=r.useState(!1),[b,u]=r.useState(!1),j=(()=>{const{leftFront:e,rightFront:s,leftRear:t,rightRear:a}=c,l=e+s+t+a,r=e+s,i=t+a,d=e+t,n=s+a,o=r/l*100,x=i/l*100,g=d/l*100,m=n/l*100,h=t+s,b=h/l*100,u=b-50,j=e+a,p=s+t;return{totalWeight:l.toFixed(0),frontWeight:r.toFixed(0),rearWeight:i.toFixed(0),leftSideWeight:d.toFixed(0),rightSideWeight:n.toFixed(0),frontPercent:o.toFixed(1),rearPercent:x.toFixed(1),leftPercent:g.toFixed(1),rightPercent:m.toFixed(1),crossWeight:h.toFixed(0),crossPercent:b.toFixed(2),wedge:u.toFixed(2),diagonal1:j.toFixed(0),diagonal2:p.toFixed(0)}})(),p=(e=>{const s=parseFloat(e.toString());return s>0?{text:"Tight",color:"text-red-600"}:s<0?{text:"Loose",color:"text-blue-600"}:{text:"Neutral",color:"text-green-600"}})(parseFloat(j.wedge));return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Corner Weights (lbs)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Left Front"}),e.jsx("input",{type:"number",value:c.leftFront,onChange:e=>o({...c,leftFront:parseFloat(e.target.value)||0}),className:"w-full p-3 rounded-lg",step:"1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Right Front"}),e.jsx("input",{type:"number",value:c.rightFront,onChange:e=>o({...c,rightFront:parseFloat(e.target.value)||0}),className:"w-full p-3 rounded-lg",step:"1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Left Rear"}),e.jsx("input",{type:"number",value:c.leftRear,onChange:e=>o({...c,leftRear:parseFloat(e.target.value)||0}),className:"w-full p-3 rounded-lg",step:"1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Right Rear"}),e.jsx("input",{type:"number",value:c.rightRear,onChange:e=>o({...c,rightRear:parseFloat(e.target.value)||0}),className:"w-full p-3 rounded-lg",step:"1"})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Weight Distribution"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Front:"}),e.jsxs("span",{className:"font-semibold",children:[j.frontWeight," lbs (",j.frontPercent,"%)"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Rear:"}),e.jsxs("span",{className:"font-semibold",children:[j.rearWeight," lbs (",j.rearPercent,"%)"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Left:"}),e.jsxs("span",{className:"font-semibold",children:[j.leftSideWeight," lbs (",j.leftPercent,"%)"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Right:"}),e.jsxs("span",{className:"font-semibold",children:[j.rightSideWeight," lbs (",j.rightPercent,"%)"]})]}),e.jsx("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex justify-between font-semibold",children:[e.jsx("span",{children:"Total Weight:"}),e.jsxs("span",{children:[j.totalWeight," lbs"]})]})})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Analysis"}),e.jsxs("div",{className:"bg-gradient-to-br from-brand-gold/10 to-brand-gold-dark/10 rounded-lg p-6",children:[e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Cross Weight"}),e.jsxs("div",{className:"text-4xl font-bold text-brand-gold",children:[j.crossPercent,"%"]}),e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:["LR + RF = ",j.crossWeight," lbs"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-500/10 to-blue-600/10 rounded-lg p-6",children:[e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Wedge"}),e.jsxs("div",{className:`text-4xl font-bold ${p.color}`,children:[j.wedge,"%"]}),e.jsx("p",{className:`text-sm mt-2 font-semibold ${p.color}`,children:p.text}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:parseFloat(j.wedge)>0?"Add left side weight to loosen":parseFloat(j.wedge)<0?"Add right side weight to tighten":"Perfectly balanced"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Diagonal (LF + RR)"}),e.jsxs("span",{className:"font-semibold",children:[j.diagonal1," lbs"]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Diagonal (RF + LR)"}),e.jsxs("span",{className:"font-semibold",children:[j.diagonal2," lbs"]})]})]}),n&&e.jsxs("button",{onClick:()=>h(!0),className:"w-full px-4 py-3 bg-brand-gold text-white rounded-lg hover:bg-brand-gold-dark inline-flex items-center justify-center gap-2",children:[e.jsx(s,{className:"w-5 h-5"}),"Save Weight Setup"]})]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[e.jsx(t,{className:"w-5 h-5 text-blue-600"}),"Weight Distribution Tips"]}),e.jsxs("ul",{className:"text-sm space-y-1 text-gray-600 dark:text-gray-400",children:[e.jsx("li",{children:"• Cross weight (wedge) of 50% = neutral handling"}),e.jsx("li",{children:"• Above 50% = tight (push), below 50% = loose (free)"}),e.jsx("li",{children:"• Typical range: 48-52% depending on track and driver preference"}),e.jsx("li",{children:"• Left side weight typically 52-56% for oval tracks"}),e.jsx("li",{children:"• Front weight percentage affects steering and braking"}),e.jsx("li",{children:"• Make small adjustments (0.5-1% wedge) and test"})]})]}),m&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Save Weight Setup"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Setup Name *"}),e.jsx("input",{type:"text",value:x,onChange:e=>g(e.target.value),className:"w-full p-3 rounded-lg",placeholder:"e.g., Eldora Balanced Setup",required:!0})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600",children:"Cancel"}),e.jsxs("button",{onClick:async()=>{if(!n||!x.trim())return;u(!0);const{error:e}=await d.from("saved_calculations").insert({user_id:n.id,calculation_type:"weight_distribution",name:x,inputs:c,results:j});e||(g(""),h(!1)),u(!1)},disabled:b||!x.trim(),className:"px-4 py-2 bg-brand-gold text-white rounded-lg hover:bg-brand-gold-dark disabled:opacity-50 flex items-center gap-2",children:[b?e.jsx(a,{className:"w-4 h-4 animate-spin"}):e.jsx(l,{className:"w-4 h-4"}),"Save"]})]})]})]})})})]})}export{n as default};
