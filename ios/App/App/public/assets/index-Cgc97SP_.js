const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/web-B-63Tor8.js","assets/ui-v2ReSvUE.js","assets/react-YWE4JMTy.js","assets/router-BNBI7_bc.js","assets/supabase-Du4GZSDg.js","assets/web-MZUdRFCT.js","assets/web-kQKHv3k6.js","assets/web-Bk6zt6FX.js","assets/web-B4xgYwr5.js","assets/WinglessSprints-DkVcp2_h.js","assets/CarNumberBox-Mgm75yBY.js","assets/index-CsRCr0z8.js","assets/NumberInput-CMTJlAXY.js","assets/useShocks-C1UvY-iB.js","assets/CrateSprints-B3ncKFon.js","assets/Sprint360-Ct0DIaci.js","assets/Sprint410-DoQWY-nY.js","assets/NonWinged410-BTFh-0gB.js","assets/DirtModified2-CJlpFZmQ.js","assets/UMPModified-DwsxRlgY.js","assets/IMCAModifieds-Dmnka3x0.js","assets/IMCASportMods-LSkJZ-J9.js","assets/BModified-Yry7r58r.js","assets/Micro600-Cx70H4q4.js","assets/MiniSprint-C6jkVMqe.js","assets/JrSprint-4OA-40RM.js","assets/QuarterMidget-BVF0fARs.js","assets/FocusMidget-C6bGUiFN.js","assets/OutlawKart-Cy98tG0z.js","assets/LO206Kart-D3u3MMay.js","assets/LateDirt-B8LTJeRt.js","assets/CrateLateMod-DwpSwBin.js","assets/SuperLateModel-DMqh6xV4.js","assets/StreetStock-DVti0wNH.js","assets/RestrictedBoxStock-zGzGuT9m.js","assets/BoxStock-DDiz9QX0.js","assets/Intermediate250-D5uRG90a.js","assets/OpenIntermediate-W722m8VC.js","assets/OpenClass-C1Ga1Tdx.js","assets/SportsmanClass-BzQrDaVu.js","assets/CagedCloneClass-CkEe1H5h.js","assets/Contact-DWAzgVC0.js","assets/Affiliates-CDg1k9jp.js","assets/PartnerWithUs-C8oFqf0_.js","assets/SwapMeet-BcfoM-Wl.js","assets/useListings-dWj5wCYh.js","assets/formatDistanceToNow-C1OK0Che.js","assets/format-DltpeZFQ.js","assets/useLocation-D3TBQNJQ.js","assets/Profile-BAsPAFff.js","assets/payment-router-B1dFo0bv.js","assets/index-BRghSwZE.js","assets/UserProfile-DjXAt7bv.js","assets/useFriends-Dq8pWR3D.js","assets/usePosts-DDWljK8j.js","assets/RacingCommunity-BT-duP6T.js","assets/GifPicker-BGwibceY.js","assets/PostView-D7ds0y_F.js","assets/maps-jNuXSUeC.js","assets/PostView-Dgihpmma.css","assets/TireTool-DN4rRRHw.js","assets/TireManagement-BFOSEnNZ.js","assets/Friends-D97vxDWe.js","assets/SavedSetups-BSpiNkPK.js","assets/Subscription-DAfA9ibB.js","assets/SubscriptionSuccess-Bnv6pRvE.js","assets/SubscriptionCancel-BeRQpd6L.js","assets/TermsOfService-DZ-91U3f.js","assets/Privacy-4crUgtae.js","assets/AdvertiserTerms-C4FdwTfo.js","assets/MotorWear-CKDA675t.js","assets/useMotorHealth-DUoccRwN.js","assets/MaintenanceChecklist-BYDnKQAT.js","assets/useMaintenanceChecklists-DpInN0cF.js","assets/Tools-B7N3Xoyr.js","assets/SocialMedia-BlG38kly.js","assets/QRCodeDownload-D_egV5ht.js"])))=>i.map(i=>d[i]);
var e,t=Object.defineProperty,a=(e,a,s)=>((e,a,s)=>a in e?t(e,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[a]=s)(e,"symbol"!=typeof a?a+"":a,s);import{j as s,C as r,X as n,L as i,S as o,U as l,a as c,A as d,R as m,I as u,b as h,c as x,d as p,M as g,N as f,e as b,m as y,f as j,g as v,h as w,D as N,i as k,G as _,Z as C,T as S,H as E,k as P,l as I,F as A,n as O,E as T,o as L,P as R,p as D,q as M,r as z,s as U,t as V,u as $,v as q,w as F,x as B,y as W}from"./ui-v2ReSvUE.js";import{a as H,r as X,b as G}from"./react-YWE4JMTy.js";import{u as Y,a as J,L as K,B as Q,N as Z,R as ee,b as te,c as ae}from"./router-BNBI7_bc.js";import{c as se}from"./supabase-Du4GZSDg.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var re=H;e=re.createRoot,re.hydrateRoot;const ne={},ie=function(e,t,a){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),a=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));s=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in ne)return;ne[e]=!0;const t=e.endsWith(".css"),s=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${s}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":"modulepreload",t||(r.as="script"),r.crossOrigin="",r.href=e,a&&r.setAttribute("nonce",a),document.head.appendChild(r),t?new Promise((t,a)=>{r.addEventListener("load",t),r.addEventListener("error",()=>a(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function r(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return s.then(t=>{for(const e of t||[])"rejected"===e.status&&r(e.reason);return e().catch(r)})},oe="https://pbfdzlkdlxbwijwwysaf.supabase.co",le="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBiZmR6bGtkbHhid2lqd3d5c2FmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDA0NjMzNjIsImV4cCI6MjA1NjAzOTM2Mn0.HNGtEg5Tc5iAILr33HDMzbqKaV3tvpgoVr4Dv85wjEk";try{new URL(oe)}catch(La){throw new Error(`Invalid VITE_SUPABASE_URL format: ${oe}`)}const ce=se(oe,le,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0},global:{fetch:async(e,t)=>{const a=new AbortController,s=setTimeout(()=>a.abort(),3e4);try{const r=new Headers(null==t?void 0:t.headers);r.has("apikey")||r.set("apikey",le),r.has("Authorization")||r.set("Authorization",`Bearer ${le}`);const n=await fetch(e,{...t,signal:a.signal,headers:r});return clearTimeout(s),n}catch(La){if(clearTimeout(s),La instanceof DOMException&&"AbortError"===La.name)throw La;if(La instanceof TypeError&&"Failed to fetch"===La.message){if(!navigator.onLine)throw La;if("string"==typeof e&&e.includes(oe))throw La;throw La}throw La}}},realtime:{params:{eventsPerSecond:10}}}),de=async()=>{try{const{data:e,error:t}=await ce.from("profiles").select("count").limit(1);return t?{success:!1,error:t.message}:{success:!0}}catch(La){return{success:!1,error:La instanceof Error?La.message:"Unknown connection error"}}},me=Object.freeze(Object.defineProperty({__proto__:null,supabase:ce,testSupabaseConnection:de},Symbol.toStringTag,{value:"Module"}));function ue(e={}){const{maxAttempts:t=3,initialDelay:a=1e3,maxDelay:s=1e4,backoffFactor:r=2}=e,[n,i]=X.useState(0),[o,l]=X.useState(!1);return{executeWithRetry:X.useCallback(async(e,n,o)=>{let c=null,d=a;for(let a=0;a<t;a++)try{l(a>0),i(a+1);const t=await e();return null==n||n(t),l(!1),t}catch(La){c=La instanceof Error?La:new Error("Unknown error occurred"),a<t-1&&(await new Promise(e=>setTimeout(e,d)),d=Math.min(d*r,s))}return l(!1),null==o||o(c||new Error("Failed after multiple attempts")),null},[t,a,s,r]),attempts:n,isRetrying:o,maxAttempts:t}}const he=X.createContext(void 0);function xe({children:e}){const[t,a]=X.useState(null),[r,n]=X.useState(!0),[i,o]=X.useState(null),[l,c]=X.useState(!1),{executeWithRetry:d}=ue(),m=async()=>{if(t)try{const{data:e,error:a}=await ce.from("profiles").select("has_premium").eq("id",t.id).maybeSingle();if(a)return void c(!1);c((null==e?void 0:e.has_premium)||!1)}catch(e){c(!1)}else c(!1)};return X.useEffect(()=>{(async()=>{var e,t;try{o(null);const s=await d(async()=>await de());if(!s.success)return o(s.error||"Failed to connect to Supabase"),void n(!1);const{data:r,error:i}=await d(async()=>{try{return await ce.auth.getSession()}catch(e){if(e instanceof DOMException&&"AbortError"===e.name)throw new Error("Request timed out. Please try again.");if(e instanceof TypeError&&"Failed to fetch"===e.message)throw new Error("Network connection failed. Please check your internet connection.");throw e}});i?"Invalid Refresh Token: Refresh Token Not Found"===i.message?(await ce.auth.signOut(),a(null)):(o(`Authentication error: ${i.message}`),a(null)):(a((null==(e=null==r?void 0:r.session)?void 0:e.user)??null),(null==(t=null==r?void 0:r.session)?void 0:t.user)&&await m())}catch(s){const e=s instanceof Error?s.message:"Unknown initialization error";o(e),a(null)}finally{n(!1)}})();const{data:{subscription:e}}=ce.auth.onAuthStateChange(async(e,t)=>{a((null==t?void 0:t.user)??null),"SIGNED_IN"!==e&&"TOKEN_REFRESHED"!==e||o(null),(null==t?void 0:t.user)?await m():c(!1),n(!1)});return()=>{e.unsubscribe()}},[]),s.jsx(he.Provider,{value:{user:t,loading:r,connectionError:i,hasPremium:l,refreshPremiumStatus:m,signIn:async(e,t)=>{try{o(null);const a=await d(async()=>await de());if(!a.success)throw new Error(a.error||"Cannot connect to authentication service");const{data:s,error:r}=await d(async()=>{try{return await ce.auth.signInWithPassword({email:e,password:t})}catch(a){if(a instanceof DOMException&&"AbortError"===a.name)throw new Error("Sign in request timed out. Please try again.");if(a instanceof TypeError&&"Failed to fetch"===a.message)throw new Error("Network connection failed. Please check your internet connection and try again.");throw a}});if(r)throw r;return{error:null,success:!0}}catch(La){const t=La instanceof Error?La.message:"Unknown sign in error";return o(t),{error:La,success:!1}}},signUp:async(e,t)=>{try{o(null);const a=await d(async()=>await de());if(!a.success)throw new Error(a.error||"Cannot connect to authentication service");const{data:s,error:r}=await d(async()=>{try{return await ce.auth.signUp({email:e,password:t,options:{emailRedirectTo:window.location.origin}})}catch(a){if(a instanceof DOMException&&"AbortError"===a.name)throw new Error("Sign up request timed out. Please try again.");if(a instanceof TypeError&&"Failed to fetch"===a.message)throw new Error("Network connection failed. Please check your internet connection and try again.");throw a}});if(r)throw r;return{error:null,success:!0}}catch(La){const t=La instanceof Error?La.message:"Unknown sign up error";return o(t),{error:La,success:!1}}},signOut:async()=>{try{const{error:e}=await ce.auth.signOut();a(null),o(null)}catch(e){a(null)}},retryConnection:async()=>{o(null);const e=await d(async()=>await de());e.success||o(e.error||"Connection failed")}},children:e})}function pe(){const e=X.useContext(he);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e}function ge({recipientId:e,onClose:t,isMinimized:a=!1,onMinimize:l}){var c,d,m,u;const{user:h}=pe(),[x,p]=X.useState([]),[g,f]=X.useState(""),[b,y]=X.useState(!0),[j,v]=X.useState(!1),[w,N]=X.useState(null),[k,_]=X.useState("default"),C=X.useRef(null),S=X.useRef(null);X.useEffect(()=>{I(),P(),A(),E()},[e]),X.useEffect(()=>{O()},[x]);const E=async()=>{if("Notification"in window){const e=await Notification.requestPermission();_(e)}},P=async()=>{try{const{data:t}=await ce.from("profiles").select("*").eq("id",e).single();t&&N(t)}catch(t){}},I=async()=>{if(h)try{const{data:t}=await ce.from("messages").select("\n          *,\n          sender:profiles!messages_sender_id_fkey (\n            username,\n            avatar_url\n          )\n        ").or(`sender_id.eq.${h.id},receiver_id.eq.${h.id}`).or(`sender_id.eq.${e},receiver_id.eq.${e}`).order("created_at",{ascending:!0});t&&p(t)}catch(t){}finally{y(!1)}},A=()=>{if(!h)return;const t=ce.channel("messages").on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`sender_id=eq.${e},receiver_id=eq.${h.id}`},e=>{const t=e.new;p(e=>[...e,t]),(e=>{if(!("Notification"in window)||"granted"!==k||"visible"===document.visibilityState)return;const t=new Notification("New Message from "+((null==w?void 0:w.username)||"Someone"),{body:e.content,icon:"/android-icon-192-192.png",badge:"/android-icon-96-96.png",tag:"chat-message",vibrate:[200,100,200],requireInteraction:!1});t.onclick=()=>{window.focus(),t.close(),l&&a&&l()},setTimeout(()=>t.close(),5e3)})(t)}).subscribe();return()=>{t.unsubscribe()}},O=()=>{var e;null==(e=C.current)||e.scrollIntoView({behavior:"smooth"})};return a?s.jsx("div",{className:"fixed bottom-4 right-4 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",onClick:l,children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-brand-gold/10 flex items-center justify-center overflow-hidden",children:(null==w?void 0:w.avatar_url)?s.jsx("img",{src:w.avatar_url,alt:w.username,className:"w-full h-full object-cover"}):s.jsx("span",{className:"text-lg font-semibold text-brand-gold",children:(null==(d=null==(c=null==w?void 0:w.username)?void 0:c[0])?void 0:d.toUpperCase())||"?"})}),s.jsx("span",{className:"font-medium",children:(null==w?void 0:w.username)||"Chat"})]})}):s.jsxs("div",{className:"fixed bottom-4 right-4 w-96 bg-white dark:bg-gray-800 rounded-lg shadow-xl flex flex-col max-h-[600px]",children:[s.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:l,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full",children:s.jsx(r,{className:"w-5 h-5"})}),s.jsx("div",{className:"w-10 h-10 rounded-full bg-brand-gold/10 flex items-center justify-center overflow-hidden",children:(null==w?void 0:w.avatar_url)?s.jsx("img",{src:w.avatar_url,alt:w.username,className:"w-full h-full object-cover"}):s.jsx("span",{className:"text-lg font-semibold text-brand-gold",children:(null==(u=null==(m=null==w?void 0:w.username)?void 0:m[0])?void 0:u.toUpperCase())||"?"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold",children:(null==w?void 0:w.username)||"Loading..."}),s.jsx("p",{className:"text-xs text-gray-500",children:(null==w?void 0:w.full_name)||(null==w?void 0:w.username)})]})]}),s.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full",children:s.jsx(n,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[b?s.jsx("div",{className:"flex justify-center py-4",children:s.jsx(i,{className:"w-6 h-6 animate-spin text-brand-gold"})}):0===x.length?s.jsx("div",{className:"text-center text-gray-500 py-4",children:"No messages yet. Start the conversation!"}):x.map(e=>{return s.jsx("div",{className:"flex "+(e.sender_id===(null==h?void 0:h.id)?"justify-end":"justify-start"),children:s.jsxs("div",{className:`max-w-[75%] ${e.sender_id===(null==h?void 0:h.id)?"bg-brand-gold text-white":"bg-gray-100 dark:bg-gray-700"} rounded-lg px-4 py-2`,children:[s.jsx("p",{children:e.content}),s.jsx("p",{className:"text-xs opacity-75 mt-1",children:(t=e.created_at,new Date(t).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}))})]})},e.id);var t}),s.jsx("div",{ref:C})]}),s.jsx("form",{onSubmit:async t=>{var a;if(t&&t.preventDefault(),h&&g.trim()){v(!0);try{const{error:t}=await ce.from("messages").insert({sender_id:h.id,receiver_id:e,content:g.trim()});if(t)throw t;f(""),null==(a=S.current)||a.focus()}catch(s){}finally{v(!1)}}},className:"p-4 border-t border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{ref:S,type:"text",value:g,onChange:e=>f(e.target.value),placeholder:"Type a message...",className:"flex-1 p-2 rounded-lg bg-gray-100 dark:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-brand-gold"}),s.jsx("button",{type:"submit",disabled:!g.trim()||j,className:"p-2 bg-brand-gold text-white rounded-lg hover:bg-brand-gold-dark transition-colors disabled:opacity-50",children:j?s.jsx(i,{className:"w-5 h-5 animate-spin"}):s.jsx(o,{className:"w-5 h-5"})})]})})]})}const fe=X.createContext(void 0);function be({children:e}){const[t,a]=X.useState([]),r=X.useCallback(e=>{a(t=>t.find(t=>t.recipientId===e)?t.map(t=>t.recipientId===e?{...t,isMinimized:!1}:t):[...t,{recipientId:e,isMinimized:!1}])},[]),n=X.useCallback(e=>{a(t=>t.filter(t=>t.recipientId!==e))},[]),i=X.useCallback(e=>{a(t=>t.map(t=>t.recipientId===e?{...t,isMinimized:!0}:t))},[]),o=X.useCallback(e=>{a(t=>t.map(t=>t.recipientId===e?{...t,isMinimized:!1}:t))},[]);return s.jsxs(fe.Provider,{value:{activeChats:t,startChat:r,closeChat:n,minimizeChat:i,maximizeChat:o},children:[e,t.map(e=>s.jsx(ge,{recipientId:e.recipientId,isMinimized:e.isMinimized,onClose:()=>n(e.recipientId),onMinimize:()=>e.isMinimized?o(e.recipientId):i(e.recipientId)},e.recipientId))]})}function ye(){const e=X.useContext(fe);if(void 0===e)throw new Error("useChat must be used within a ChatProvider");return e}var je,ve="https://js.stripe.com/v3",we=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,Ne=function(e){var t=document.createElement("script");t.src="".concat(ve).concat("");var a=document.head||document.body;if(!a)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return a.appendChild(t),t},ke=null,_e=null,Ce=null,Se=function(){return je||(je=(e=null,null!==ke?ke:(ke=new Promise(function(t,a){if("undefined"!=typeof window&&"undefined"!=typeof document)if(window.Stripe)t(window.Stripe);else try{var s=function(){for(var e=document.querySelectorAll('script[src^="'.concat(ve,'"]')),t=0;t<e.length;t++){var a=e[t];if(we.test(a.src))return a}return null}();if(s&&e);else if(s){if(s&&null!==Ce&&null!==_e){var r;s.removeEventListener("load",Ce),s.removeEventListener("error",_e),null===(r=s.parentNode)||void 0===r||r.removeChild(s),s=Ne()}}else s=Ne();Ce=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}}(t,a),_e=function(e){return function(){e(new Error("Failed to load Stripe.js"))}}(a),s.addEventListener("load",Ce),s.addEventListener("error",_e)}catch(La){return void a(La)}else t(null)})).catch(function(e){return ke=null,Promise.reject(e)})).catch(function(e){return je=null,Promise.reject(e)}));var e};Promise.resolve().then(function(){return Se()}).catch(function(e){}),function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var s=Date.now();Se().then(function(e){return function(e,t,a){if(null===e)return null;var s=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"3.4.1",startTime:t})}(s,a),s}(e,t,s)})}("pk_live_51ROucJANikXpQi11dY1AGALASRix6sA4OXhfQgH626swoKEHVJ7dxuYNeePbjDEAPIBmVvHzJMXDnrKfdYI2Jzg001pM5WBrc");const Ee=X.createContext(void 0),Pe=[{id:"basic",name:"Basic Setup Access",description:"Save setups to the database and your devices",features:["Unlimited setup saves","Access on all your devices","Basic setup templates","Community access"],priceMonthly:9.99,priceYearly:99.99,priceQuarterly:24.99,stripePriceIdMonthly:"price_1RRU4fANikXpQi11v5yoYilZ",stripePriceIdYearly:"price_1RRU4fANikXpQi11GZmyUEwK",stripePriceIdQuarterly:"price_1RRU4fANikXpQi11xJ5EG1vx"},{id:"premium",name:"Encrypted Setup Access",description:"Enhanced security with encrypted setups",features:["All Basic features","End-to-end encryption","Advanced setup templates","Priority support","Early access to new features"],priceMonthly:12.99,priceYearly:134.99,priceQuarterly:34.99,stripePriceIdMonthly:"price_1RRU7iANikXpQi11N4km6XFf",stripePriceIdYearly:"price_1RRUhCANikXpQi11Ya6mzjHl",stripePriceIdQuarterly:"price_1RRUhCANikXpQi11RVy5KKbK"}];async function Ie(e,t=3,a=1e3){try{return await e()}catch(La){if(0===t)throw La;return await new Promise(e=>setTimeout(e,a)),Ie(e,t-1,2*a)}}function Ae({children:e}){const{user:t}=pe(),[a,r]=X.useState("loading"),[n,i]=X.useState(null),[o,l]=X.useState(!1),[c,d]=X.useState(null);X.useEffect(()=>{t?m():(r("none"),i(null))},[t]);const m=async()=>{if(t){l(!0),d(null);try{const{data:a,error:s}=await Ie(()=>ce.from("profiles").select("has_premium").eq("id",t.id).single());if(s)throw s;if(null==a?void 0:a.has_premium)return r("premium"),i(null),void l(!1);const{data:n,error:o}=await Ie(()=>ce.rpc("get_active_subscription",{user_id_param:t.id}));if(n&&n.length>0){const e=n[0];r("yearly"===e.tier?"premium":e.tier||"basic");const t=e.expires_date||e.current_period_end;i(t?new Date(t):null)}else try{const{data:e,error:a}=await Ie(()=>ce.functions.invoke("check-subscription",{body:{userId:t.id}}));if(a)throw a;if(null==e?void 0:e.subscription){const{status:t,tier:a,current_period_end:s}=e.subscription;"active"===t||"trialing"===t?(r(a||"basic"),i(s?new Date(1e3*s):null)):(r("none"),i(null))}else r("none"),i(null)}catch(e){r("none"),i(null)}}catch(e){r("none")}finally{l(!1)}}};return s.jsx(Ee.Provider,{value:{createCheckoutSession:async e=>{if(!t)return null;l(!0),d(null);try{const{data:a,error:s}=await Ie(()=>ce.functions.invoke("create-checkout-session",{body:{priceId:e,userId:t.id,customerEmail:t.email}}));if(s)throw s;return a.url}catch(a){return null}finally{l(!1)}},createPortalSession:async()=>{if(!t)return null;l(!0),d(null);try{const{data:e,error:a}=await Ie(()=>ce.functions.invoke("create-portal-session",{body:{userId:t.id}}));if(a)throw a;return e.url}catch(e){return null}finally{l(!1)}},subscriptionStatus:a,subscriptionPeriodEnd:n,isLoading:o,error:c,tiers:Pe},children:e})}function Oe(){const e=X.useContext(Ee);if(void 0===e)throw new Error("useStripe must be used within a StripeProvider");return e}const Te=X.createContext(void 0);function Le({children:e}){const[t,a]=X.useState(!0);return s.jsx(Te.Provider,{value:{showNav:t,setShowNav:a},children:e})}function Re({className:e}){const[t,a]=X.useState(!1),[r,o]=X.useState(!1),[p,g]=X.useState(!0),[f,b]=X.useState(""),[y,j]=X.useState(""),[v,w]=X.useState(!1),[N,k]=X.useState(null),[_,C]=X.useState(""),[S,E]=X.useState(""),[P,I]=X.useState(""),[A,O]=X.useState(null),[T,L]=X.useState(!1),R=Y();J();const D=X.useRef(null),M=X.useRef(null),{signIn:z,signUp:U,user:V,signOut:$,connectionError:q,retryConnection:F}=pe(),{executeWithRetry:B}=ue(),W=["Silva57","Daniels5","Larson57","Colby5","Andy92","Brad49","Kyle54","Kaleb3","Slingin18","Claygrip33","Highline22","Dirtdog77","Slidejob04","Cushion55","Roostertail81","Gasit49","Sprintcar92","Latemodel68","Bullring11","Checkered99","Fullthrottle07","Redclay36","Wheelie29","Chassis14","Featurewin63","Trackside70","Pitside88","Glorylaps44","Pitboxmike","Chaz44","Chaz33","Chaz22","Chaz55","Chaz11"],[H,G]=X.useState(null),[K,Q]=X.useState(null),[Z,ee]=X.useState(!1);X.useEffect(()=>{V?(te(),ae()):(G(null),Q(null))},[V]);const te=async()=>{if(null==V?void 0:V.id)try{Q(null);const e=await B(async()=>{var e,t;try{const{error:a}=await ce.from("profiles").select("count").single();if(a)throw a;const{data:s,error:r}=await ce.from("profiles").select("full_name, avatar_url").eq("id",V.id).single();if(r){if("PGRST116"===r.code){const{error:a}=await ce.from("profiles").insert([{id:V.id,username:V.email,full_name:(null==(e=V.user_metadata)?void 0:e.full_name)||null,avatar_url:(null==(t=V.user_metadata)?void 0:t.avatar_url)||null}]);if(a)throw a;const{data:s,error:r}=await ce.from("profiles").select("full_name, avatar_url").eq("id",V.id).single();if(r)throw r;return s}throw r}return s}catch(a){if(a instanceof DOMException&&"AbortError"===a.name)throw new Error("Request timed out. Please try again.");if(a instanceof TypeError&&"Failed to fetch"===a.message)throw new Error("Network connection failed. Please check your internet connection.");throw a}});e&&G(e)}catch(e){Q("Unable to load profile. Please check your connection.")}},ae=async()=>{if(null==V?void 0:V.id)try{const{data:e,error:t}=await ce.from("terms_acceptance").select("*").eq("user_id",V.id).single();t&&t.code,ee(!!e)}catch(e){}};X.useEffect(()=>{const e=e=>{var t;!D.current||D.current.contains(e.target)||(null==(t=M.current)?void 0:t.contains(e.target))||o(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),X.useEffect(()=>{const e=e=>{"Escape"===e.key&&(o(!1),a(!1))};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[]),X.useEffect(()=>(r&&window.innerWidth<768?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[r]),X.useEffect(()=>(document.body.style.overflow=t?"hidden":"unset",()=>{document.body.style.overflow="unset"}),[t]);const se=async e=>{try{const{data:t,error:a}=await B(async()=>await ce.from("profiles").select("id").eq("promo_code",e).limit(1));if(a)throw a;const s=t&&t.length>0;return L(s),s&&O(!1),s}catch(t){return!1}},re=()=>{te()},ne=e=>{if(!e)return!1;const t=e.toLowerCase(),a=t.charAt(0).toUpperCase()+t.slice(1);return W.includes(a)},ie=async()=>{await F()};return V?s.jsxs("div",{className:"relative",ref:D,children:[s.jsxs("button",{ref:M,onClick:()=>o(!r),className:`flex items-center gap-2 relative ${e}`,title:(null==H?void 0:H.full_name)||"Set up profile",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute -top-1 -right-1 w-2.5 h-2.5 bg-green-500 rounded-full shadow-lg shadow-green-500/50"}),(null==H?void 0:H.avatar_url)?s.jsx("img",{src:H.avatar_url,alt:"Profile",className:"w-8 h-8 rounded-full object-cover"}):s.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-gold/10 flex items-center justify-center",children:s.jsx(l,{className:"w-5 h-5 text-brand-gold"})})]}),s.jsx("span",{className:"hidden md:inline text-sm font-medium truncate max-w-[150px]",children:K?s.jsx("button",{onClick:re,className:"text-red-500 hover:text-red-600",children:"Retry loading profile"}):(null==H?void 0:H.full_name)||"Set up profile"}),s.jsx(c,{className:"w-4 h-4 transition-transform "+(r?"rotate-180":"")})]}),r&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[1099] md:hidden",onClick:()=>o(!1)}),s.jsxs("div",{className:"fixed md:absolute left-0 right-0 md:left-auto md:right-0 md:w-64 top-[4rem] md:top-[calc(100%+0.5rem)] bg-white dark:bg-gray-800 border-t md:border border-gray-200 dark:border-gray-700 overflow-hidden z-[1100] safe-area-top md:safe-area-top-0 animate-slideIn md:animate-none rounded-none md:rounded-xl shadow-xl h-auto max-h-[calc(100vh-4rem)] md:max-h-[calc(100vh-5rem)] overflow-y-auto",children:[s.jsxs("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[q&&s.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border-b border-red-200 dark:border-red-800",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(d,{className:"w-4 h-4 text-red-500 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("p",{className:"text-sm text-red-700 dark:text-red-300 mb-2",children:["Connection Error: ",q]}),s.jsxs("button",{onClick:ie,className:"flex items-center gap-1 text-xs text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300",children:[s.jsx(m,{className:"w-3 h-3"}),"Retry Connection"]})]})]})}),s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"flex-1 min-w-0",children:K?s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-red-500 text-sm",children:K}),s.jsx("button",{onClick:re,className:"text-brand-gold hover:text-brand-gold-dark text-sm",children:"Retry loading profile"})]}):s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-xl font-semibold truncate",children:(null==H?void 0:H.full_name)||"Set up profile"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:V.email})]})})}),!Z&&s.jsxs("button",{onClick:()=>{o(!1),R("/terms-of-service")},className:"w-full px-6 py-4 text-left text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",children:[s.jsx(u,{className:"w-5 h-5"}),"Accept Terms of Service"]}),s.jsx("button",{onClick:()=>{o(!1),R("/profile")},className:"w-full px-6 py-4 text-left hover:bg-gray-100 dark:hover:bg-gray-700",children:"Profile Settings"}),s.jsx("button",{onClick:async()=>{await $(),o(!1),R("/")},className:"w-full px-6 py-4 text-left text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700",children:"Sign Out"})]}),s.jsx("div",{className:"h-[env(safe-area-inset-bottom)] md:hidden"})]})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:()=>R("/signin"),className:`flex items-center gap-2 ${e}`,title:"Sign In",children:[s.jsx(h,{className:"w-5 h-5"}),s.jsx("span",{className:"hidden md:inline",children:"Sign In"})]}),t&&s.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm overflow-y-auto",children:s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-md my-auto max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:s.jsxs("div",{className:"relative p-6",children:[s.jsx("button",{onClick:()=>a(!1),className:"absolute top-4 right-4 p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full","aria-label":"Close",children:s.jsx(n,{className:"w-6 h-6"})}),s.jsx("h2",{className:"text-2xl font-bold mb-6",children:p?"Sign In to PitBox":"Create PitBox Account"}),q&&s.jsx("div",{className:"mb-4 p-3 rounded-lg bg-red-100 dark:bg-red-900/30 border border-red-200 dark:border-red-800",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(d,{className:"w-4 h-4 text-red-500 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("p",{className:"text-sm text-red-700 dark:text-red-300 mb-2",children:["Connection Error: ",q]}),s.jsxs("button",{onClick:ie,className:"flex items-center gap-1 text-xs text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300",children:[s.jsx(m,{className:"w-3 h-3"}),"Retry Connection"]})]})]})}),s.jsxs("form",{onSubmit:async e=>{e.preventDefault(),w(!0),k(null);try{if(p){const{error:e}=await z(f,y);e?e.message.includes("Invalid login credentials")?k("Invalid email or password"):k(e.message):(a(!1),b(""),j(""),R("/home"))}else{if(!_.trim())return k("Username is required"),void w(!1);if(P){const e=P.toLowerCase(),t=e.charAt(0).toUpperCase()+e.slice(1);if(!ne(t))return k("Invalid promo code"),void w(!1);if(await se(t))return k("This promo code has already been used"),void w(!1)}const{error:e,success:t}=await U(f,y);if(e)e.message.includes("user_already_exists")?(k("An account with this email already exists. Please sign in instead."),g(!0)):k(e.message);else if(t){const{data:{user:e}}=await ce.auth.getUser();if(e){let t=null;if(P&&ne(P)){const e=P.toLowerCase();t=e.charAt(0).toUpperCase()+e.slice(1)}const{error:a}=await ce.from("profiles").upsert({id:e.id,username:_.trim(),full_name:S.trim()||null,promo_code:t,has_premium:!!t,updated_at:(new Date).toISOString()})}a(!1),b(""),j(""),C(""),E(""),I(""),R("/terms-of-service")}}}catch(t){k("An unexpected error occurred. Please try again.")}finally{w(!1)}},className:"space-y-4",children:[N&&s.jsx("div",{className:"p-3 rounded-lg bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 text-sm",children:N}),!p&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"username",className:"block text-sm font-medium mb-1",children:["Username ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",id:"username",value:_,onChange:e=>C(e.target.value),className:"w-full p-3 rounded-lg bg-white/50 dark:bg-gray-800/50 border border-gray-300 dark:border-gray-600",placeholder:"Choose a username",required:!0,disabled:v})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium mb-1",children:"Full Name"}),s.jsx("input",{type:"text",id:"fullName",value:S,onChange:e=>E(e.target.value),className:"w-full p-3 rounded-lg bg-white/50 dark:bg-gray-800/50 border border-gray-300 dark:border-gray-600",placeholder:"Your full name",disabled:v})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"promoCode",className:"block text-sm font-medium mb-1",children:["Promo Code",s.jsx("span",{className:"ml-1 text-xs text-gray-500",children:"(Optional)"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",id:"promoCode",value:P,onChange:e=>{const t=e.target.value;I(t),(e=>{if(!e)return O(null),L(!1),!1;const t=e.toLowerCase(),a=t.charAt(0).toUpperCase()+t.slice(1),s=W.includes(a);O(s),s&&se(a)})(t)},className:"w-full p-3 rounded-lg bg-white/50 dark:bg-gray-800/50 border "+(!0!==A||T?!1===A||T?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-gray-600":"border-green-500 dark:border-green-500"),placeholder:"Enter promo code if you have one",disabled:v}),!0===A&&!T&&s.jsx(x,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-green-500"})]}),!0===A&&!T&&s.jsx("p",{className:"mt-1 text-xs text-green-600 dark:text-green-400",children:"Valid promo code! You'll have premium access."}),!1===A&&P&&!T&&s.jsx("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:"Invalid promo code."}),T&&s.jsx("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:"This promo code has already been used."})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium mb-1",children:"Email"}),s.jsx("input",{type:"email",id:"email",value:f,onChange:e=>b(e.target.value),className:"w-full p-3 rounded-lg bg-white/50 dark:bg-gray-800/50 border border-gray-300 dark:border-gray-600",placeholder:"your@email.com",required:!0,autoComplete:"email",disabled:v})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium mb-1",children:"Password"}),s.jsx("input",{type:"password",id:"password",value:y,onChange:e=>j(e.target.value),className:"w-full p-3 rounded-lg bg-white/50 dark:bg-gray-800/50 border border-gray-300 dark:border-gray-600",placeholder:"••••••••",required:!0,autoComplete:p?"current-password":"new-password",disabled:v,minLength:6}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:p?"":"Password must be at least 6 characters"})]}),s.jsx("button",{type:"submit",disabled:v||P&&(!1===A||T)||!!q,className:"w-full bg-brand-gold text-white py-3 px-4 rounded-lg hover:bg-brand-gold-dark transition text-lg flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:v?s.jsxs(s.Fragment,{children:[s.jsx(i,{className:"w-5 h-5 animate-spin"}),p?"Signing In...":"Creating Account..."]}):s.jsxs(s.Fragment,{children:[s.jsx(h,{className:"w-5 h-5"}),p?"Sign In":"Create Account"]})}),s.jsxs("p",{className:"text-sm text-center text-gray-600 dark:text-gray-400",children:[p?"Don't have an account?":"Already have an account?"," ",s.jsx("button",{type:"button",className:"text-brand-gold hover:text-brand-gold-dark dark:text-brand-gold-light dark:hover:text-brand-gold",onClick:()=>{g(!p),k(null),O(null),I(""),L(!1)},children:p?"Create one":"Sign in"})]})]})]})})})]})}const De=(e=>e.CapacitorPlatforms=(e=>{const t=new Map;t.set("web",{name:"web"});const a=e.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:t};return a.addPlatform=(e,t)=>{a.platforms.set(e,t)},a.setPlatform=e=>{a.platforms.has(e)&&(a.currentPlatform=a.platforms.get(e))},a})(e))("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{});var Me,ze;De.addPlatform,De.setPlatform,(ze=Me||(Me={})).Unimplemented="UNIMPLEMENTED",ze.Unavailable="UNAVAILABLE";class Ue extends Error{constructor(e,t,a){super(e),this.message=e,this.code=t,this.data=a}}const Ve=(e=>e.Capacitor=(e=>{var t,a,s,r,n;const i=e.CapacitorCustomPlatform||null,o=e.Capacitor||{},l=o.Plugins=o.Plugins||{},c=e.CapacitorPlatforms,d=(null===(t=null==c?void 0:c.currentPlatform)||void 0===t?void 0:t.getPlatform)||(()=>null!==i?i.name:(e=>{var t,a;return(null==e?void 0:e.androidBridge)?"android":(null===(a=null===(t=null==e?void 0:e.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===a?void 0:a.bridge)?"ios":"web"})(e)),m=(null===(a=null==c?void 0:c.currentPlatform)||void 0===a?void 0:a.isNativePlatform)||(()=>"web"!==d()),u=(null===(s=null==c?void 0:c.currentPlatform)||void 0===s?void 0:s.isPluginAvailable)||(e=>{const t=x.get(e);return!!(null==t?void 0:t.platforms.has(d()))||!!h(e)}),h=(null===(r=null==c?void 0:c.currentPlatform)||void 0===r?void 0:r.getPluginHeader)||(e=>{var t;return null===(t=o.PluginHeaders)||void 0===t?void 0:t.find(t=>t.name===e)}),x=new Map,p=(null===(n=null==c?void 0:c.currentPlatform)||void 0===n?void 0:n.registerPlugin)||((e,t={})=>{const a=x.get(e);if(a)return a.proxy;const s=d(),r=h(e);let n;const c=a=>{let l;const c=(...c)=>{const d=(async()=>(!n&&s in t?n=n="function"==typeof t[s]?await t[s]():t[s]:null!==i&&!n&&"web"in t&&(n=n="function"==typeof t.web?await t.web():t.web),n))().then(t=>{const n=((t,a)=>{var n,i;if(!r){if(t)return null===(i=t[a])||void 0===i?void 0:i.bind(t);throw new Ue(`"${e}" plugin is not implemented on ${s}`,Me.Unimplemented)}{const s=null==r?void 0:r.methods.find(e=>a===e.name);if(s)return"promise"===s.rtype?t=>o.nativePromise(e,a.toString(),t):(t,s)=>o.nativeCallback(e,a.toString(),t,s);if(t)return null===(n=t[a])||void 0===n?void 0:n.bind(t)}})(t,a);if(n){const e=n(...c);return l=null==e?void 0:e.remove,e}throw new Ue(`"${e}.${a}()" is not implemented on ${s}`,Me.Unimplemented)});return"addListener"===a&&(d.remove=async()=>l()),d};return c.toString=()=>`${a.toString()}() { [capacitor code] }`,Object.defineProperty(c,"name",{value:a,writable:!1,configurable:!1}),c},m=c("addListener"),u=c("removeListener"),p=(e,t)=>{const a=m({eventName:e},t),s=async()=>{const s=await a;u({eventName:e,callbackId:s},t)},r=new Promise(e=>a.then(()=>e({remove:s})));return r.remove=async()=>{await s()},r},g=new Proxy({},{get(e,t){switch(t){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return r?p:m;case"removeListener":return u;default:return c(t)}}});return l[e]=g,x.set(e,{name:e,proxy:g,platforms:new Set([...Object.keys(t),...r?[s]:[]])}),g});return o.convertFileSrc||(o.convertFileSrc=e=>e),o.getPlatform=d,o.handleError=t=>e.console.error(t),o.isNativePlatform=m,o.isPluginAvailable=u,o.pluginMethodNoop=(e,t,a)=>Promise.reject(`${a} does not have an implementation of "${t}".`),o.registerPlugin=p,o.Exception=Ue,o.DEBUG=!!o.DEBUG,o.isLoggingEnabled=!!o.isLoggingEnabled,o.platform=o.getPlatform(),o.isNative=o.isNativePlatform(),o})(e))("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}),$e=Ve.registerPlugin;Ve.Plugins;class qe{constructor(e){this.listeners={},this.windowListeners={},e&&(this.config=e)}addListener(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t);const a=this.windowListeners[e];a&&!a.registered&&this.addWindowListener(a);const s=async()=>this.removeListener(e,t),r=Promise.resolve({remove:s});return Object.defineProperty(r,"remove",{value:async()=>{await s()}}),r}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t){const a=this.listeners[e];a&&a.forEach(e=>e(t))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:e=>{this.notifyListeners(t,e)}}}unimplemented(e="not implemented"){return new Ve.Exception(e,Me.Unimplemented)}unavailable(e="not available"){return new Ve.Exception(e,Me.Unavailable)}async removeListener(e,t){const a=this.listeners[e];if(!a)return;const s=a.indexOf(t);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}}const Fe=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Be=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class We extends qe{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(e=>{if(e.length<=0)return;let[a,s]=e.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");a=Be(a).trim(),s=Be(s).trim(),t[a]=s}),t}async setCookie(e){try{const t=Fe(e.key),a=Fe(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,r=(e.path||"/").replace("path=",""),n=null!=e.url&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${a||""}${s}; path=${r}; ${n};`}catch(La){return Promise.reject(La)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(La){return Promise.reject(La)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(La){return Promise.reject(La)}}async clearAllCookies(){try{await this.clearCookies()}catch(La){return Promise.reject(La)}}}$e("CapacitorCookies",{web:()=>new We});const He=(e,t={})=>{const a=Object.assign({method:e.method||"GET",headers:e.headers},t),s=((e={})=>{const t=Object.keys(e);return Object.keys(e).map(e=>e.toLocaleLowerCase()).reduce((a,s,r)=>(a[s]=e[t[r]],a),{})})(e.headers)["content-type"]||"";if("string"==typeof e.data)a.body=e.data;else if(s.includes("application/x-www-form-urlencoded")){const t=new URLSearchParams;for(const[a,s]of Object.entries(e.data||{}))t.set(a,s);a.body=t.toString()}else if(s.includes("multipart/form-data")||e.data instanceof FormData){const t=new FormData;if(e.data instanceof FormData)e.data.forEach((e,a)=>{t.append(a,e)});else for(const a of Object.keys(e.data))t.append(a,e.data[a]);a.body=t;const s=new Headers(a.headers);s.delete("content-type"),a.headers=s}else(s.includes("application/json")||"object"==typeof e.data)&&(a.body=JSON.stringify(e.data));return a};class Xe extends qe{async request(e){const t=He(e,e.webFetchExtra),a=((e,t=!0)=>e?Object.entries(e).reduce((e,a)=>{const[s,r]=a;let n,i;return Array.isArray(r)?(i="",r.forEach(e=>{n=t?encodeURIComponent(e):e,i+=`${s}=${n}&`}),i.slice(0,-1)):(n=t?encodeURIComponent(r):r,i=`${s}=${n}`),`${e}&${i}`},"").substr(1):null)(e.params,e.shouldEncodeUrlParams),s=a?`${e.url}?${a}`:e.url,r=await fetch(s,t),n=r.headers.get("content-type")||"";let i,o,{responseType:l="text"}=r.ok?e:{};switch(n.includes("application/json")&&(l="json"),l){case"arraybuffer":case"blob":o=await r.blob(),i=await(async e=>new Promise((t,a)=>{const s=new FileReader;s.onload=()=>{const e=s.result;t(e.indexOf(",")>=0?e.split(",")[1]:e)},s.onerror=e=>a(e),s.readAsDataURL(e)}))(o);break;case"json":i=await r.json();break;default:i=await r.text()}const c={};return r.headers.forEach((e,t)=>{c[t]=e}),{data:i,headers:c,status:r.status,url:r.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}$e("CapacitorHttp",{web:()=>new Xe});const Ge=$e("App",{web:()=>ie(()=>import("./web-B-63Tor8.js"),__vite__mapDeps([0,1,2,3,4])).then(e=>new e.AppWeb)});function Ye(){const{needRefresh:[e],updateServiceWorker:t}=function(e={}){const{immediate:t=!0,onNeedRefresh:a,onOfflineReady:s,onRegistered:r,onRegisteredSW:n,onRegisterError:i}=e,[o,l]=X.useState(!1),[c,d]=X.useState(!1),[m]=X.useState(()=>function(e={}){const{immediate:t=!1,onNeedRefresh:a,onOfflineReady:s,onRegistered:r,onRegisteredSW:n,onRegisterError:i}=e;let o,l;return l=async function(){if("serviceWorker"in navigator){if(o=await ie(async()=>{const{Workbox:e}=await import("./workbox-window.prod.es5-D4Jpjilu.js");return{Workbox:e}},[]).then(({Workbox:e})=>new e("/sw.js",{scope:"/",type:"classic"})).catch(e=>{null==i||i(e)}),!o)return;o.addEventListener("activated",e=>{(e.isUpdate||e.isExternal)&&window.location.reload()}),o.addEventListener("installed",e=>{e.isUpdate||null==s||s()}),o.register({immediate:t}).then(e=>{n?n("/sw.js",e):null==r||r(e)}).catch(e=>{null==i||i(e)})}}(),async(e=!0)=>{await l}}({immediate:t,onOfflineReady(){d(!0),null==s||s()},onNeedRefresh(){l(!0),null==a||a()},onRegistered:r,onRegisteredSW:n,onRegisterError:i}));return{needRefresh:[o,l],offlineReady:[c,d],updateServiceWorker:m}}({onRegistered(e){},onRegisterError(e){}}),[a,r]=X.useState(!1),[n,i]=X.useState(null),[o,l]=X.useState(null);return X.useEffect(()=>{if((async()=>{if(Ve.isNativePlatform())try{const e=await Ge.getInfo();l(e.version)}catch(e){}})(),!Ve.isNativePlatform()){const e=e=>{e.preventDefault(),r(!0),i(e)};return window.addEventListener("beforeinstallprompt",e),()=>{window.removeEventListener("beforeinstallprompt",e)}}},[]),Ve.isNativePlatform()?null:e||a?s.jsxs("div",{className:"fixed bottom-4 right-4 z-50",children:[e&&s.jsx("div",{className:"glass-panel p-4 mb-4 animate-slideIn",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(p,{className:"w-6 h-6 text-brand-gold animate-bounce"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"New version available!"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Click to update to the latest version"})]}),s.jsx("button",{onClick:()=>{t(!0)},className:"btn-primary py-2 px-4",children:"Update"})]})}),a&&s.jsx("div",{className:"glass-panel p-4 animate-slideIn",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("img",{src:"/android-icon-96-96.png",alt:"PIT-BOX.COM",className:"w-12 h-12"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Install PIT-BOX.COM"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Add to your home screen for quick access"})]}),s.jsx("button",{onClick:async()=>{if(!n)return;n.prompt();const{outcome:e}=await n.userChoice;"accepted"===e&&(r(!1),i(null))},className:"btn-primary py-2 px-4",children:"Install"})]})})]}):null}const Je=$e("Geolocation",{web:()=>ie(()=>import("./web-MZUdRFCT.js"),__vite__mapDeps([5,1,2,3,4])).then(e=>new e.GeolocationWeb)});var Ke,Qe,Ze,et,tt,at;(Qe=Ke||(Ke={})).Prompt="PROMPT",Qe.Camera="CAMERA",Qe.Photos="PHOTOS",(et=Ze||(Ze={})).Rear="REAR",et.Front="FRONT",(at=tt||(tt={})).Uri="uri",at.Base64="base64",at.DataUrl="dataUrl";const st=$e("Camera",{web:()=>ie(()=>import("./web-kQKHv3k6.js"),__vite__mapDeps([6,1,2,3,4])).then(e=>new e.CameraWeb)});$e("Network",{web:()=>ie(()=>import("./web-Bk6zt6FX.js"),__vite__mapDeps([7,1,2,3,4])).then(e=>new e.NetworkWeb)});const rt=$e("PushNotifications",{}),nt=Ve.isNativePlatform(),it=()=>"ios"===Ve.getPlatform(),ot=()=>"android"===Ve.getPlatform(),lt=()=>"web"===Ve.getPlatform(),ct=async()=>{if(!nt)return null;try{return(await st.getPhoto({quality:90,allowEditing:!1,resultType:tt.DataUrl,source:Ke.Camera})).dataUrl}catch(La){return null}},dt=async()=>{if(!nt)return null;try{return(await st.getPhoto({quality:90,allowEditing:!0,resultType:tt.DataUrl,source:Ke.Photos})).dataUrl}catch(La){return null}},mt=async()=>{if(!nt)return null;try{return await Je.getCurrentPosition({enableHighAccuracy:!0,timeout:1e4})}catch(La){return null}},ut=async(e,t)=>{if(nt)try{localStorage.setItem(e,t)}catch(La){localStorage.setItem(e,t)}else localStorage.setItem(e,t)},ht=async e=>{if(!nt)return localStorage.getItem(e);try{return localStorage.getItem(e)}catch(La){return localStorage.getItem(e)}},xt=()=>{const{currentTrack:e,isAtTrack:t,distance:a,isMonitoring:r,startMonitoring:i,stopMonitoring:o}=(()=>{const[e,t]=X.useState({currentTrack:null,isAtTrack:!1,distance:null,checkInId:null}),[a,s]=X.useState(!1),[r,n]=X.useState([]),i=X.useRef(null),o=X.useRef(null);X.useEffect(()=>{l()},[]);const l=async()=>{try{const{data:e,error:t}=await ce.from("track_locations").select("*");if(t)throw t;e&&n(e)}catch(La){}},c=async e=>{try{const{data:{user:t}}=await ce.auth.getUser();if(!t)return null;let a={timestamp:(new Date).toISOString(),latitude:0,longitude:0};if(nt){const e=await Je.getCurrentPosition();a={timestamp:(new Date).toISOString(),latitude:e.coords.latitude,longitude:e.coords.longitude}}const{data:s,error:r}=await ce.from("track_check_ins").insert({user_id:t.id,track_id:e,check_in_time:(new Date).toISOString(),is_public:!0,weather_conditions:a}).select().single();if(r)throw r;return(null==s?void 0:s.id)||null}catch(La){return null}},d=async e=>{try{const{error:t}=await ce.from("track_check_ins").update({check_out_time:(new Date).toISOString()}).eq("id",e);if(t)throw t}catch(La){}},m=X.useCallback(async(a,s)=>{var n;let i=null,l=1/0;if(r.forEach(e=>{const t=((e,t,a,s)=>{const r=e*Math.PI/180,n=a*Math.PI/180,i=(a-e)*Math.PI/180,o=(s-t)*Math.PI/180,l=Math.sin(i/2)*Math.sin(i/2)+Math.cos(r)*Math.cos(n)*Math.sin(o/2)*Math.sin(o/2);return 2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))*6371e3})(a,s,Number(e.latitude),Number(e.longitude));t<l&&(l=t,i=e)}),i&&l<=(i.radius||500)&&i){if(o.current!==i.id){const e=await c(i.id);o.current=i.id,t({currentTrack:i,isAtTrack:!0,distance:l,checkInId:e}),e&&await ce.from("notifications").insert({user_id:null==(n=(await ce.auth.getUser()).data.user)?void 0:n.id,type:"track_arrival",title:`Welcome to ${i.name}!`,body:`You've arrived at ${i.name} in ${i.city}, ${i.state}`,data:{track_id:i.id,check_in_id:e}})}}else o.current&&e.checkInId&&(await d(e.checkInId),o.current=null),t({currentTrack:i,isAtTrack:!1,distance:l,checkInId:null})},[r,e.checkInId]);return{...e,isMonitoring:a,tracks:r,startMonitoring:async()=>{if(nt)try{if("granted"!==(await Je.checkPermissions()).location&&"granted"!==(await Je.requestPermissions()).location)throw new Error("Location permission denied");const e=await Je.watchPosition({enableHighAccuracy:!0,timeout:1e4,maximumAge:5e3},e=>{e&&m(e.coords.latitude,e.coords.longitude)});i.current=e,s(!0)}catch(La){}},stopMonitoring:async()=>{i.current&&(await Je.clearWatch({id:i.current}),i.current=null),e.checkInId&&await d(e.checkInId),s(!1)},manualCheckIn:async e=>{var a;try{const s=r.find(t=>t.id===e);if(!s)return;const n=await c(e);o.current=e,t({currentTrack:s,isAtTrack:!0,distance:0,checkInId:n}),await ce.from("notifications").insert({user_id:null==(a=(await ce.auth.getUser()).data.user)?void 0:a.id,type:"track_arrival",title:`Checked in at ${s.name}`,body:`Manual check-in at ${s.name}`,data:{track_id:e,check_in_id:n}})}catch(La){}},refreshTracks:l}})(),[l,c]=X.useState(!1),[d,m]=X.useState(0);X.useEffect(()=>(i(),()=>{o()}),[]),X.useEffect(()=>{t&&e&&(c(!1),u())},[t,e]);const u=async()=>{if(!e)return;const{supabase:t}=await ie(async()=>{const{supabase:e}=await Promise.resolve().then(()=>me);return{supabase:e}},void 0),{data:{user:a}}=await t.auth.getUser();if(!a)return;const{count:s}=await t.from("setups").select("*",{count:"exact",head:!0}).eq("user_id",a.id).eq("location",e.name);m(s||0)};return r&&!l&&e?t?s.jsx("div",{className:"fixed top-20 left-0 right-0 z-50 mx-4 animate-slide-down",children:s.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg shadow-2xl p-4 max-w-2xl mx-auto",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(g,{className:"w-6 h-6"}),s.jsxs("h3",{className:"text-lg font-bold",children:["Welcome to ",e.name,"!"]})]}),s.jsxs("p",{className:"text-sm text-green-50 mb-3",children:[e.city,", ",e.state," • ",e.track_type," • ",e.surface]}),d>0&&s.jsx("div",{className:"bg-white/20 rounded-lg p-3 mb-3",children:s.jsxs("p",{className:"text-sm font-medium",children:["You have ",d," saved ",1===d?"setup":"setups"," for this track"]})}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx(K,{to:"/saved-setups",className:"bg-white text-green-600 px-4 py-2 rounded-lg text-sm font-medium hover:bg-green-50 transition-colors",children:"View Setups"}),s.jsx(K,{to:"/"+("dirt"===e.track_type?"sprint-410":"late-model"),className:"bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-green-800 transition-colors",children:"New Setup"})]})]}),s.jsx("button",{onClick:()=>c(!0),className:"text-white/80 hover:text-white transition-colors",children:s.jsx(n,{className:"w-5 h-5"})})]})})}):a&&a<5e3?s.jsx("div",{className:"fixed bottom-24 left-0 right-0 z-50 mx-4",children:s.jsxs("div",{className:"bg-blue-500 text-white rounded-lg shadow-xl p-3 max-w-md mx-auto flex items-center gap-3",children:[s.jsx(f,{className:"w-5 h-5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium",children:e.name}),s.jsxs("p",{className:"text-xs text-blue-100",children:[(a/1e3).toFixed(1)," km away"]})]}),s.jsx("button",{onClick:()=>c(!0),className:"text-white/80 hover:text-white",children:s.jsx(n,{className:"w-4 h-4"})})]})}):null:null};function pt({onComplete:e,videoSrc:t="/splash_animation.mp4"}){const[a,r]=X.useState(!0),[n,i]=X.useState(!1),o=X.useRef(null),l=X.useRef(!1);return X.useEffect(()=>{const t=o.current;if(!t)return;const a=()=>{l.current||(l.current=!0,r(!1),setTimeout(()=>{e()},300))},s=()=>{i(!0),setTimeout(()=>{l.current||(l.current=!0,e())},2e3)},n=()=>{t.play().catch(t=>{i(!0),setTimeout(()=>{l.current||(l.current=!0,e())},2e3)})};return t.addEventListener("ended",a),t.addEventListener("error",s),t.addEventListener("canplay",n),()=>{t.removeEventListener("ended",a),t.removeEventListener("error",s),t.removeEventListener("canplay",n)}},[e]),s.jsx(b,{children:a&&s.jsx(y.div,{initial:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"fixed inset-0 z-[9999] bg-brand-black flex items-center justify-center",style:{isolation:"isolate"},children:n?s.jsx("div",{className:"flex flex-col items-center justify-center",children:s.jsx("img",{src:"/android-icon-512-512.png",alt:"PIT-BOX",className:"w-64 h-64 object-contain animate-pulse"})}):s.jsxs(s.Fragment,{children:[s.jsx("video",{ref:o,src:t,className:"w-full h-full object-cover",playsInline:!0,autoPlay:!0,preload:"auto"}),s.jsx("button",{onClick:()=>{l.current||(l.current=!0,r(!1),setTimeout(()=>{e()},100))},className:"absolute bottom-8 right-8 px-6 py-3 bg-white/10 hover:bg-white/20 backdrop-blur-sm rounded-full text-white font-medium transition-all duration-300 hover:scale-105",children:"Skip"})]})})})}function gt({isOpen:e,onClose:t}){return X.useEffect(()=>{const a=a=>{"Escape"===a.key&&e&&t()};return e&&(document.addEventListener("keydown",a),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",a),document.body.style.overflow="unset"}},[e,t]),e?s.jsx(b,{children:s.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:s.jsxs(y.div,{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{type:"spring",damping:20,stiffness:300},children:[s.jsxs("div",{className:"relative p-8 bg-gradient-to-br from-brand-gold/10 to-brand-gold-dark/10 rounded-t-2xl",children:[s.jsx("button",{onClick:t,className:"absolute top-4 right-4 p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors","aria-label":"Close welcome modal",children:s.jsx(n,{className:"w-6 h-6"})}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"relative w-full max-w-md mx-auto mb-6",children:s.jsx("img",{src:"/android-icon-512-512.png",alt:"PIT-BOX.COM Logo",className:"w-full h-auto object-contain drop-shadow-xl transform hover:scale-105 transition-transform duration-300"})}),s.jsx("h1",{className:"text-4xl font-bold mb-4 bg-gradient-to-r from-brand-gold to-brand-gold-light bg-clip-text text-transparent",children:"Welcome to PIT-BOX.COM"}),s.jsx("p",{className:"text-xl text-gray-700 dark:text-gray-300 mb-6",children:"Where The Winners Go! Your Digital Crew Chief for Racing Excellence"})]})]}),s.jsxs("div",{className:"p-8 space-y-8",children:[s.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[s.jsxs(y.div,{className:"glass-panel p-6 text-center bg-gradient-to-br from-green-500/10 to-emerald-500/10",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-green-500/20 flex items-center justify-center mx-auto mb-4",children:s.jsx(j,{className:"w-8 h-8 text-green-500"})}),s.jsx("h3",{className:"text-xl font-bold mb-3",children:"Professional Setup Tools"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 leading-relaxed",children:"Save unlimited racing setups to the cloud. Access your data from anywhere, anytime. Track chassis adjustments, suspension settings, and engine parameters with professional-grade tools designed by racers, for racers."})]}),s.jsxs(y.div,{className:"glass-panel p-6 text-center bg-gradient-to-br from-blue-500/10 to-indigo-500/10",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-blue-500/20 flex items-center justify-center mx-auto mb-4",children:s.jsx(v,{className:"w-8 h-8 text-blue-500"})}),s.jsx("h3",{className:"text-xl font-bold mb-3",children:"Swap Meet Marketplace"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 leading-relaxed",children:"Buy, sell, and trade racing equipment with verified community members. List your products with photos, connect directly with buyers, and grow your racing business in our trusted marketplace."})]}),s.jsxs(y.div,{className:"glass-panel p-6 text-center bg-gradient-to-br from-purple-500/10 to-pink-500/10",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-purple-500/20 flex items-center justify-center mx-auto mb-4",children:s.jsx(w,{className:"w-8 h-8 text-purple-500"})}),s.jsx("h3",{className:"text-xl font-bold mb-3",children:"Racing Social Network"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 leading-relaxed",children:"Connect with fellow racers worldwide. Share your victories, learn from champions, and build lasting friendships in our exclusive racing community. Network with drivers, crew chiefs, and industry professionals."})]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-brand-gold/5 to-brand-gold-dark/5 rounded-xl p-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:"Why Champions Choose PIT-BOX.COM"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(N,{className:"w-6 h-6 text-brand-gold flex-shrink-0 mt-1"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold mb-1",children:"Cloud-Based Setup Management"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Never lose your setups again. Access your data from any device, anywhere in the world."})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(k,{className:"w-6 h-6 text-brand-gold flex-shrink-0 mt-1"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold mb-1",children:"Secure & Reliable"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Your proprietary setups are protected with bank-level security and encrypted storage."})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(_,{className:"w-6 h-6 text-brand-gold flex-shrink-0 mt-1"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold mb-1",children:"Global Racing Network"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Join thousands of racers from sprint cars to late models, all using PIT-BOX.COM."})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(C,{className:"w-6 h-6 text-brand-gold flex-shrink-0 mt-1"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold mb-1",children:"Real-Time Performance"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Make instant setup adjustments and track changes in real-time during race events."})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(S,{className:"w-6 h-6 text-brand-gold flex-shrink-0 mt-1"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold mb-1",children:"Proven by Champions"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Trusted by winning teams and professional drivers across all racing divisions."})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(E,{className:"w-6 h-6 text-brand-gold flex-shrink-0 mt-1"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold mb-1",children:"Built by Racers"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Created by racing enthusiasts who understand what it takes to win on the track."})]})]})]})]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Ready to Transform Your Racing?"}),s.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400 mb-6",children:"Join the revolution that's changing how champions prepare, compete, and win."}),s.jsx("button",{onClick:t,className:"btn-primary text-lg px-8 py-3 font-semibold",children:"Get Started Now"})]})]})]})})}):null}var ft,bt,yt,jt;(bt=ft||(ft={})).Dark="DARK",bt.Light="LIGHT",bt.Default="DEFAULT",(jt=yt||(yt={})).None="NONE",jt.Slide="SLIDE",jt.Fade="FADE";const vt=$e("StatusBar"),wt=$e("SplashScreen",{web:()=>ie(()=>import("./web-B4xgYwr5.js"),__vite__mapDeps([8,1,2,3,4])).then(e=>new e.SplashScreenWeb)});function Nt(){const[e,t]=G.useState(!1);return X.useEffect(()=>{(async()=>{if(Ve.isNativePlatform())try{await vt.setStyle({style:ft.Dark}),await vt.setBackgroundColor({color:"#000000"}),await wt.hide()}catch(La){}})(),localStorage.getItem("pitbox-has-visited")||(t(!0),localStorage.setItem("pitbox-has-visited","true"))},[]),s.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-lg text-center",children:[s.jsx("div",{className:"relative w-full max-w-md mx-auto mb-8",children:s.jsx("img",{src:"/android-icon-512-512.png",alt:"PIT-BOX.COM Logo",width:"800",height:"240",className:"w-full h-auto object-contain drop-shadow-2xl transform hover:scale-105 transition-transform duration-300"})}),s.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-6 text-brand-gold",children:"Welcome to PIT-BOX.COM"}),s.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 mb-8",children:"Your Digital Crew Chief for Racing Excellence"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("button",{onClick:()=>navigate("/home"),className:"w-full btn-primary flex items-center justify-center gap-2 text-lg",children:[s.jsx(h,{className:"w-5 h-5"}),"Get Started"]}),s.jsx(K,{to:"/home",className:"w-full btn-secondary block text-center",children:"Continue as Guest"}),s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-4 flex items-center justify-center gap-1",children:[s.jsx(u,{className:"w-4 h-4"}),s.jsx("span",{children:Ve.isNativePlatform()?"Native app version":"Web version"})]})]}),s.jsx(Re,{className:"hidden sign-in-trigger"}),s.jsx(gt,{isOpen:e,onClose:()=>{t(!1)}})]})})}function kt({isOpen:e,onClose:t,onSignIn:a}){const r=Y();return e?s.jsx("div",{className:"modal-overlay",onClick:t,children:s.jsx("div",{className:"modal-content max-w-lg",onClick:e=>e.stopPropagation(),children:s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:t,className:"absolute top-0 right-0 p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(n,{className:"w-6 h-6"})}),s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"inline-block p-3 rounded-full bg-brand-gold/10 mb-4",children:s.jsx(S,{className:"w-12 h-12 text-brand-gold"})}),s.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Join the Winners Circle!"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Unlock the full potential of PIT-BOX.COM - the most advanced setup management tool in racing. Champions trust us for their success!"})]}),s.jsxs("div",{className:"space-y-4 mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-brand-gold/5",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-brand-gold/10 flex items-center justify-center",children:"✓"}),s.jsx("p",{className:"text-sm",children:"Save unlimited setup configurations"})]}),s.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-brand-gold/5",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-brand-gold/10 flex items-center justify-center",children:"✓"}),s.jsx("p",{className:"text-sm",children:"Track changes across different conditions"})]}),s.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-brand-gold/5",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-brand-gold/10 flex items-center justify-center",children:"✓"}),s.jsx("p",{className:"text-sm",children:"Access your setups from anywhere"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("button",{onClick:()=>{r("/signin"),t()},className:"w-full btn-primary flex items-center justify-center gap-2",children:[s.jsx(h,{className:"w-5 h-5"}),"Sign In Now"]}),s.jsx("button",{onClick:()=>{t()},className:"w-full btn-secondary",children:"Continue as Guest"})]})]})})}):null}function _t({size:e="md",message:t,fullScreen:a=!1}){const r={sm:"w-5 h-5",md:"w-8 h-8",lg:"w-12 h-12"},n=s.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:`${r[e]} absolute inset-0 border-4 border-brand-gold/20 rounded-full`}),s.jsx("div",{className:`${r[e]} absolute inset-0 border-4 border-transparent border-t-brand-gold rounded-full animate-spin`}),s.jsx("div",{className:`${r[e]} absolute inset-0 border-4 border-transparent border-t-brand-gold-light rounded-full animate-spin`,style:{animationDirection:"reverse",animationDuration:"1s"}})]}),t&&s.jsx("p",{className:"text-gray-600 dark:text-gray-400 animate-pulse mt-8",children:t})]});return a?s.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-white/80 dark:bg-brand-black/80 backdrop-blur-sm z-50",children:n}):n}function Ct({variant:e="floating",dismissible:t=!0,showDelay:a=3e3}){const[r,i]=X.useState("inline"===e),[o,l]=X.useState(!1);X.useEffect(()=>{if("inline"===e)return void i(!0);const t=localStorage.getItem("socialBannerDismissed");if(t){const e=parseInt(t),a=864e5;if(Date.now()-e<a)return void l(!0)}const s=setTimeout(()=>{i(!0)},a);return()=>clearTimeout(s)},[a,e]);const c=()=>{i(!1),"inline"!==e&&localStorage.setItem("socialBannerDismissed",Date.now().toString()),setTimeout(()=>l(!0),300)};if(o&&"inline"!==e)return null;const d=[{name:"TikTok",icon:({className:e})=>s.jsx("svg",{className:e,fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M19.59 6.69a4.83 4.83 0 01-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 01-5.2 1.74 2.89 2.89 0 012.31-4.64 2.93 2.93 0 01.88.13V9.4a6.84 6.84 0 00-1-.05A6.33 6.33 0 005 20.1a6.34 6.34 0 0010.86-4.43v-7a8.16 8.16 0 004.77 1.52v-3.4a4.85 4.85 0 01-1-.1z"})}),handle:"@pitbox2025",url:"https://www.tiktok.com/@pitbox2025",gradient:"from-cyan-400 to-pink-500"},{name:"Instagram",icon:I,handle:"@pitbox25",url:"https://www.instagram.com/pitbox25",gradient:"from-purple-600 to-pink-600"},{name:"Facebook",icon:A,handle:"@pitbox25",url:"https://www.facebook.com/pitbox25",gradient:"from-blue-600 to-blue-700"},{name:"Threads",icon:O,handle:"@pitbox25",url:"https://www.threads.net/@pitbox25",gradient:"from-gray-900 to-black"},{name:"X",icon:({className:e})=>s.jsx("svg",{className:e,fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),handle:"@PitBox2025",url:"https://x.com/PitBox2025",gradient:"from-gray-800 to-gray-950"}];return"inline"!==e||o?"sticky"===e?s.jsx("div",{className:"sticky top-20 z-30 transition-all duration-500 "+(r?"translate-y-0 opacity-100":"-translate-y-full opacity-0"),children:s.jsx("div",{className:"bg-gradient-to-r from-brand-gold via-orange-500 to-brand-gold-dark text-white shadow-xl",children:s.jsx("div",{className:"container mx-auto px-4 py-3",children:s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(P,{className:"w-5 h-5 animate-pulse"}),s.jsx("p",{className:"font-medium text-sm md:text-base",children:"Follow us for daily racing tips & exclusive content!"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[d.map(e=>{const t=e.icon;return s.jsx("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-lg bg-white/20 hover:bg-white/30 transition-all duration-200 hover:scale-110","aria-label":e.name,children:s.jsx(t,{className:"w-4 h-4"})},e.name)}),t&&s.jsx("button",{onClick:c,className:"p-2 rounded-lg bg-white/20 hover:bg-white/30 transition-colors ml-2","aria-label":"Dismiss",children:s.jsx(n,{className:"w-4 h-4"})})]})]})})})}):s.jsx("div",{className:"fixed bottom-6 right-6 z-50 max-w-md transition-all duration-500 "+(r?"translate-x-0 opacity-100":"translate-x-full opacity-0"),children:s.jsxs("div",{className:"glass-panel p-6 bg-white dark:bg-gray-900 shadow-2xl rounded-2xl border-2 border-brand-gold/20",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-brand-gold to-orange-500",children:s.jsx(P,{className:"w-5 h-5 text-white"})}),s.jsx("h4",{className:"text-lg font-bold",children:"Stay Connected!"})]}),t&&s.jsx("button",{onClick:c,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors","aria-label":"Dismiss",children:s.jsx(n,{className:"w-5 h-5"})})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Follow us on social media for daily racing news, track updates, and exclusive content!"}),s.jsx("div",{className:"space-y-2 mb-4",children:d.map(e=>{const t=e.icon;return s.jsxs("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors group",children:[s.jsx("div",{className:`p-2 rounded-lg bg-gradient-to-br ${e.gradient}`,children:s.jsx(t,{className:"w-4 h-4 text-white"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-sm font-semibold",children:e.name}),s.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:e.handle})]}),s.jsx(T,{className:"w-4 h-4 text-gray-400 group-hover:text-brand-gold transition-colors"})]},e.name)})}),s.jsx(K,{to:"/social",className:"block w-full text-center py-2 px-4 rounded-lg bg-gradient-to-r from-brand-gold to-orange-500 text-white font-medium hover:shadow-lg transition-all duration-200 hover:scale-105",children:"View All Social Channels"})]})}):s.jsxs("div",{className:"glass-panel p-6 bg-gradient-to-br from-brand-gold/10 via-orange-50/50 to-brand-gold-dark/10 dark:from-brand-gold/5 dark:via-gray-900/50 dark:to-brand-gold-dark/5 relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-brand-gold/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-orange-500/5 rounded-full blur-3xl translate-y-1/2 -translate-x-1/2"}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(P,{className:"w-6 h-6 text-brand-gold animate-pulse"}),s.jsx("h3",{className:"text-2xl font-bold",children:"Join Our Pit Community"})]}),t&&s.jsx("button",{onClick:c,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors","aria-label":"Dismiss",children:s.jsx(n,{className:"w-5 h-5"})})]}),s.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-6 max-w-2xl",children:"Follow us on social media for daily racing news, track updates, technical tips, and exclusive content from the racing world."}),s.jsx("div",{className:"flex flex-wrap items-center gap-4",children:d.map(e=>{const t=e.icon;return s.jsxs("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"group flex items-center gap-3 px-4 py-3 rounded-xl bg-white dark:bg-gray-800 hover:shadow-lg transition-all duration-300 hover:scale-105",children:[s.jsx("div",{className:`p-2 rounded-lg bg-gradient-to-br ${e.gradient}`,children:s.jsx(t,{className:"w-4 h-4 text-white"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"text-sm font-semibold",children:e.name}),s.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:e.handle})]}),s.jsx(T,{className:"w-4 h-4 text-gray-400 group-hover:text-brand-gold transition-colors"})]},e.name)})}),s.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:s.jsxs(K,{to:"/social",className:"inline-flex items-center gap-2 text-brand-gold hover:text-brand-gold-dark font-medium group",children:[s.jsx("span",{children:"View all our social channels"}),s.jsx(T,{className:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]})})]})]})}function St({children:e,requiredTier:t="basic"}){const{subscriptionStatus:a,isLoading:r,error:n}=Oe(),o=Y();return r?s.jsxs("div",{className:"glass-panel p-6 flex items-center justify-center",children:[s.jsx(i,{className:"w-6 h-6 animate-spin text-brand-gold mr-3"}),s.jsx("span",{children:"Checking subscription..."})]}):"basic"===t&&("basic"===a||"premium"===a)||"premium"===t&&"premium"===a?s.jsx(s.Fragment,{children:e}):s.jsxs("div",{className:"glass-panel p-8 text-center",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-brand-gold/10 flex items-center justify-center mx-auto mb-4",children:s.jsx(L,{className:"w-8 h-8 text-brand-gold"})}),s.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Subscription Required"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"premium"===t?"This feature requires an Encrypted Setup Access subscription.":"This feature requires a subscription."}),s.jsx("button",{onClick:()=>o("/subscription"),className:"btn-primary",children:"View Subscription Plans"})]})}function Et(){const e=Y(),{user:t}=pe(),[a,r]=X.useState(!0),[n,i]=X.useState(null),[o,l]=X.useState(!1),[d,m]=X.useState(!1);return s.jsxs("div",{className:"space-y-12",children:[d&&s.jsx(_t,{fullScreen:!0,message:"Loading..."}),s.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-brand-black via-brand-black-light to-brand-black-dark",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-radial from-brand-gold/20 via-transparent to-transparent"}),s.jsx("div",{className:"relative px-6 py-12 sm:px-12 sm:py-24",children:s.jsxs("div",{className:"mx-auto max-w-4xl text-center",children:[s.jsx("div",{className:"relative w-full max-w-lg mx-auto mb-8",children:s.jsx("img",{src:"/android-icon-512-512.png",alt:"PIT-BOX.COM Logo",width:"800",height:"240",className:"w-full h-auto object-contain drop-shadow-2xl transform hover:scale-105 transition-transform duration-300"})}),s.jsx("h1",{className:"text-4xl font-bold tracking-tight text-white sm:text-6xl mb-6",children:"The Future of Racing is Here"}),s.jsx("p",{className:"text-xl leading-8 text-gray-300 mb-8",children:"Experience the most advanced setup management platform in motorsports history. PIT-BOX.COM revolutionizes how champions prepare, compete, and win."})]})})]}),s.jsxs("div",{className:"glass-panel p-8 bg-gradient-to-br from-brand-gold/10 to-brand-gold-dark/10 transform hover:scale-[1.02] transition-all duration-300",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h2",{className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-brand-gold to-brand-gold-light bg-clip-text text-transparent mb-6",children:"Master Your Racing Machine"}),s.jsx("p",{className:"text-xl text-gray-700 dark:text-gray-300 max-w-4xl mx-auto leading-relaxed",children:"Welcome to the heart of PIT-BOX.COM - your comprehensive setup management system. Our professional-grade tools are designed to help you achieve peak performance and maintain your competitive edge. Select your vehicle class below to access detailed setup sheets, track changes, and optimize your racing machine for victory."})]}),s.jsxs("div",{className:"max-w-3xl mx-auto space-y-4",children:[s.jsxs(y.button,{className:"w-full glass-panel p-6 cursor-pointer bg-gradient-to-br from-brand-gold/5 to-brand-gold-dark/5 hover:from-brand-gold/10 hover:to-brand-gold-dark/10 transition-all duration-300 relative group",onClick:()=>r(!a),whileHover:{scale:1.02},transition:{type:"spring",stiffness:400,damping:10},children:[s.jsx("div",{className:"absolute inset-0 rounded-xl border-2 border-brand-gold/50 opacity-0 group-hover:opacity-100 transition-opacity"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(R,{className:"w-8 h-8 text-brand-gold"}),s.jsx("span",{className:"text-2xl font-bold",children:"Racing Setup Headquarters"})]}),s.jsx(c,{className:"w-6 h-6 transition-transform duration-300 "+(a?"rotate-180":"")})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-left mt-2 pl-12",children:"Unlock championship-caliber performance with our professional setup tools"}),s.jsxs("div",{className:"flex items-center gap-2 mt-3 text-brand-gold font-medium pl-12",children:[s.jsx(D,{className:"w-5 h-5"}),s.jsx("span",{children:"Click to access your racing vehicle setup tools"}),s.jsx(M,{className:"w-5 h-5 transform group-hover:translate-x-2 transition-transform"})]})]}),a&&s.jsx(St,{children:s.jsx("div",{className:"space-y-4 transition-all duration-500 opacity-100 max-h-[2000px] mb-48",children:Ea.Vehicles.map(t=>s.jsxs("div",{className:"pl-4",children:[s.jsx("button",{className:"w-full glass-panel p-4 cursor-pointer bg-gradient-to-br from-brand-gold/5 to-brand-gold-dark/5 hover:from-brand-gold/10 hover:to-brand-gold-dark/10 transition-all duration-300",onClick:()=>i(n===t.name?null:t.name),children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(z,{className:"w-6 h-6 text-brand-gold"}),s.jsxs("span",{className:"text-xl font-semibold",children:["Setup Tools: ",t.name]})]}),s.jsx(c,{className:"w-5 h-5 transition-transform duration-300 "+(n===t.name?"rotate-180":"")})]})}),s.jsx("div",{className:"grid gap-3 pl-4 mt-3 transition-all duration-300 "+(n===t.name?"opacity-100 max-h-[1000px]":"opacity-0 max-h-0 overflow-hidden"),children:t.subcategories.map(t=>s.jsx("button",{onClick:()=>(async t=>{m(!0);try{await e(t)}finally{m(!1)}})(t.path),className:"glass-panel p-4 text-left group hover:bg-brand-gold/5 transition-all duration-300",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(j,{className:"w-5 h-5 text-brand-gold"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-lg font-medium",children:t.name}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Access setup sheets and optimization tools"})]})]}),s.jsx(M,{className:"w-5 h-5 transform group-hover:translate-x-1 transition-transform"})]})},t.path))})]},t.name))})}),s.jsxs("div",{className:"text-center mt-12 mb-16",children:[s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Get started now with our professional setup management tools"}),!t&&s.jsxs("button",{onClick:()=>e("/signin"),className:"btn-primary flex items-center gap-2 mx-auto",children:[s.jsx(L,{className:"w-5 h-5"}),"Sign In to Access Setup Tools"]}),t&&!a&&s.jsxs("button",{onClick:()=>r(!0),className:"btn-primary flex items-center gap-2 mx-auto",children:[s.jsx(j,{className:"w-5 h-5"}),"View Setup Tools"]}),t&&a&&s.jsxs("button",{onClick:()=>e("/subscription"),className:"btn-primary flex items-center gap-2 mx-auto mb-8",children:[s.jsx(k,{className:"w-5 h-5"}),"View Subscription Plans"]})]})]})]}),s.jsxs("div",{className:"glass-panel p-8 mt-12 mb-8",children:[s.jsx("h2",{className:"text-3xl font-bold text-center mb-12",children:"Why Champions Choose PIT-BOX.COM"}),s.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(D,{className:"w-8 h-8 text-brand-gold"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold mb-2",children:"Real-Time Excellence"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Make split-second decisions with confidence. Update and analyze setups instantly during race day."})]})]}),s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(U,{className:"w-8 h-8 text-brand-gold"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold mb-2",children:"Universal Access"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Your entire racing history at your fingertips, accessible anywhere in the world."})]})]}),s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(w,{className:"w-8 h-8 text-brand-gold"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold mb-2",children:"Team Synergy"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Seamless collaboration between crew members, engineers, and drivers."})]})]}),s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(V,{className:"w-8 h-8 text-brand-gold"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold mb-2",children:"Performance Analytics"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Advanced data analysis reveals winning patterns and optimization opportunities."})]})]}),s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(L,{className:"w-8 h-8 text-brand-gold"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold mb-2",children:"Secure Innovation"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Your proprietary setups are protected with bank-level security protocols."})]})]}),s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(_,{className:"w-8 h-8 text-brand-gold"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold mb-2",children:"Pit Community"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Join an elite network of racing professionals and champions."})]})]})]})]}),s.jsxs("div",{className:"glass-panel p-8 bg-gradient-to-br from-brand-gold/5 to-brand-gold-light/5",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[s.jsx($,{className:"w-6 h-6 text-brand-gold"}),s.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-brand-gold to-brand-gold-light bg-clip-text text-transparent",children:"Sponsored Affiliates"})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Proud to partner with premier racing venues"})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6 max-w-5xl mx-auto",children:[s.jsxs("a",{href:"https://www.silverdollarspeedway.com",target:"_blank",rel:"noopener noreferrer",className:"glass-panel p-6 hover:shadow-xl transition-all duration-300 group relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-brand-gold/10 to-brand-gold-light/10 opacity-0 group-hover:opacity-100 transition-opacity"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"flex items-center justify-end mb-4",children:s.jsx("div",{className:"px-2 py-1 rounded-full bg-brand-gold/10 text-brand-gold text-xs font-semibold",children:"SPONSORED"})}),s.jsx("div",{className:"mb-4",children:s.jsx("img",{src:"/logo.png",alt:"Silver Dollar Speedway",className:"w-full h-auto object-contain max-h-24 md:max-h-32 mx-auto"})}),s.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-600 dark:text-gray-400 mb-3",children:[s.jsx(q,{className:"w-4 h-4"}),s.jsx("span",{children:"Chico, California"})]}),s.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4 text-center",children:"Home of the legendary Gold Cup Race of Champions and exciting sprint car racing. One of California's premier dirt racing facilities."}),s.jsxs("div",{className:"flex items-center justify-center gap-2 text-brand-gold font-semibold group-hover:gap-3 transition-all",children:[s.jsx("span",{children:"Visit Silver Dollar Speedway"}),s.jsx(T,{className:"w-5 h-5"})]})]})]}),s.jsxs("a",{href:"https://www.thunderbowlraceway.com",target:"_blank",rel:"noopener noreferrer",className:"glass-panel p-6 hover:shadow-xl transition-all duration-300 group relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-brand-gold/10 to-brand-gold-light/10 opacity-0 group-hover:opacity-100 transition-opacity"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"flex items-center justify-end mb-4",children:s.jsx("div",{className:"px-2 py-1 rounded-full bg-brand-gold/10 text-brand-gold text-xs font-semibold",children:"SPONSORED"})}),s.jsx("div",{className:"mb-4",children:s.jsx("img",{src:"/image (2).png",alt:"Thunderbowl Raceway",className:"w-full h-auto object-contain max-h-24 md:max-h-32 mx-auto"})}),s.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-600 dark:text-gray-400 mb-3",children:[s.jsx(q,{className:"w-4 h-4"}),s.jsx("span",{children:"Tulare, California"})]}),s.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4 text-center",children:"Home of exciting sprint car racing featuring NARC 410 Sprint Cars and the annual Trophy Cup. One of California's premier dirt racing venues."}),s.jsxs("div",{className:"flex items-center justify-center gap-2 text-brand-gold font-semibold group-hover:gap-3 transition-all",children:[s.jsx("span",{children:"Visit Thunderbowl Raceway"}),s.jsx(T,{className:"w-5 h-5"})]})]})]})]})]}),s.jsx("div",{className:"glass-panel p-8 bg-gradient-to-br from-brand-gold/10 via-brand-gold/5 to-brand-gold/10 mb-24",children:s.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[s.jsx(E,{className:"w-16 h-16 text-brand-gold mx-auto mb-6 animate-pulse"}),s.jsx("h2",{className:"text-3xl font-bold mb-6 bg-gradient-to-r from-brand-gold to-brand-gold-light bg-clip-text text-transparent",children:"With Gratitude"}),s.jsx("p",{className:"text-xl text-gray-700 dark:text-gray-300 leading-relaxed mb-8",children:"PIT-BOX.COM would not be possible without the incredible support and dedication of many amazing people. A special heartfelt thank you to my beautiful wife, whose unwavering support, patience, and understanding has been the cornerstone of this journey. Her sacrifices of time and endless encouragement have made this dream a reality."}),s.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:"To our early adopters, development team, and racing community - your trust and feedback have been invaluable in shaping PIT-BOX.COM into the revolutionary platform it is today. Together, we're changing the future of racing."})]})}),s.jsx(Ct,{variant:"inline",dismissible:!0}),s.jsx("div",{className:"h-16 md:h-0"}),s.jsx(kt,{isOpen:o,onClose:()=>l(!1),onSignIn:()=>{var e;l(!1),null==(e=document.querySelector(".sign-in-trigger"))||e.click()}}),s.jsx(Re,{className:"hidden sign-in-trigger"})]})}function Pt(){const[e,t]=X.useState(!0),[a,r]=X.useState(""),[n,o]=X.useState(""),[l,c]=X.useState(!1),[u,p]=X.useState(null),[g,f]=X.useState(""),[b,y]=X.useState(""),[j,v]=X.useState(""),[w,N]=X.useState(null),[k,_]=X.useState(!1),C=Y(),S=J(),{signIn:E,signUp:P,user:I,connectionError:A,retryConnection:O}=pe(),{executeWithRetry:T}=ue(),L=["Silva57","Daniels5","Larson57","Colby5","Andy92","Brad49","Kyle54","Kaleb3","Slingin18","Claygrip33","Highline22","Dirtdog77","Slidejob04","Cushion55","Roostertail81","Gasit49","Sprintcar92","Latemodel68","Bullring11","Checkered99","Fullthrottle07","Redclay36","Wheelie29","Chassis14","Featurewin63","Trackside70","Pitside88","Glorylaps44","Pitboxmike","Chaz44","Chaz33","Chaz22","Chaz55","Chaz11"];X.useEffect(()=>{var e,t;if(I){const a=(null==(t=null==(e=S.state)?void 0:e.from)?void 0:t.pathname)||"/home";C(a,{replace:!0})}},[I,C,S]);const R=async e=>{try{const{data:t,error:a}=await T(async()=>await ce.from("profiles").select("id").eq("promo_code",e).limit(1));if(a)throw a;const s=t&&t.length>0;return _(s),s&&N(!1),s}catch(t){return!1}},D=e=>{if(!e)return!1;const t=e.toLowerCase(),a=t.charAt(0).toUpperCase()+t.slice(1);return L.includes(a)};return s.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-brand-black via-brand-black-light to-brand-black-dark",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-radial from-brand-gold/10 via-transparent to-transparent"}),s.jsxs("div",{className:"relative w-full max-w-md",children:[s.jsxs("div",{className:"glass-panel p-8 bg-white/95 dark:bg-gray-800/95",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("img",{src:"/android-icon-192-192.png",alt:"PIT-BOX.COM",className:"w-24 h-24 mx-auto mb-4"}),s.jsx("h1",{className:"text-3xl font-bold mb-2",children:e?"Sign In to PitBox":"Create PitBox Account"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e?"Welcome back!":"Join the winners circle"})]}),A&&s.jsx("div",{className:"mb-4 p-3 rounded-lg bg-red-100 dark:bg-red-900/30 border border-red-200 dark:border-red-800",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(d,{className:"w-4 h-4 text-red-500 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("p",{className:"text-sm text-red-700 dark:text-red-300 mb-2",children:["Connection Error: ",A]}),s.jsxs("button",{onClick:async()=>{await O()},className:"flex items-center gap-1 text-xs text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300",children:[s.jsx(m,{className:"w-3 h-3"}),"Retry Connection"]})]})]})}),s.jsxs("form",{onSubmit:async s=>{var r,i;s.preventDefault(),c(!0),p(null);try{if(e){const{error:e}=await E(a,n);if(e)e.message.includes("Invalid login credentials")?p("Invalid email or password"):p(e.message);else{const e=(null==(i=null==(r=S.state)?void 0:r.from)?void 0:i.pathname)||"/home";C(e,{replace:!0})}}else{if(!g.trim())return p("Username is required"),void c(!1);if(j){const e=j.toLowerCase(),t=e.charAt(0).toUpperCase()+e.slice(1);if(!D(t))return p("Invalid promo code"),void c(!1);if(await R(t))return p("This promo code has already been used"),void c(!1)}const{error:e,success:s}=await P(a,n);if(e)e.message.includes("user_already_exists")?(p("An account with this email already exists. Please sign in instead."),t(!0)):p(e.message);else if(s){const{data:{user:e}}=await ce.auth.getUser();if(e){let t=null;if(j&&D(j)){const e=j.toLowerCase();t=e.charAt(0).toUpperCase()+e.slice(1)}const{error:a}=await ce.from("profiles").upsert({id:e.id,username:g.trim(),full_name:b.trim()||null,promo_code:t,has_premium:!!t,updated_at:(new Date).toISOString()})}C("/terms-of-service",{replace:!0})}}}catch(o){p("An unexpected error occurred. Please try again.")}finally{c(!1)}},className:"space-y-4",children:[u&&s.jsx("div",{className:"p-3 rounded-lg bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 text-sm",children:u}),!e&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"username",className:"block text-sm font-medium mb-1",children:["Username ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",id:"username",value:g,onChange:e=>f(e.target.value),className:"w-full p-3 rounded-lg bg-white/50 dark:bg-gray-800/50 border border-gray-300 dark:border-gray-600 focus:border-brand-gold focus:ring-2 focus:ring-brand-gold/20 outline-none transition",placeholder:"Choose a username",required:!0,disabled:l})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium mb-1",children:"Full Name"}),s.jsx("input",{type:"text",id:"fullName",value:b,onChange:e=>y(e.target.value),className:"w-full p-3 rounded-lg bg-white/50 dark:bg-gray-800/50 border border-gray-300 dark:border-gray-600 focus:border-brand-gold focus:ring-2 focus:ring-brand-gold/20 outline-none transition",placeholder:"Your full name",disabled:l})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"promoCode",className:"block text-sm font-medium mb-1",children:["Promo Code",s.jsx("span",{className:"ml-1 text-xs text-gray-500",children:"(Optional)"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",id:"promoCode",value:j,onChange:e=>{const t=e.target.value;v(t),(e=>{if(!e)return N(null),_(!1),!1;const t=e.toLowerCase(),a=t.charAt(0).toUpperCase()+t.slice(1),s=L.includes(a);N(s),s&&R(a)})(t)},className:`w-full p-3 rounded-lg bg-white/50 dark:bg-gray-800/50 border ${!0!==w||k?!1===w||k?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-gray-600":"border-green-500 dark:border-green-500"} focus:ring-2 focus:ring-brand-gold/20 outline-none transition`,placeholder:"Enter promo code if you have one",disabled:l}),!0===w&&!k&&s.jsx(x,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-green-500"})]}),!0===w&&!k&&s.jsx("p",{className:"mt-1 text-xs text-green-600 dark:text-green-400",children:"Valid promo code! You'll have premium access."}),!1===w&&j&&!k&&s.jsx("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:"Invalid promo code."}),k&&s.jsx("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:"This promo code has already been used."})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium mb-1",children:"Email"}),s.jsx("input",{type:"email",id:"email",value:a,onChange:e=>r(e.target.value),className:"w-full p-3 rounded-lg bg-white/50 dark:bg-gray-800/50 border border-gray-300 dark:border-gray-600 focus:border-brand-gold focus:ring-2 focus:ring-brand-gold/20 outline-none transition",placeholder:"your@email.com",required:!0,autoComplete:"email",disabled:l})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium mb-1",children:"Password"}),s.jsx("input",{type:"password",id:"password",value:n,onChange:e=>o(e.target.value),className:"w-full p-3 rounded-lg bg-white/50 dark:bg-gray-800/50 border border-gray-300 dark:border-gray-600 focus:border-brand-gold focus:ring-2 focus:ring-brand-gold/20 outline-none transition",placeholder:"••••••••",required:!0,autoComplete:e?"current-password":"new-password",disabled:l,minLength:6}),!e&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 6 characters"})]}),s.jsx("button",{type:"submit",disabled:l||j&&(!1===w||k)||!!A,className:"w-full bg-brand-gold text-white py-3 px-4 rounded-lg hover:bg-brand-gold-dark transition text-lg flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed font-semibold shadow-lg hover:shadow-xl",children:l?s.jsxs(s.Fragment,{children:[s.jsx(i,{className:"w-5 h-5 animate-spin"}),e?"Signing In...":"Creating Account..."]}):s.jsxs(s.Fragment,{children:[s.jsx(h,{className:"w-5 h-5"}),e?"Sign In":"Create Account"]})}),s.jsxs("p",{className:"text-sm text-center text-gray-600 dark:text-gray-400",children:[e?"Don't have an account?":"Already have an account?"," ",s.jsx("button",{type:"button",className:"text-brand-gold hover:text-brand-gold-dark dark:text-brand-gold-light dark:hover:text-brand-gold font-medium",onClick:()=>{t(!e),p(null),N(null),v(""),_(!1)},children:e?"Create one":"Sign in"})]})]})]}),s.jsx("div",{className:"text-center mt-6",children:s.jsx("button",{onClick:()=>C(-1),className:"text-gray-400 hover:text-gray-300 text-sm",children:"Go Back"})})]})]})}const It=X.lazy(()=>ie(()=>import("./WinglessSprints-DkVcp2_h.js"),__vite__mapDeps([9,1,2,10,11,12,13,3,4]))),At=X.lazy(()=>ie(()=>import("./CrateSprints-B3ncKFon.js"),__vite__mapDeps([14,1,2,10,11,12,13,3,4]))),Ot=X.lazy(()=>ie(()=>import("./Sprint360-Ct0DIaci.js"),__vite__mapDeps([15,1,2,10,11,12,13,3,4]))),Tt=X.lazy(()=>ie(()=>import("./Sprint410-DoQWY-nY.js"),__vite__mapDeps([16,1,2,10,11,12,13,3,4]))),Lt=X.lazy(()=>ie(()=>import("./NonWinged410-BTFh-0gB.js"),__vite__mapDeps([17,1,2,10,11,12,13,3,4]))),Rt=X.lazy(()=>ie(()=>import("./DirtModified2-CJlpFZmQ.js"),__vite__mapDeps([18,1,2,10,11,12,13,3,4]))),Dt=X.lazy(()=>ie(()=>import("./UMPModified-DwsxRlgY.js"),__vite__mapDeps([19,1,2,10,11,12,13,3,4]))),Mt=X.lazy(()=>ie(()=>import("./IMCAModifieds-Dmnka3x0.js"),__vite__mapDeps([20,1,2,10,11,12,13,3,4]))),zt=X.lazy(()=>ie(()=>import("./IMCASportMods-LSkJZ-J9.js"),__vite__mapDeps([21,1,2,10,11,12,13,3,4]))),Ut=X.lazy(()=>ie(()=>import("./BModified-Yry7r58r.js"),__vite__mapDeps([22,1,2,10,11,12,13,3,4]))),Vt=X.lazy(()=>ie(()=>import("./Micro600-Cx70H4q4.js"),__vite__mapDeps([23,1,2,10,11,12,13,3,4]))),$t=X.lazy(()=>ie(()=>import("./MiniSprint-C6jkVMqe.js"),__vite__mapDeps([24,1,2,10,11,12,13,3,4]))),qt=X.lazy(()=>ie(()=>import("./JrSprint-4OA-40RM.js"),__vite__mapDeps([25,1,2,10,11,12,13,3,4]))),Ft=X.lazy(()=>ie(()=>import("./QuarterMidget-BVF0fARs.js"),__vite__mapDeps([26,1,2,10,11,12,13,3,4]))),Bt=X.lazy(()=>ie(()=>import("./FocusMidget-C6bGUiFN.js"),__vite__mapDeps([27,1,2,10,11,12,13,3,4]))),Wt=X.lazy(()=>ie(()=>import("./OutlawKart-Cy98tG0z.js"),__vite__mapDeps([28,1,2,10,11,12,13,3,4]))),Ht=X.lazy(()=>ie(()=>import("./LO206Kart-D3u3MMay.js"),__vite__mapDeps([29,1,2,10,11,12,13,3,4]))),Xt=X.lazy(()=>ie(()=>import("./LateDirt-B8LTJeRt.js"),__vite__mapDeps([30,1,2,10,11,12,13,3,4]))),Gt=X.lazy(()=>ie(()=>import("./CrateLateMod-DwpSwBin.js"),__vite__mapDeps([31,1,2,10,11,12,13,3,4]))),Yt=X.lazy(()=>ie(()=>import("./SuperLateModel-DMqh6xV4.js"),__vite__mapDeps([32,1,2,10,11,12,13,3,4]))),Jt=X.lazy(()=>ie(()=>import("./StreetStock-DVti0wNH.js"),__vite__mapDeps([33,1,2,10,11,12,13,3,4]))),Kt=X.lazy(()=>ie(()=>import("./RestrictedBoxStock-zGzGuT9m.js"),__vite__mapDeps([34,1,2,10,11,12,13,3,4]))),Qt=X.lazy(()=>ie(()=>import("./BoxStock-DDiz9QX0.js"),__vite__mapDeps([35,1,2,10,11,12,13,3,4]))),Zt=X.lazy(()=>ie(()=>import("./Intermediate250-D5uRG90a.js"),__vite__mapDeps([36,1,2,10,11,12,13,3,4]))),ea=X.lazy(()=>ie(()=>import("./OpenIntermediate-W722m8VC.js"),__vite__mapDeps([37,1,2,10,11,12,13,3,4]))),ta=X.lazy(()=>ie(()=>import("./OpenClass-C1Ga1Tdx.js"),__vite__mapDeps([38,1,2,10,11,12,13,3,4]))),aa=X.lazy(()=>ie(()=>import("./SportsmanClass-BzQrDaVu.js"),__vite__mapDeps([39,1,2,10,11,12,13,3,4]))),sa=X.lazy(()=>ie(()=>import("./CagedCloneClass-CkEe1H5h.js"),__vite__mapDeps([40,1,2,10,11,12,13,3,4]))),ra=X.lazy(()=>ie(()=>import("./Contact-DWAzgVC0.js"),__vite__mapDeps([41,1,2,3,4]))),na=X.lazy(()=>ie(()=>import("./Affiliates-CDg1k9jp.js"),__vite__mapDeps([42,1,2,3]))),ia=X.lazy(()=>ie(()=>import("./PartnerWithUs-C8oFqf0_.js"),__vite__mapDeps([43,1,2,3,4]))),oa=X.lazy(()=>ie(()=>import("./SwapMeet-BcfoM-Wl.js"),__vite__mapDeps([44,1,2,45,46,47,48,3,4]))),la=X.lazy(()=>ie(()=>import("./Profile-BAsPAFff.js"),__vite__mapDeps([49,1,2,50,3,47,51,4]))),ca=X.lazy(()=>ie(()=>import("./UserProfile-DjXAt7bv.js"),__vite__mapDeps([52,1,2,53,45,46,47,54,3,4]))),da=X.lazy(()=>ie(()=>import("./RacingCommunity-BT-duP6T.js"),__vite__mapDeps([55,1,2,56,48,46,47,3,54,4]))),ma=X.lazy(()=>ie(()=>import("./PostView-D7ds0y_F.js"),__vite__mapDeps([57,1,2,56,48,46,47,58,3,4,59]))),ua=X.lazy(()=>ie(()=>import("./TireTool-DN4rRRHw.js"),__vite__mapDeps([60,1,2,61,12,3,4]))),ha=X.lazy(()=>ie(()=>import("./Friends-D97vxDWe.js"),__vite__mapDeps([62,1,2,53,3,4]))),xa=X.lazy(()=>ie(()=>import("./SavedSetups-BSpiNkPK.js").then(e=>e.S),__vite__mapDeps([63,1,2,11,3]))),pa=X.lazy(()=>ie(()=>import("./Subscription-DAfA9ibB.js"),__vite__mapDeps([64,1,2,50,3,4]))),ga=X.lazy(()=>ie(()=>import("./SubscriptionSuccess-Bnv6pRvE.js"),__vite__mapDeps([65,1,2,3]))),fa=X.lazy(()=>ie(()=>import("./SubscriptionCancel-BeRQpd6L.js"),__vite__mapDeps([66,1,2,3]))),ba=X.lazy(()=>ie(()=>import("./TermsOfService-DZ-91U3f.js"),__vite__mapDeps([67,1,2,3,4]))),ya=X.lazy(()=>ie(()=>import("./Privacy-4crUgtae.js"),__vite__mapDeps([68,1,2,3]))),ja=X.lazy(()=>ie(()=>import("./AdvertiserTerms-C4FdwTfo.js"),__vite__mapDeps([69,1,2,3]))),va=X.lazy(()=>ie(()=>import("./MotorWear-CKDA675t.js"),__vite__mapDeps([70,1,2,71,3,4]))),wa=X.lazy(()=>ie(()=>import("./MaintenanceChecklist-BYDnKQAT.js"),__vite__mapDeps([72,1,2,73,3,4]))),Na=X.lazy(()=>ie(()=>import("./Tools-B7N3Xoyr.js"),__vite__mapDeps([74,1,2,3,4]))),ka=X.lazy(()=>ie(()=>import("./SocialMedia-BlG38kly.js"),__vite__mapDeps([75,1,2,3]))),_a=X.lazy(()=>ie(()=>import("./QRCodeDownload-D_egV5ht.js"),__vite__mapDeps([76,1,2,51])));function Ca(){return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-brand-black",children:s.jsxs("div",{className:"text-center",children:[s.jsx(i,{className:"w-12 h-12 animate-spin text-brand-gold mx-auto mb-4"}),s.jsx("p",{className:"text-gray-400",children:"Loading..."})]})})}function Sa(){const{pathname:e}=J();return X.useEffect(()=>{window.scrollTo(0,0)},[e]),null}const Ea={Vehicles:[{name:"Sprint Cars",subcategories:[{name:"Wingless Sprints",path:"/wingless"},{name:"Crate Sprints",path:"/crate"},{name:"360 Sprints",path:"/360"},{name:"410 Sprints",path:"/410"},{name:"Non-Winged 410 Sprints",path:"/nonwinged410"},{name:"600 Micro",path:"/600"},{name:"Mini Sprint",path:"/mini"},{name:"Jr Sprint",path:"/jr"}]},{name:"Midget Cars",subcategories:[{name:"Quarter Midget",path:"/quarter"},{name:"Focus Midget",path:"/focus"}]},{name:"Modifieds",subcategories:[{name:"Dirt Modified 2",path:"/modified2"},{name:"UMP Modifieds",path:"/ump-modified"},{name:"IMCA Modifieds",path:"/imca-modified"},{name:"IMCA SportMods",path:"/imca-sportmod"},{name:"B-Modifieds",path:"/b-modified"}]},{name:"Late Models",subcategories:[{name:"Late Model Dirt",path:"/latemodel"},{name:"Crate Late Models",path:"/crate-latemodel"},{name:"Super Late Model",path:"/super-latemodel"}]},{name:"Stock Cars",subcategories:[{name:"Street Stocks",path:"/street-stock"}]},{name:"Youth Racing / Kart",subcategories:[{name:"Outlaw Kart",path:"/outlaw"},{name:"LO206 Kart",path:"/lo206-kart"},{name:"Restricted Box Stock",path:"/restricted-boxstock"},{name:"Box Stock Class",path:"/boxstock"},{name:"250 Intermediate",path:"/intermediate250"},{name:"Open Intermediate",path:"/open-intermediate"},{name:"Open Class",path:"/open-class"},{name:"Sportsman Class",path:"/sportsman"},{name:"Caged Clone Class",path:"/caged-clone"}]}]};function Pa(){const[e,t]=X.useState(!1),[a,r]=X.useState(!1),[i,o]=X.useState(0),[l,c]=X.useState(!1),[d,m]=X.useState(null),[u,h]=X.useState(null),[x,p]=X.useState(!0),[g,f]=X.useState(!1),b=J(),{user:y}=pe(),{showNav:j}=function(){const e=X.useContext(Te);if(void 0===e)throw new Error("useNavVisibility must be used within a NavVisibilityProvider");return e}(),v="/"===b.pathname;(()=>{const[e,t]=X.useState(!1),[a,s]=X.useState(null);X.useEffect(()=>(Ve.isNativePlatform()&&r(),()=>{Ve.isNativePlatform()&&rt.removeAllListeners()}),[]);const r=async()=>{let e=await rt.checkPermissions();"prompt"===e.receive&&(e=await rt.requestPermissions()),"granted"===e.receive&&(await rt.register(),await rt.addListener("registration",async e=>{s(e.value),await n(e.value),t(!0)}),await rt.addListener("registrationError",e=>{}),await rt.addListener("pushNotificationReceived",e=>{}),await rt.addListener("pushNotificationActionPerformed",e=>{}))},n=async e=>{try{const{data:{user:t}}=await ce.auth.getUser();if(!t)return;const a=Ve.getPlatform(),s={platform:a,userAgent:navigator.userAgent,timestamp:(new Date).toISOString()},{error:r}=await ce.from("push_notification_tokens").upsert({user_id:t.id,token:e,platform:a,device_info:s,last_used:(new Date).toISOString()},{onConflict:"token"})}catch(La){}}})(),X.useEffect(()=>{"true"===sessionStorage.getItem("hasSeenVideoSplash")&&(f(!0),p(!1))},[]);X.useEffect(()=>{const e=()=>{const e=window.scrollY;c(e>i&&e>100),o(e)};return window.addEventListener("scroll",e,{passive:!0}),()=>window.removeEventListener("scroll",e)},[i]);const w=()=>{t(!e),document.documentElement.classList.toggle("dark")},N=()=>{r(!1)};return x&&!g?s.jsx(pt,{onComplete:()=>{p(!1),f(!0),sessionStorage.setItem("hasSeenVideoSplash","true")}}):y&&v?s.jsx(Z,{to:"/home",replace:!0}):v?s.jsxs("div",{className:e?"dark":"light",children:[s.jsx(ee,{children:s.jsx(te,{path:"/",element:s.jsx(Nt,{})})}),s.jsx(Ye,{})]}):s.jsxs("div",{className:"min-h-screen "+(e?"dark":"light"),children:[s.jsxs("div",{className:"bg-pattern-wrapper",children:[s.jsx("div",{className:"bg-pattern"}),s.jsx("div",{className:"bg-pattern-overlay"})]}),s.jsx(xt,{}),j&&s.jsx("nav",{className:"fixed top-safe-top left-0 right-0 z-[1000] px-4 py-2 transition-all duration-300 "+(l&&!a?"-translate-y-full":"translate-y-0"),children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsx("div",{className:"glass-nav rounded-2xl backdrop-blur-lg border border-white/10 shadow-lg transition-all duration-300",children:s.jsxs("div",{className:"flex items-center justify-between h-16 px-4",children:[s.jsx("div",{className:"flex items-center",children:s.jsx(ae,{to:"/home",className:"flex items-center transition-transform hover:scale-105",children:s.jsx("img",{src:"/android-icon-192-192.png",alt:"PIT-BOX.COM Logo",className:"h-10 w-auto drop-shadow-lg"})})}),s.jsxs("div",{className:"hidden md:flex md:items-center md:space-x-1",children:[s.jsx(ae,{to:"/home",className:({isActive:e})=>`\n                      nav-link px-4 py-2 rounded-lg transition-all duration-200\n                      ${e?"bg-brand-gold/10 text-brand-gold":"hover:bg-gray-100/10"}\n                    `,onClick:N,children:"Home"}),s.jsx(ae,{to:"/community",className:({isActive:e})=>`\n                      nav-link px-4 py-2 rounded-lg transition-all duration-200\n                      ${e?"bg-brand-gold/10 text-brand-gold":"hover:bg-gray-100/10"}\n                    `,onClick:N,children:"Pit Community"}),s.jsx(ae,{to:"/swap-meet",className:({isActive:e})=>`\n                      nav-link px-4 py-2 rounded-lg transition-all duration-200\n                      ${e?"bg-brand-gold/10 text-brand-gold":"hover:bg-gray-100/10"}\n                    `,onClick:N,children:"Swap Meet"}),s.jsx(ae,{to:"/tools",className:({isActive:e})=>`\n                      nav-link px-4 py-2 rounded-lg transition-all duration-200\n                      ${e?"bg-brand-gold/10 text-brand-gold":"hover:bg-gray-100/10"}\n                    `,onClick:N,children:"Racing Tools"}),s.jsx(ae,{to:"/contact",className:({isActive:e})=>`\n                      nav-link px-4 py-2 rounded-lg transition-all duration-200\n                      ${e?"bg-brand-gold/10 text-brand-gold":"hover:bg-gray-100/10"}\n                    `,onClick:N,children:"Contact"}),s.jsx(ae,{to:"/affiliates",className:({isActive:e})=>`\n                      nav-link px-4 py-2 rounded-lg transition-all duration-200\n                      ${e?"bg-brand-gold/10 text-brand-gold":"hover:bg-gray-100/10"}\n                    `,onClick:N,children:"Affiliates"}),s.jsx(ae,{to:"/social",className:({isActive:e})=>`\n                      nav-link px-4 py-2 rounded-lg transition-all duration-200\n                      ${e?"bg-brand-gold/10 text-brand-gold":"hover:bg-gray-100/10"}\n                    `,onClick:N,children:"Follow Us"}),s.jsx("div",{className:"ml-2 pl-2 border-l border-gray-200/10",children:s.jsx(Re,{className:"nav-link"})}),s.jsx("button",{onClick:w,className:"p-2 rounded-lg hover:bg-gray-100/10 transition-colors ml-2","aria-label":e?"Switch to light mode":"Switch to dark mode",children:e?s.jsx(F,{className:"w-5 h-5"}):s.jsx(B,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"md:hidden flex items-center gap-2",children:[s.jsx(Re,{className:"nav-link"}),s.jsx("button",{onClick:()=>r(!a),className:"p-2 rounded-lg hover:bg-gray-100/10 transition-colors","aria-label":a?"Close menu":"Open menu",children:a?s.jsx(n,{className:"w-6 h-6"}):s.jsx(W,{className:"w-6 h-6"})})]})]})}),s.jsx("div",{className:`\n                fixed inset-x-4 top-24 z-50 transform transition-all duration-300 origin-top\n                ${a?"scale-y-100 opacity-100":"scale-y-95 opacity-0 pointer-events-none"}\n              `,onTouchStart:e=>{h(null),m(e.targetTouches[0].clientY)},onTouchMove:e=>{h(e.targetTouches[0].clientY)},onTouchEnd:()=>{d&&u&&d-u>50&&N()},children:s.jsx("div",{className:"glass-nav rounded-2xl backdrop-blur-lg border border-white/10 shadow-lg overflow-hidden",children:s.jsxs("div",{className:"p-4 space-y-1",children:[s.jsx(ae,{to:"/home",className:({isActive:e})=>`\n                      block px-4 py-3 rounded-lg transition-all duration-200\n                      ${e?"bg-brand-gold/10 text-brand-gold":"hover:bg-gray-100/10"}\n                    `,onClick:N,children:"Home"}),s.jsx(ae,{to:"/community",className:({isActive:e})=>`\n                      block px-4 py-3 rounded-lg transition-all duration-200\n                      ${e?"bg-brand-gold/10 text-brand-gold":"hover:bg-gray-100/10"}\n                    `,onClick:N,children:"Pit Community"}),s.jsx(ae,{to:"/swap-meet",className:({isActive:e})=>`\n                      block px-4 py-3 rounded-lg transition-all duration-200\n                      ${e?"bg-brand-gold/10 text-brand-gold":"hover:bg-gray-100/10"}\n                    `,onClick:N,children:"Swap Meet"}),s.jsx(ae,{to:"/tools",className:({isActive:e})=>`\n                      block px-4 py-3 rounded-lg transition-all duration-200\n                      ${e?"bg-brand-gold/10 text-brand-gold":"hover:bg-gray-100/10"}\n                    `,onClick:N,children:"Racing Tools"}),s.jsx(ae,{to:"/contact",className:({isActive:e})=>`\n                      block px-4 py-3 rounded-lg transition-all duration-200\n                      ${e?"bg-brand-gold/10 text-brand-gold":"hover:bg-gray-100/10"}\n                    `,onClick:N,children:"Contact"}),s.jsx(ae,{to:"/affiliates",className:({isActive:e})=>`\n                      block px-4 py-3 rounded-lg transition-all duration-200\n                      ${e?"bg-brand-gold/10 text-brand-gold":"hover:bg-gray-100/10"}\n                    `,onClick:N,children:"Affiliates"}),s.jsx(ae,{to:"/social",className:({isActive:e})=>`\n                      block px-4 py-3 rounded-lg transition-all duration-200\n                      ${e?"bg-brand-gold/10 text-brand-gold":"hover:bg-gray-100/10"}\n                    `,onClick:N,children:"Follow Us"}),s.jsx("div",{className:"h-px bg-gray-200/10 my-2"}),s.jsxs("button",{onClick:()=>{w(),N()},className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-100/10 transition-colors",children:[e?s.jsx(F,{className:"w-5 h-5"}):s.jsx(B,{className:"w-5 h-5"}),e?"Light Mode":"Dark Mode"]})]})})})]})}),s.jsx("main",{className:"pt-24 pb-32 md:pb-8 px-4 max-w-7xl mx-auto",children:s.jsx(X.Suspense,{fallback:s.jsx(Ca,{}),children:s.jsxs(ee,{children:[s.jsx(te,{path:"/signin",element:s.jsx(Pt,{})}),s.jsx(te,{path:"/home",element:s.jsx(Et,{})}),s.jsx(te,{path:"/contact",element:s.jsx(ra,{})}),s.jsx(te,{path:"/affiliates",element:s.jsx(na,{})}),s.jsx(te,{path:"/partner-with-us",element:s.jsx(ia,{})}),s.jsx(te,{path:"/swap-meet",element:s.jsx(oa,{})}),s.jsx(te,{path:"/community",element:s.jsx(da,{})}),s.jsx(te,{path:"/community/post/:postId",element:s.jsx(ma,{})}),s.jsx(te,{path:"/profile",element:s.jsx(la,{})}),s.jsx(te,{path:"/user/:userId",element:s.jsx(ca,{})}),s.jsx(te,{path:"/friends",element:s.jsx(ha,{})}),s.jsx(te,{path:"/terms",element:s.jsx(ba,{})}),s.jsx(te,{path:"/privacy",element:s.jsx(ya,{})}),s.jsx(te,{path:"/advertiser-terms",element:s.jsx(ja,{})}),s.jsx(te,{path:"/motor-wear",element:s.jsx(va,{})}),s.jsx(te,{path:"/tools",element:s.jsx(Na,{})}),s.jsx(te,{path:"/social",element:s.jsx(ka,{})}),s.jsx(te,{path:"/qr-download",element:s.jsx(_a,{})}),s.jsx(te,{path:"/wingless",element:s.jsx(It,{})}),s.jsx(te,{path:"/crate",element:s.jsx(At,{})}),s.jsx(te,{path:"/360",element:s.jsx(Ot,{})}),s.jsx(te,{path:"/410",element:s.jsx(Tt,{})}),s.jsx(te,{path:"/nonwinged410",element:s.jsx(Lt,{})}),s.jsx(te,{path:"/600",element:s.jsx(Vt,{})}),s.jsx(te,{path:"/mini",element:s.jsx($t,{})}),s.jsx(te,{path:"/jr",element:s.jsx(qt,{})}),s.jsx(te,{path:"/quarter",element:s.jsx(Ft,{})}),s.jsx(te,{path:"/focus",element:s.jsx(Bt,{})}),s.jsx(te,{path:"/outlaw",element:s.jsx(Wt,{})}),s.jsx(te,{path:"/lo206-kart",element:s.jsx(Ht,{})}),s.jsx(te,{path:"/modified2",element:s.jsx(Rt,{})}),s.jsx(te,{path:"/ump-modified",element:s.jsx(Dt,{})}),s.jsx(te,{path:"/imca-modified",element:s.jsx(Mt,{})}),s.jsx(te,{path:"/imca-sportmod",element:s.jsx(zt,{})}),s.jsx(te,{path:"/b-modified",element:s.jsx(Ut,{})}),s.jsx(te,{path:"/latemodel",element:s.jsx(Xt,{})}),s.jsx(te,{path:"/crate-latemodel",element:s.jsx(Gt,{})}),s.jsx(te,{path:"/super-latemodel",element:s.jsx(Yt,{})}),s.jsx(te,{path:"/street-stock",element:s.jsx(Jt,{})}),s.jsx(te,{path:"/restricted-boxstock",element:s.jsx(Kt,{})}),s.jsx(te,{path:"/boxstock",element:s.jsx(Qt,{})}),s.jsx(te,{path:"/intermediate250",element:s.jsx(Zt,{})}),s.jsx(te,{path:"/open-intermediate",element:s.jsx(ea,{})}),s.jsx(te,{path:"/open-class",element:s.jsx(ta,{})}),s.jsx(te,{path:"/sportsman",element:s.jsx(aa,{})}),s.jsx(te,{path:"/caged-clone",element:s.jsx(sa,{})}),s.jsx(te,{path:"/tire-tool",element:s.jsx(ua,{})}),s.jsx(te,{path:"/setups/:carType",element:s.jsx(xa,{})}),s.jsx(te,{path:"/subscription",element:s.jsx(pa,{})}),s.jsx(te,{path:"/subscription/success",element:s.jsx(ga,{})}),s.jsx(te,{path:"/subscription/cancel",element:s.jsx(fa,{})}),s.jsx(te,{path:"/maintenance",element:s.jsx(wa,{})}),s.jsx(te,{path:"/",element:s.jsx(Z,{to:"/home",replace:!0})})]})})}),s.jsx(Ye,{})]})}function Ia(){return s.jsx(Q,{children:s.jsx(xe,{children:s.jsx(be,{children:s.jsx(Ae,{children:s.jsxs(Le,{children:[s.jsx(Sa,{}),s.jsx(Pa,{})]})})})})})}class Aa extends G.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){}render(){var e;return this.state.hasError?this.props.fallback||s.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:s.jsxs("div",{className:"glass-panel p-8 max-w-lg text-center",children:[s.jsx(d,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),s.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Something went wrong"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:(null==(e=this.state.error)?void 0:e.message)||"An unexpected error occurred"}),s.jsx("button",{onClick:()=>window.location.reload(),className:"btn-primary",children:"Reload Page"})]})}):this.props.children}}const Oa={setups:{maxAge:6048e5,priority:"high"},tracks:{maxAge:2592e6,priority:"high"},profile:{maxAge:864e5,priority:"medium"},friends:{maxAge:864e5,priority:"medium"},checklists:{maxAge:2592e6,priority:"high"},lapTimes:{maxAge:6048e5,priority:"medium"},trackConditions:{maxAge:216e5,priority:"low"}},Ta=new class{constructor(){a(this,"dbName","pitbox_offline_cache"),a(this,"version",1),a(this,"db",null)}async init(){return new Promise((e,t)=>{const a=indexedDB.open(this.dbName,this.version);a.onerror=()=>t(a.error),a.onsuccess=()=>{this.db=a.result,e()},a.onupgradeneeded=e=>{const t=e.target.result;if(!t.objectStoreNames.contains("cache")){const e=t.createObjectStore("cache",{keyPath:"key"});e.createIndex("timestamp","timestamp"),e.createIndex("priority","priority")}t.objectStoreNames.contains("pending_operations")||t.createObjectStore("pending_operations",{keyPath:"id",autoIncrement:!0})}})}async set(e,t,a){this.db||await this.init();const s={...Oa[e.split(":")[0]],...a},r=this.db.transaction(["cache"],"readwrite").objectStore("cache"),n={key:e,data:t,timestamp:Date.now(),maxAge:s.maxAge,priority:s.priority};return new Promise((e,t)=>{const a=r.put(n);a.onsuccess=()=>e(),a.onerror=()=>t(a.error)})}async get(e){this.db||await this.init();const t=this.db.transaction(["cache"],"readonly").objectStore("cache");return new Promise((a,s)=>{const r=t.get(e);r.onsuccess=()=>{const t=r.result;if(t)return Date.now()-t.timestamp>t.maxAge?(this.delete(e),void a(null)):void a(t.data);a(null)},r.onerror=()=>s(r.error)})}async delete(e){this.db||await this.init();const t=this.db.transaction(["cache"],"readwrite").objectStore("cache");return new Promise((a,s)=>{const r=t.delete(e);r.onsuccess=()=>a(),r.onerror=()=>s(r.error)})}async clear(){this.db||await this.init();const e=this.db.transaction(["cache"],"readwrite").objectStore("cache");return new Promise((t,a)=>{const s=e.clear();s.onsuccess=()=>t(),s.onerror=()=>a(s.error)})}async addPendingOperation(e){this.db||await this.init();const t=this.db.transaction(["pending_operations"],"readwrite").objectStore("pending_operations");return new Promise((a,s)=>{const r=t.add({...e,timestamp:Date.now()});r.onsuccess=()=>a(r.result),r.onerror=()=>s(r.error)})}async getPendingOperations(){this.db||await this.init();const e=this.db.transaction(["pending_operations"],"readonly").objectStore("pending_operations");return new Promise((t,a)=>{const s=e.getAll();s.onsuccess=()=>t(s.result),s.onerror=()=>a(s.error)})}async removePendingOperation(e){this.db||await this.init();const t=this.db.transaction(["pending_operations"],"readwrite").objectStore("pending_operations");return new Promise((a,s)=>{const r=t.delete(e);r.onsuccess=()=>a(),r.onerror=()=>s(r.error)})}async syncPendingOperations(){const e=await this.getPendingOperations();for(const t of e)try{"insert"===t.type?await ce.from(t.table).insert(t.data):"update"===t.type?await ce.from(t.table).update(t.data).eq("id",t.id):"delete"===t.type&&await ce.from(t.table).delete().eq("id",t.id),await this.removePendingOperation(t.id)}catch(La){}}async cacheUserSetups(e){try{const{data:t,error:a}=await ce.from("setups").select("*").eq("user_id",e).order("created_at",{ascending:!1}).limit(100);if(a)throw a;return await this.set(`setups:${e}`,t),t}catch(La){return await this.get(`setups:${e}`)}}async cacheTrackLocations(){try{const{data:e,error:t}=await ce.from("track_locations").select("*");if(t)throw t;return await this.set("tracks:all",e),e}catch(La){return await this.get("tracks:all")}}async cacheMaintenanceChecklists(e){try{const{data:t,error:a}=await ce.from("maintenance_checklists").select("*").eq("car_class",e);if(a)throw a;return await this.set(`checklists:${e}`,t),t}catch(La){return await this.get(`checklists:${e}`)}}async prefetchForTrack(e,t){try{const[a,s,r]=await Promise.all([ce.from("setups").select("*").eq("user_id",t).order("created_at",{ascending:!1}),ce.from("track_conditions").select("*").eq("track_id",e).gte("reported_at",new Date(Date.now()-864e5).toISOString()),ce.from("lap_times").select("*").eq("user_id",t).eq("track_id",e)]);await Promise.all([this.set(`setups:${t}:${e}`,a.data),this.set(`conditions:${e}`,s.data),this.set(`laptimes:${t}:${e}`,r.data)])}catch(La){}}};(async()=>{if(Ve.isNativePlatform())try{await vt.setStyle({style:ft.Dark}),await vt.setBackgroundColor({color:"#1A1A1A"}),await wt.hide({fadeOutDuration:500})}catch(La){}})(),(async()=>{try{await Ta.init(),window.addEventListener("online",()=>{Ta.syncPendingOperations()});const{data:{user:e}}=await ce.auth.getUser();e&&await Promise.all([Ta.cacheUserSetups(e.id),Ta.cacheTrackLocations()])}catch(La){}})(),e(document.getElementById("root")).render(s.jsx(X.StrictMode,{children:s.jsx(Aa,{children:s.jsx(Ia,{})})}));export{Ve as C,Je as G,_t as L,kt as S,qe as W,ie as _,ue as a,dt as b,ye as c,ht as d,ut as e,Oe as f,mt as g,st as h,nt as i,Ke as j,tt as k,Ct as l,it as m,ot as n,lt as o,Pe as p,Ze as q,$e as r,ce as s,ct as t,pe as u,Ea as v,Ue as w,He as x};
