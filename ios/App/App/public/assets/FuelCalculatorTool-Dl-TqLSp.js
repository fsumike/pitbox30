import{j as e,O as a,aA as s}from"./ui-a5pT2S0L.js";import{r as t}from"./react-CLW9qjVv.js";import{u as l,s as r}from"./index-DMaHBciH.js";import"./supabase-Dols_XF-.js";import"./router-CsjlwGXH.js";function n(){const{user:n}=l(),[i,c]=t.useState({tankCapacity:22,raceLaps:30,fuelPerLap:1,safetyMargin:2}),d=(()=>{const{tankCapacity:e,raceLaps:a,fuelPerLap:s,safetyMargin:t}=i,l=a*s+t,r=Math.min(l,e),n=l<=e,c=Math.max(0,e-l),d=Math.max(0,l-e),x=6.6*c,o=Math.floor((e-t)/s);return{totalFuelNeeded:l.toFixed(1),startingFuel:r.toFixed(1),canComplete:n,excessFuel:c.toFixed(1),shortfall:d.toFixed(1),weightPenalty:x.toFixed(1),maxLapsOnTank:o}})();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Race Parameters"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Fuel Tank Capacity (gallons)"}),e.jsx("input",{type:"number",value:i.tankCapacity,onChange:e=>c({...i,tankCapacity:parseFloat(e.target.value)}),className:"w-full p-3 rounded-lg",step:"1"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Total capacity of your fuel cell"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Race Distance (laps)"}),e.jsx("input",{type:"number",value:i.raceLaps,onChange:e=>c({...i,raceLaps:parseInt(e.target.value)}),className:"w-full p-3 rounded-lg",step:"5"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Expected number of laps"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Fuel Consumption (gal/lap)"}),e.jsx("input",{type:"number",value:i.fuelPerLap,onChange:e=>c({...i,fuelPerLap:parseFloat(e.target.value)}),className:"w-full p-3 rounded-lg",step:"0.1"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Typical range: 0.8-1.5 gal/lap (methanol)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Safety Margin (gallons)"}),e.jsx("input",{type:"number",value:i.safetyMargin,onChange:e=>c({...i,safetyMargin:parseFloat(e.target.value)}),className:"w-full p-3 rounded-lg",step:"0.5"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Extra fuel buffer for safety"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Fuel Strategy"}),e.jsxs("div",{className:"rounded-lg p-6 "+(d.canComplete?"bg-green-50 dark:bg-green-900/20":"bg-red-50 dark:bg-red-900/20"),children:[e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Race Status"}),e.jsx("div",{className:"text-2xl font-bold "+(d.canComplete?"text-green-600":"text-red-600"),children:d.canComplete?"✓ Can Complete":"✗ Fuel Short"}),!d.canComplete&&e.jsxs("p",{className:"text-sm text-red-600 mt-2",children:["Need ",d.shortfall," more gallons"]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-6",children:[e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Fuel Needed"}),e.jsxs("div",{className:"text-4xl font-bold text-blue-600",children:[d.totalFuelNeeded," gal"]}),e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:["Including ",i.safetyMargin," gal safety margin"]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Starting Fuel"}),e.jsxs("span",{className:"font-semibold",children:[d.startingFuel," gal"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Max Laps Possible"}),e.jsxs("span",{className:"font-semibold",children:[d.maxLapsOnTank," laps"]})]}),parseFloat(d.excessFuel)>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Excess Fuel"}),e.jsxs("span",{className:"font-semibold text-orange-600",children:[d.excessFuel," gal"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Weight Penalty"}),e.jsxs("span",{className:"font-semibold text-orange-600",children:[d.weightPenalty," lbs"]})]})]})]}),n&&e.jsxs("button",{onClick:async()=>{if(!n)return;const{error:e}=await r.from("fuel_logs").insert({user_id:n.id,track_name:"Quick Calculation",laps_completed:i.raceLaps,fuel_used:parseFloat(d.totalFuelNeeded),fuel_per_lap:i.fuelPerLap,starting_fuel:parseFloat(d.startingFuel)});e||alert("Fuel log saved!")},className:"w-full px-4 py-3 bg-brand-gold text-white rounded-lg hover:bg-brand-gold-dark inline-flex items-center justify-center gap-2",children:[e.jsx(a,{className:"w-5 h-5"}),"Save Fuel Log"]})]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[e.jsx(s,{className:"w-5 h-5 text-blue-600"}),"Methanol Fuel Strategy Tips"]}),e.jsxs("ul",{className:"text-sm space-y-1 text-gray-600 dark:text-gray-400",children:[e.jsx("li",{children:"• Methanol weighs approximately 6.6 lbs/gallon"}),e.jsx("li",{children:"• Methanol engines use roughly 2x more fuel than gasoline engines"}),e.jsx("li",{children:"• Less fuel = lighter car = better handling and speed"}),e.jsx("li",{children:"• Track your actual consumption during practice sessions"}),e.jsx("li",{children:"• Factor in caution laps for longer races (reduced consumption)"}),e.jsx("li",{children:"• Always include a safety margin for unexpected conditions"}),e.jsx("li",{children:"• Yellow flags reduce consumption, green racing increases it"}),e.jsx("li",{children:"• Methanol provides better cooling and higher compression ratios"})]})]})]})}export{n as default};
