import{j as e,af as s,a$ as a,L as t,O as r}from"./ui-v2ReSvUE.js";import{r as l}from"./react-YWE4JMTy.js";import{u as i,s as d}from"./index-Cgc97SP_.js";import"./router-BNBI7_bc.js";import"./supabase-Du4GZSDg.js";function n(){const{user:n}=i(),[c,x]=l.useState({leftRearCirc:84,rightRearCirc:86,trackWidth:72,turnRadius:500}),[m,g]=l.useState(""),[o,h]=l.useState(!1),[u,j]=l.useState(!1),p=(()=>{const{leftRearCirc:e,rightRearCirc:s,trackWidth:a,turnRadius:t}=c,r=s-e,l=e/(2*Math.PI),i=s/(2*Math.PI),d=t-a/2,n=t+a/2,x=2*Math.PI*d,m=2*Math.PI*n,g=x/e,o=m/s,h=Math.abs(o-g),u=r/e*100,j=m/g-e;return{stagger:r.toFixed(2),leftRearRadius:l.toFixed(2),rightRearRadius:i.toFixed(2),leftTireRevs:g.toFixed(2),rightTireRevs:o.toFixed(2),revDifference:h.toFixed(2),percentageDifference:u.toFixed(2),recommendedStagger:j.toFixed(2)}})(),f=(b=parseFloat(p.stagger))<1?{text:"Tight Setup",color:"text-red-600"}:b>2.5?{text:"Loose Setup",color:"text-blue-600"}:{text:"Balanced Setup",color:"text-green-600"};var b;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Tire Specifications"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Left Rear Circumference (inches)"}),e.jsx("input",{type:"number",value:c.leftRearCirc,onChange:e=>x({...c,leftRearCirc:parseFloat(e.target.value)||0}),className:"w-full p-3 rounded-lg",step:"0.1"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Measured or calculated tire circumference"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Right Rear Circumference (inches)"}),e.jsx("input",{type:"number",value:c.rightRearCirc,onChange:e=>x({...c,rightRearCirc:parseFloat(e.target.value)||0}),className:"w-full p-3 rounded-lg",step:"0.1"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Right rear is typically larger"})]}),e.jsx("h3",{className:"font-semibold text-lg pt-4",children:"Track Information"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Rear Track Width (inches)"}),e.jsx("input",{type:"number",value:c.trackWidth,onChange:e=>x({...c,trackWidth:parseFloat(e.target.value)||0}),className:"w-full p-3 rounded-lg",step:"1"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Center-to-center distance between rear tires"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Average Turn Radius (feet)"}),e.jsx("input",{type:"number",value:c.turnRadius,onChange:e=>x({...c,turnRadius:parseFloat(e.target.value)||0}),className:"w-full p-3 rounded-lg",step:"50"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Smaller tracks need more stagger (300-400ft)",e.jsx("br",{}),"Larger tracks need less stagger (600-800ft)"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Stagger Analysis"}),e.jsxs("div",{className:"bg-gradient-to-br from-brand-gold/10 to-brand-gold-dark/10 rounded-lg p-6",children:[e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Current Stagger"}),e.jsxs("div",{className:"text-4xl font-bold text-brand-gold",children:[p.stagger,'"']}),e.jsx("p",{className:`text-sm font-semibold mt-2 ${f.color}`,children:f.text})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-500/10 to-blue-600/10 rounded-lg p-6",children:[e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Recommended Stagger"}),e.jsxs("div",{className:"text-4xl font-bold text-blue-600",children:[p.recommendedStagger,'"']}),e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-2",children:["For ",c.turnRadius,"ft radius turns"]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"LR Radius"}),e.jsxs("span",{className:"font-semibold",children:[p.leftRearRadius,'"']})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"RR Radius"}),e.jsxs("span",{className:"font-semibold",children:[p.rightRearRadius,'"']})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Stagger %"}),e.jsxs("span",{className:"font-semibold",children:[p.percentageDifference,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Revolution Difference"}),e.jsx("span",{className:"font-semibold",children:p.revDifference})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Typical Stagger Ranges"}),e.jsxs("div",{className:"space-y-1 text-xs text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Small Tight Tracks:"}),e.jsx("span",{className:"font-medium",children:'2.0-3.0"'})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Medium Tracks:"}),e.jsx("span",{className:"font-medium",children:'1.5-2.5"'})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Large Fast Tracks:"}),e.jsx("span",{className:"font-medium",children:'1.0-1.5"'})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Road Courses:"}),e.jsx("span",{className:"font-medium",children:'0.5-1.0"'})]})]})]}),n&&e.jsxs("button",{onClick:()=>h(!0),className:"w-full px-4 py-3 bg-brand-gold text-white rounded-lg hover:bg-brand-gold-dark inline-flex items-center justify-center gap-2",children:[e.jsx(s,{className:"w-5 h-5"}),"Save Stagger Calculation"]})]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[e.jsx(a,{className:"w-5 h-5 text-blue-600"}),"Stagger Tips"]}),e.jsxs("ul",{className:"text-sm space-y-1 text-gray-600 dark:text-gray-400",children:[e.jsx("li",{children:"• More stagger = car wants to turn left (loose)"}),e.jsx("li",{children:"• Less stagger = car wants to go straight (tight)"}),e.jsx("li",{children:"• Stagger affects mid-corner handling primarily"}),e.jsx("li",{children:"• Too much stagger can make car unstable on entry"}),e.jsx("li",{children:"• Heavier tracks typically need more stagger"}),e.jsx("li",{children:"• Slick tracks typically need less stagger"}),e.jsx("li",{children:'• Adjust in 0.25-0.5" increments and test'}),e.jsx("li",{children:"• Consider tire wear when setting stagger"})]})]}),o&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Save Stagger Calculation"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Setup Name *"}),e.jsx("input",{type:"text",value:m,onChange:e=>g(e.target.value),className:"w-full p-3 rounded-lg",placeholder:"e.g., Eldora 2.0 Stagger",required:!0})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600",children:"Cancel"}),e.jsxs("button",{onClick:async()=>{if(!n||!m.trim())return;j(!0);const{error:e}=await d.from("saved_calculations").insert({user_id:n.id,calculation_type:"stagger",name:m,inputs:c,results:p});e||(g(""),h(!1)),j(!1)},disabled:u||!m.trim(),className:"px-4 py-2 bg-brand-gold text-white rounded-lg hover:bg-brand-gold-dark disabled:opacity-50 flex items-center gap-2",children:[u?e.jsx(t,{className:"w-4 h-4 animate-spin"}):e.jsx(r,{className:"w-4 h-4"}),"Save"]})]})]})]})})})]})}export{n as default};
