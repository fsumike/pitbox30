import{t,c as n,g as a,e,a as r,m as o,b as s}from"./format-DltpeZFQ.js";function u(t,n,a,e){const r=i(a-t),o=i(e-n),s=Math.sin(r/2)*Math.sin(r/2)+Math.cos(i(t))*Math.cos(i(a))*Math.sin(o/2)*Math.sin(o/2);return 2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s))*3959}function i(t){return t*Math.PI/180}async function c(t){try{const n=await fetch(`https://nominatim.openstreetmap.org/search?postalcode=${t}&country=US&format=json&limit=1`,{headers:{"User-Agent":"PitBox Racing App"}});if(!n.ok)return null;const a=await n.json();return a&&a.length>0?{lat:parseFloat(a[0].lat),lng:parseFloat(a[0].lon)}:null}catch(n){return null}}function f(n,a){const e=t(n),r=t(a),o=e.getTime()-r.getTime();return o<0?-1:o>0?1:o}function l(n,a){const e=t(n),r=t(a),o=f(e,r),s=Math.abs(function(n,a){const e=t(n),r=t(a);return 12*(e.getFullYear()-r.getFullYear())+(e.getMonth()-r.getMonth())}(e,r));let u;if(s<1)u=0;else{1===e.getMonth()&&e.getDate()>27&&e.setDate(30),e.setMonth(e.getMonth()-o*s);let a=f(e,r)===-o;(function(n){const a=t(n);return+function(n){const a=t(n);return a.setHours(23,59,59,999),a}(a)===+function(n){const a=t(n),e=a.getMonth();return a.setFullYear(a.getFullYear(),e+1,0),a.setHours(23,59,59,999),a}(a)})(t(n))&&1===s&&1===f(n,r)&&(a=!1),u=o*(s-Number(a))}return 0===u?0:u}function h(u,i){return function(n,u,i){const c=a(),h=(null==i?void 0:i.locale)??c.locale??e,M=f(n,u);if(isNaN(M))throw new RangeError("Invalid time value");const m=Object.assign({},i,{addSuffix:null==i?void 0:i.addSuffix,comparison:M});let d,D;M>0?(d=t(u),D=t(n)):(d=t(n),D=t(u));const g=function(n,a,e){const r=function(n,a){return+t(n)-+t(a)}(n,a)/1e3;return(o=null==e?void 0:e.roundingMethod,t=>{const n=(o?Math[o]:Math.trunc)(t);return 0===n?0:n})(r);var o}(D,d),p=(r(D)-r(d))/1e3,X=Math.round((g-p)/60);let x;if(X<2)return(null==i?void 0:i.includeSeconds)?g<5?h.formatDistance("lessThanXSeconds",5,m):g<10?h.formatDistance("lessThanXSeconds",10,m):g<20?h.formatDistance("lessThanXSeconds",20,m):g<40?h.formatDistance("halfAMinute",0,m):g<60?h.formatDistance("lessThanXMinutes",1,m):h.formatDistance("xMinutes",1,m):0===X?h.formatDistance("lessThanXMinutes",1,m):h.formatDistance("xMinutes",X,m);if(X<45)return h.formatDistance("xMinutes",X,m);if(X<90)return h.formatDistance("aboutXHours",1,m);if(X<o){const t=Math.round(X/60);return h.formatDistance("aboutXHours",t,m)}if(X<2520)return h.formatDistance("xDays",1,m);if(X<s){const t=Math.round(X/o);return h.formatDistance("xDays",t,m)}if(X<2*s)return x=Math.round(X/s),h.formatDistance("aboutXMonths",x,m);if(x=l(D,d),x<12){const t=Math.round(X/s);return h.formatDistance("xMonths",t,m)}{const t=x%12,n=Math.trunc(x/12);return t<3?h.formatDistance("aboutXYears",n,m):t<9?h.formatDistance("overXYears",n,m):h.formatDistance("almostXYears",n+1,m)}}(u,function(t){return n(t,Date.now())}(u),i)}export{u as c,h as f,c as g};
