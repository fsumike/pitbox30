import{j as e,af as s,aX as a,L as t,O as r}from"./ui-a5pT2S0L.js";import{r as l}from"./react-CLW9qjVv.js";import{u as i,s as d}from"./index-DMaHBciH.js";import"./supabase-Dols_XF-.js";import"./router-CsjlwGXH.js";function n(){const{user:n}=i(),[c,m]=l.useState({tireCircumference:82,engineRPM:8e3,desiredSpeed:120,rearGear:5.43,transmissionRatio:1}),[o,x]=l.useState(""),[g,u]=l.useState(!1),[p,h]=l.useState(!1),b=(()=>{const{tireCircumference:e,engineRPM:s,desiredSpeed:a,rearGear:t,transmissionRatio:r}=c,l=63360/e,i=a*t*r*l/60,d=t*r,n=s*r*l/(60*a);return{speedAtRPM:(s/(t*r*l)*60).toFixed(2),rpmAtSpeed:i.toFixed(0),finalDriveRatio:d.toFixed(2),recommendedRearGear:n.toFixed(2),tireRevolutionsPerMile:l.toFixed(0)}})();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Inputs"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tire Circumference (inches)"}),e.jsx("input",{type:"number",value:c.tireCircumference,onChange:e=>m({...c,tireCircumference:parseFloat(e.target.value)}),className:"w-full p-3 rounded-lg",step:"0.1"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Standard 15" wheel ≈ 82-86 inches'})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Engine RPM"}),e.jsx("input",{type:"number",value:c.engineRPM,onChange:e=>m({...c,engineRPM:parseFloat(e.target.value)}),className:"w-full p-3 rounded-lg",step:"100"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Typical max RPM for your engine"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Desired Speed (MPH)"}),e.jsx("input",{type:"number",value:c.desiredSpeed,onChange:e=>m({...c,desiredSpeed:parseFloat(e.target.value)}),className:"w-full p-3 rounded-lg",step:"5"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Target top speed at max RPM"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Rear Gear Ratio"}),e.jsx("input",{type:"number",value:c.rearGear,onChange:e=>m({...c,rearGear:parseFloat(e.target.value)}),className:"w-full p-3 rounded-lg",step:"0.01"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Quick change gear ratio (e.g., 5.43:1)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Transmission Ratio"}),e.jsx("input",{type:"number",value:c.transmissionRatio,onChange:e=>m({...c,transmissionRatio:parseFloat(e.target.value)}),className:"w-full p-3 rounded-lg",step:"0.01"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Usually 1.0 for direct drive"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Results"}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-500/10 to-blue-600/10 rounded-lg p-6",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:["Speed at ",c.engineRPM," RPM"]}),e.jsxs("div",{className:"text-4xl font-bold text-blue-600",children:[b.speedAtRPM," MPH"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-500/10 to-green-600/10 rounded-lg p-6",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:["RPM at ",c.desiredSpeed," MPH"]}),e.jsxs("div",{className:"text-4xl font-bold text-green-600",children:[b.rpmAtSpeed," RPM"]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Final Drive Ratio"}),e.jsxs("span",{className:"font-semibold",children:[b.finalDriveRatio,":1"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Tire Rev/Mile"}),e.jsx("span",{className:"font-semibold",children:b.tireRevolutionsPerMile})]})]}),e.jsxs("div",{className:"bg-brand-gold/10 rounded-lg p-6",children:[e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Recommended Rear Gear"}),e.jsxs("div",{className:"text-3xl font-bold text-brand-gold",children:[b.recommendedRearGear,":1"]}),e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-2",children:["To reach ",c.desiredSpeed," MPH at ",c.engineRPM," RPM"]})]}),n&&e.jsxs("button",{onClick:()=>h(!0),className:"w-full px-4 py-3 bg-brand-gold text-white rounded-lg hover:bg-brand-gold-dark inline-flex items-center justify-center gap-2",children:[e.jsx(s,{className:"w-5 h-5"}),"Save Calculation"]})]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[e.jsx(a,{className:"w-5 h-5 text-blue-600"}),"Quick Tips"]}),e.jsxs("ul",{className:"text-sm space-y-1 text-gray-600 dark:text-gray-400",children:[e.jsx("li",{children:"• Higher gear ratio = more acceleration, lower top speed"}),e.jsx("li",{children:"• Lower gear ratio = less acceleration, higher top speed"}),e.jsx("li",{children:"• Target 95-98% of max RPM at top speed for best performance"}),e.jsx("li",{children:"• Consider track length when choosing gear ratios"}),e.jsx("li",{children:"• Quick change gears typically range from 4.5:1 to 6.5:1"})]})]}),p&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Save Calculation"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Name *"}),e.jsx("input",{type:"text",value:o,onChange:e=>x(e.target.value),className:"w-full p-3 rounded-lg",placeholder:"e.g., Eldora 5.43 Setup",required:!0})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600",children:"Cancel"}),e.jsxs("button",{onClick:async()=>{if(!n||!o.trim())return;u(!0);const{error:e}=await d.from("saved_calculations").insert({user_id:n.id,calculation_type:"gear_ratio",name:o,inputs:c,results:b});e||(x(""),h(!1)),u(!1)},disabled:g||!o.trim(),className:"px-4 py-2 bg-brand-gold text-white rounded-lg hover:bg-brand-gold-dark disabled:opacity-50 flex items-center gap-2",children:[g?e.jsx(t,{className:"w-4 h-4 animate-spin"}):e.jsx(r,{className:"w-4 h-4"}),"Save"]})]})]})]})})})]})}export{n as default};
