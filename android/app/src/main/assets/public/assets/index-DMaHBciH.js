const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/web-Nl3H63MX.js","assets/ui-a5pT2S0L.js","assets/react-CLW9qjVv.js","assets/supabase-Dols_XF-.js","assets/router-CsjlwGXH.js","assets/web-DGEEeSm5.js","assets/web-h9EUWZQp.js","assets/web-C5fr-DBe.js","assets/index-QNObs8UV.js","assets/web-ld2oWJ7q.js","assets/WinglessSprints-KPYRDP9e.js","assets/CarNumberBox-CKGlQgCt.js","assets/index-AOZq4f70.js","assets/NumberInput-CV0vNO3q.js","assets/useShocks-Bo_tGHwI.js","assets/CrateSprints-B76e4m4E.js","assets/Sprint360-DMsL5884.js","assets/Sprint410-B4PiOdPm.js","assets/NonWinged410-CmV_lRga.js","assets/DirtModified2-mnGTMioQ.js","assets/UMPModified-oefWF-tz.js","assets/IMCAModifieds-UReNUvJA.js","assets/IMCASportMods-DK7ytuSO.js","assets/BModified-D8HlulAF.js","assets/Micro600-3DAa6vB3.js","assets/MiniSprint-Ce6kIQpE.js","assets/JrSprint-BhT78FRR.js","assets/QuarterMidget-Dijd-s80.js","assets/FocusMidget-YZFlKdPQ.js","assets/OutlawKart-D9c1qv0l.js","assets/LO206Kart-C6-dUFiP.js","assets/LateDirt-DM-5wMiB.js","assets/CrateLateMod-Cmvf4d1O.js","assets/SuperLateModel-B88zyGPV.js","assets/StreetStock-Dm1E4rlT.js","assets/RestrictedBoxStock-0ZpUIpvl.js","assets/BoxStock-o6-QWb67.js","assets/Intermediate250-CTICFcas.js","assets/OpenIntermediate-qNUn3YHu.js","assets/OpenClass-CV1CL1Qt.js","assets/SportsmanClass-DXhBNuH-.js","assets/CagedCloneClass-CS1a7iI9.js","assets/Contact-CrD0nIuJ.js","assets/Affiliates-BBTcgnHa.js","assets/PartnerWithUs-CLagkIac.js","assets/SwapMeet-Ixob39Bf.js","assets/useListings-BLDxsOcv.js","assets/formatDistanceToNow-BW9gUOGi.js","assets/format-BBL9nE_B.js","assets/useLocation-IHyKmbze.js","assets/Profile-BQgIqWNu.js","assets/payment-router-Dyj0Mklv.js","assets/index-BIo4uvZz.js","assets/UserProfile-Y4s3HFo5.js","assets/useFriends-tNApKr2A.js","assets/usePosts-BQ8U2l2T.js","assets/RacingCommunity-C3PA4-Gi.js","assets/GifPicker-DfwbsOcT.js","assets/PostView-CR7_lTSh.js","assets/maps-DuElAWQL.js","assets/PostView-jCI8mrZJ.css","assets/TireTool-Dj5UzMRy.js","assets/TireManagement-C7vST0po.js","assets/Friends-D2xX_tiE.js","assets/SavedSetups-9NS0CcBh.js","assets/Subscription-BLJ3i6JX.js","assets/SubscriptionSuccess-CX18KuG4.js","assets/SubscriptionCancel-DAgYDahj.js","assets/TermsOfService-Dg3JiORj.js","assets/Privacy-DeyK-TFz.js","assets/AdvertiserTerms-pG5hHjUr.js","assets/MotorWear-DgwmQfp3.js","assets/useMotorHealth-B_bojcQE.js","assets/MaintenanceChecklist-DKWfNyLg.js","assets/useMaintenanceChecklists-CW4otUOv.js","assets/Tools-DtGKGT3U.js","assets/SocialMedia-DsrTJSJJ.js","assets/QRCodeDownload-2QM-1qFx.js"])))=>i.map(i=>d[i]);
import{j as e,C as t,X as a,L as s,S as r,U as n,a as i,A as o,R as l,I as c,b as d,c as m,d as u,M as h,N as x,e as p,m as g,f,g as b,h as y,D as j,i as w,G as v,Z as N,T as k,H as _,k as C,E as S,l as E,F as P,n as I,o as A,P as L,p as O,q as T,r as R,s as D,t as M,u as z,v as U,w as V,x as $,y as F}from"./ui-a5pT2S0L.js";import{b as q,r as B,d as W}from"./react-CLW9qjVv.js";import{c as H,_ as X}from"./supabase-Dols_XF-.js";import{u as G,a as Y,L as J,B as K,N as Q,R as Z,b as ee,c as te}from"./router-CsjlwGXH.js";var ae;!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var se=q;ae=se.createRoot,se.hydrateRoot;const re="https://pbfdzlkdlxbwijwwysaf.supabase.co",ne="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBiZmR6bGtkbHhid2lqd3d5c2FmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDA0NjMzNjIsImV4cCI6MjA1NjAzOTM2Mn0.HNGtEg5Tc5iAILr33HDMzbqKaV3tvpgoVr4Dv85wjEk";try{new URL(re)}catch(La){throw new Error(`Invalid VITE_SUPABASE_URL format: ${re}`)}const ie=H(re,ne,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0},global:{fetch:async(e,t)=>{const a=new AbortController,s=setTimeout((()=>a.abort()),3e4);try{const r=new Headers(null==t?void 0:t.headers);r.has("apikey")||r.set("apikey",ne),r.has("Authorization")||r.set("Authorization",`Bearer ${ne}`);const n=await fetch(e,{...t,signal:a.signal,headers:r});return clearTimeout(s),n}catch(La){if(clearTimeout(s),La instanceof DOMException&&"AbortError"===La.name)throw La;if(La instanceof TypeError&&"Failed to fetch"===La.message){if(!navigator.onLine)throw La;if("string"==typeof e&&e.includes(re))throw La;throw La}throw La}}},realtime:{params:{eventsPerSecond:10}}}),oe=async()=>{try{const{data:e,error:t}=await ie.from("profiles").select("count").limit(1);return t?{success:!1,error:t.message}:{success:!0}}catch(La){return{success:!1,error:La instanceof Error?La.message:"Unknown connection error"}}},le=Object.freeze(Object.defineProperty({__proto__:null,supabase:ie,testSupabaseConnection:oe},Symbol.toStringTag,{value:"Module"}));function ce(e={}){const{maxAttempts:t=3,initialDelay:a=1e3,maxDelay:s=1e4,backoffFactor:r=2}=e,[n,i]=B.useState(0),[o,l]=B.useState(!1);return{executeWithRetry:B.useCallback((async(e,n,o)=>{let c=null,d=a;for(let a=0;a<t;a++)try{l(a>0),i(a+1);const t=await e();return null==n||n(t),l(!1),t}catch(La){c=La instanceof Error?La:new Error("Unknown error occurred"),a<t-1&&(await new Promise((e=>setTimeout(e,d))),d=Math.min(d*r,s))}return l(!1),null==o||o(c||new Error("Failed after multiple attempts")),null}),[t,a,s,r]),attempts:n,isRetrying:o,maxAttempts:t}}const de=B.createContext(void 0);function me({children:t}){const[a,s]=B.useState(null),[r,n]=B.useState(!0),[i,o]=B.useState(null),[l,c]=B.useState(!1),{executeWithRetry:d}=ce(),m=async()=>{if(a)try{const{data:e,error:t}=await ie.from("profiles").select("has_premium").eq("id",a.id).maybeSingle();if(t)return void c(!1);c((null==e?void 0:e.has_premium)||!1)}catch(e){c(!1)}else c(!1)};return B.useEffect((()=>{(async()=>{var e,t;try{o(null);const a=await d((async()=>await oe()));if(!a.success)return o(a.error||"Failed to connect to Supabase"),void n(!1);const{data:r,error:i}=await d((async()=>{try{return await ie.auth.getSession()}catch(e){if(e instanceof DOMException&&"AbortError"===e.name)throw new Error("Request timed out. Please try again.");if(e instanceof TypeError&&"Failed to fetch"===e.message)throw new Error("Network connection failed. Please check your internet connection.");throw e}}));i?"Invalid Refresh Token: Refresh Token Not Found"===i.message?(await ie.auth.signOut(),s(null)):(o(`Authentication error: ${i.message}`),s(null)):(s((null==(e=null==r?void 0:r.session)?void 0:e.user)??null),(null==(t=null==r?void 0:r.session)?void 0:t.user)&&await m())}catch(a){const e=a instanceof Error?a.message:"Unknown initialization error";o(e),s(null)}finally{n(!1)}})();const{data:{subscription:e}}=ie.auth.onAuthStateChange((async(e,t)=>{s((null==t?void 0:t.user)??null),"SIGNED_IN"!==e&&"TOKEN_REFRESHED"!==e||o(null),(null==t?void 0:t.user)?await m():c(!1),n(!1)}));return()=>{e.unsubscribe()}}),[]),e.jsx(de.Provider,{value:{user:a,loading:r,connectionError:i,hasPremium:l,refreshPremiumStatus:m,signIn:async(e,t)=>{try{o(null);const a=await d((async()=>await oe()));if(!a.success)throw new Error(a.error||"Cannot connect to authentication service");const{data:s,error:r}=await d((async()=>{try{return await ie.auth.signInWithPassword({email:e,password:t})}catch(a){if(a instanceof DOMException&&"AbortError"===a.name)throw new Error("Sign in request timed out. Please try again.");if(a instanceof TypeError&&"Failed to fetch"===a.message)throw new Error("Network connection failed. Please check your internet connection and try again.");throw a}}));if(r)throw r;return{error:null,success:!0}}catch(La){const t=La instanceof Error?La.message:"Unknown sign in error";return o(t),{error:La,success:!1}}},signUp:async(e,t)=>{try{o(null);const a=await d((async()=>await oe()));if(!a.success)throw new Error(a.error||"Cannot connect to authentication service");const{data:s,error:r}=await d((async()=>{try{return await ie.auth.signUp({email:e,password:t,options:{emailRedirectTo:window.location.origin}})}catch(a){if(a instanceof DOMException&&"AbortError"===a.name)throw new Error("Sign up request timed out. Please try again.");if(a instanceof TypeError&&"Failed to fetch"===a.message)throw new Error("Network connection failed. Please check your internet connection and try again.");throw a}}));if(r)throw r;return{error:null,success:!0}}catch(La){const t=La instanceof Error?La.message:"Unknown sign up error";return o(t),{error:La,success:!1}}},signOut:async()=>{try{const{error:e}=await ie.auth.signOut();s(null),o(null)}catch(e){s(null)}},retryConnection:async()=>{o(null);const e=await d((async()=>await oe()));e.success||o(e.error||"Connection failed")}},children:t})}function ue(){const e=B.useContext(de);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e}function he({recipientId:n,onClose:i,isMinimized:o=!1,onMinimize:l}){var c,d,m,u;const{user:h}=ue(),[x,p]=B.useState([]),[g,f]=B.useState(""),[b,y]=B.useState(!0),[j,w]=B.useState(!1),[v,N]=B.useState(null),[k,_]=B.useState("default"),C=B.useRef(null),S=B.useRef(null);B.useEffect((()=>{I(),P(),A(),E()}),[n]),B.useEffect((()=>{L()}),[x]);const E=async()=>{if("Notification"in window){const e=await Notification.requestPermission();_(e)}},P=async()=>{try{const{data:e}=await ie.from("profiles").select("*").eq("id",n).single();e&&N(e)}catch(e){}},I=async()=>{if(h)try{const{data:e}=await ie.from("messages").select("\n          *,\n          sender:profiles!messages_sender_id_fkey (\n            username,\n            avatar_url\n          )\n        ").or(`sender_id.eq.${h.id},receiver_id.eq.${h.id}`).or(`sender_id.eq.${n},receiver_id.eq.${n}`).order("created_at",{ascending:!0});e&&p(e)}catch(e){}finally{y(!1)}},A=()=>{if(!h)return;const e=ie.channel("messages").on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`sender_id=eq.${n},receiver_id=eq.${h.id}`},(e=>{const t=e.new;p((e=>[...e,t])),(e=>{if(!("Notification"in window)||"granted"!==k||"visible"===document.visibilityState)return;const t=new Notification("New Message from "+((null==v?void 0:v.username)||"Someone"),{body:e.content,icon:"/android-icon-192-192.png",badge:"/android-icon-96-96.png",tag:"chat-message",vibrate:[200,100,200],requireInteraction:!1});t.onclick=()=>{window.focus(),t.close(),l&&o&&l()},setTimeout((()=>t.close()),5e3)})(t)})).subscribe();return()=>{e.unsubscribe()}},L=()=>{var e;null==(e=C.current)||e.scrollIntoView({behavior:"smooth"})};return o?e.jsx("div",{className:"fixed bottom-4 right-4 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",onClick:l,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-brand-gold/10 flex items-center justify-center overflow-hidden",children:(null==v?void 0:v.avatar_url)?e.jsx("img",{src:v.avatar_url,alt:v.username,className:"w-full h-full object-cover"}):e.jsx("span",{className:"text-lg font-semibold text-brand-gold",children:(null==(d=null==(c=null==v?void 0:v.username)?void 0:c[0])?void 0:d.toUpperCase())||"?"})}),e.jsx("span",{className:"font-medium",children:(null==v?void 0:v.username)||"Chat"})]})}):e.jsxs("div",{className:"fixed bottom-4 right-4 w-96 bg-white dark:bg-gray-800 rounded-lg shadow-xl flex flex-col max-h-[600px]",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:l,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full",children:e.jsx(t,{className:"w-5 h-5"})}),e.jsx("div",{className:"w-10 h-10 rounded-full bg-brand-gold/10 flex items-center justify-center overflow-hidden",children:(null==v?void 0:v.avatar_url)?e.jsx("img",{src:v.avatar_url,alt:v.username,className:"w-full h-full object-cover"}):e.jsx("span",{className:"text-lg font-semibold text-brand-gold",children:(null==(u=null==(m=null==v?void 0:v.username)?void 0:m[0])?void 0:u.toUpperCase())||"?"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:(null==v?void 0:v.username)||"Loading..."}),e.jsx("p",{className:"text-xs text-gray-500",children:(null==v?void 0:v.full_name)||(null==v?void 0:v.username)})]})]}),e.jsx("button",{onClick:i,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full",children:e.jsx(a,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[b?e.jsx("div",{className:"flex justify-center py-4",children:e.jsx(s,{className:"w-6 h-6 animate-spin text-brand-gold"})}):0===x.length?e.jsx("div",{className:"text-center text-gray-500 py-4",children:"No messages yet. Start the conversation!"}):x.map((t=>{return e.jsx("div",{className:"flex "+(t.sender_id===(null==h?void 0:h.id)?"justify-end":"justify-start"),children:e.jsxs("div",{className:`max-w-[75%] ${t.sender_id===(null==h?void 0:h.id)?"bg-brand-gold text-white":"bg-gray-100 dark:bg-gray-700"} rounded-lg px-4 py-2`,children:[e.jsx("p",{children:t.content}),e.jsx("p",{className:"text-xs opacity-75 mt-1",children:(a=t.created_at,new Date(a).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}))})]})},t.id);var a})),e.jsx("div",{ref:C})]}),e.jsx("form",{onSubmit:async e=>{var t;if(e&&e.preventDefault(),h&&g.trim()){w(!0);try{const{error:e}=await ie.from("messages").insert({sender_id:h.id,receiver_id:n,content:g.trim()});if(e)throw e;f(""),null==(t=S.current)||t.focus()}catch(a){}finally{w(!1)}}},className:"p-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{ref:S,type:"text",value:g,onChange:e=>f(e.target.value),placeholder:"Type a message...",className:"flex-1 p-2 rounded-lg bg-gray-100 dark:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-brand-gold"}),e.jsx("button",{type:"submit",disabled:!g.trim()||j,className:"p-2 bg-brand-gold text-white rounded-lg hover:bg-brand-gold-dark transition-colors disabled:opacity-50",children:j?e.jsx(s,{className:"w-5 h-5 animate-spin"}):e.jsx(r,{className:"w-5 h-5"})})]})})]})}const xe=B.createContext(void 0);function pe({children:t}){const[a,s]=B.useState([]),r=B.useCallback((e=>{s((t=>t.find((t=>t.recipientId===e))?t.map((t=>t.recipientId===e?{...t,isMinimized:!1}:t)):[...t,{recipientId:e,isMinimized:!1}]))}),[]),n=B.useCallback((e=>{s((t=>t.filter((t=>t.recipientId!==e))))}),[]),i=B.useCallback((e=>{s((t=>t.map((t=>t.recipientId===e?{...t,isMinimized:!0}:t))))}),[]),o=B.useCallback((e=>{s((t=>t.map((t=>t.recipientId===e?{...t,isMinimized:!1}:t))))}),[]);return e.jsxs(xe.Provider,{value:{activeChats:a,startChat:r,closeChat:n,minimizeChat:i,maximizeChat:o},children:[t,a.map((t=>e.jsx(he,{recipientId:t.recipientId,isMinimized:t.isMinimized,onClose:()=>n(t.recipientId),onMinimize:()=>t.isMinimized?o(t.recipientId):i(t.recipientId)},t.recipientId)))]})}function ge(){const e=B.useContext(xe);if(void 0===e)throw new Error("useChat must be used within a ChatProvider");return e}var fe,be="https://js.stripe.com/v3",ye=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,je=function(e){var t=document.createElement("script");t.src="".concat(be).concat("");var a=document.head||document.body;if(!a)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return a.appendChild(t),t},we=null,ve=null,Ne=null,ke=function(){return fe||(fe=(e=null,null!==we?we:(we=new Promise((function(t,a){if("undefined"!=typeof window&&"undefined"!=typeof document)if(window.Stripe,window.Stripe)t(window.Stripe);else try{var s=function(){for(var e=document.querySelectorAll('script[src^="'.concat(be,'"]')),t=0;t<e.length;t++){var a=e[t];if(ye.test(a.src))return a}return null}();if(s&&e);else if(s){if(s&&null!==Ne&&null!==ve){var r;s.removeEventListener("load",Ne),s.removeEventListener("error",ve),null===(r=s.parentNode)||void 0===r||r.removeChild(s),s=je()}}else s=je();Ne=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}}(t,a),ve=function(e){return function(){e(new Error("Failed to load Stripe.js"))}}(a),s.addEventListener("load",Ne),s.addEventListener("error",ve)}catch(La){return void a(La)}else t(null)}))).catch((function(e){return we=null,Promise.reject(e)}))).catch((function(e){return fe=null,Promise.reject(e)})));var e};Promise.resolve().then((function(){return ke()})).catch((function(e){})),function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var s=Date.now();ke().then((function(e){return function(e,t,a){if(null===e)return null;var s=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"3.4.1",startTime:t})}(s,a),s}(e,t,s)}))}("pk_live_51ROucJANikXpQi11dY1AGALASRix6sA4OXhfQgH626swoKEHVJ7dxuYNeePbjDEAPIBmVvHzJMXDnrKfdYI2Jzg001pM5WBrc");const _e=B.createContext(void 0),Ce=[{id:"basic",name:"Basic Setup Access",description:"Save setups to the database and your devices",features:["Unlimited setup saves","Access on all your devices","Basic setup templates","Community access"],priceMonthly:9.99,priceYearly:99.99,priceQuarterly:24.99,stripePriceIdMonthly:"price_1RRU4fANikXpQi11v5yoYilZ",stripePriceIdYearly:"price_1RRU4fANikXpQi11GZmyUEwK",stripePriceIdQuarterly:"price_1RRU4fANikXpQi11xJ5EG1vx"},{id:"premium",name:"Encrypted Setup Access",description:"Enhanced security with encrypted setups",features:["All Basic features","End-to-end encryption","Advanced setup templates","Priority support","Early access to new features"],priceMonthly:12.99,priceYearly:134.99,priceQuarterly:34.99,stripePriceIdMonthly:"price_1RRU7iANikXpQi11N4km6XFf",stripePriceIdYearly:"price_1RRUhCANikXpQi11Ya6mzjHl",stripePriceIdQuarterly:"price_1RRUhCANikXpQi11RVy5KKbK"}];async function Se(e,t=3,a=1e3){try{return await e()}catch(La){if(0===t)throw La;return await new Promise((e=>setTimeout(e,a))),Se(e,t-1,2*a)}}function Ee({children:t}){const{user:a}=ue(),[s,r]=B.useState("loading"),[n,i]=B.useState(null),[o,l]=B.useState(!1),[c,d]=B.useState(null);B.useEffect((()=>{a?m():(r("none"),i(null))}),[a]);const m=async()=>{if(a){l(!0),d(null);try{const{data:t,error:s}=await Se((()=>ie.from("profiles").select("has_premium").eq("id",a.id).single()));if(s)throw s;if(null==t?void 0:t.has_premium)return r("premium"),i(null),void l(!1);const{data:n,error:o}=await Se((()=>ie.rpc("get_active_subscription",{user_id_param:a.id})));if(n&&n.length>0){const e=n[0];r("yearly"===e.tier?"premium":e.tier||"basic");const t=e.expires_date||e.current_period_end;i(t?new Date(t):null)}else try{const{data:e,error:t}=await Se((()=>ie.functions.invoke("check-subscription",{body:{userId:a.id}})));if(t)throw t;if(null==e?void 0:e.subscription){const{status:t,tier:a,current_period_end:s}=e.subscription;"active"===t||"trialing"===t?(r(a||"basic"),i(s?new Date(1e3*s):null)):(r("none"),i(null))}else r("none"),i(null)}catch(e){r("none"),i(null)}}catch(e){r("none")}finally{l(!1)}}};return e.jsx(_e.Provider,{value:{createCheckoutSession:async e=>{if(!a)return null;l(!0),d(null);try{const{data:t,error:s}=await Se((()=>ie.functions.invoke("create-checkout-session",{body:{priceId:e,userId:a.id,customerEmail:a.email}})));if(s)throw s;return t.url}catch(t){return null}finally{l(!1)}},createPortalSession:async()=>{if(!a)return null;l(!0),d(null);try{const{data:e,error:t}=await Se((()=>ie.functions.invoke("create-portal-session",{body:{userId:a.id}})));if(t)throw t;return e.url}catch(e){return null}finally{l(!1)}},subscriptionStatus:s,subscriptionPeriodEnd:n,isLoading:o,error:c,tiers:Ce},children:t})}function Pe(){const e=B.useContext(_e);if(void 0===e)throw new Error("useStripe must be used within a StripeProvider");return e}const Ie=B.createContext(void 0);function Ae({children:t}){const[a,s]=B.useState(!0);return e.jsx(Ie.Provider,{value:{showNav:a,setShowNav:s},children:t})}function Le({className:t}){const[r,u]=B.useState(!1),[h,x]=B.useState(!1),[p,g]=B.useState(!0),[f,b]=B.useState(""),[y,j]=B.useState(""),[w,v]=B.useState(!1),[N,k]=B.useState(null),[_,C]=B.useState(""),[S,E]=B.useState(""),[P,I]=B.useState(""),[A,L]=B.useState(null),[O,T]=B.useState(!1),R=G();Y();const D=B.useRef(null),M=B.useRef(null),{signIn:z,signUp:U,user:V,signOut:$,connectionError:F,retryConnection:q}=ue(),{executeWithRetry:W}=ce(),H=["Silva57","Daniels5","Larson57","Colby5","Andy92","Brad49","Kyle54","Kaleb3","Slingin18","Claygrip33","Highline22","Dirtdog77","Slidejob04","Cushion55","Roostertail81","Gasit49","Sprintcar92","Latemodel68","Bullring11","Checkered99","Fullthrottle07","Redclay36","Wheelie29","Chassis14","Featurewin63","Trackside70","Pitside88","Glorylaps44","Pitboxmike","Chaz44","Chaz33","Chaz22","Chaz55","Chaz11"],[X,J]=B.useState(null),[K,Q]=B.useState(null),[Z,ee]=B.useState(!1);B.useEffect((()=>{V?(te(),ae()):(J(null),Q(null))}),[V]);const te=async()=>{if(null==V?void 0:V.id)try{Q(null);const e=await W((async()=>{var e,t;try{const{error:a}=await ie.from("profiles").select("count").single();if(a)throw a;const{data:s,error:r}=await ie.from("profiles").select("full_name, avatar_url").eq("id",V.id).single();if(r){if("PGRST116"===r.code){const{error:a}=await ie.from("profiles").insert([{id:V.id,username:V.email,full_name:(null==(e=V.user_metadata)?void 0:e.full_name)||null,avatar_url:(null==(t=V.user_metadata)?void 0:t.avatar_url)||null}]);if(a)throw a;const{data:s,error:r}=await ie.from("profiles").select("full_name, avatar_url").eq("id",V.id).single();if(r)throw r;return s}throw r}return s}catch(a){if(a instanceof DOMException&&"AbortError"===a.name)throw new Error("Request timed out. Please try again.");if(a instanceof TypeError&&"Failed to fetch"===a.message)throw new Error("Network connection failed. Please check your internet connection.");throw a}}));e&&J(e)}catch(e){Q("Unable to load profile. Please check your connection.")}},ae=async()=>{if(null==V?void 0:V.id)try{const{data:e,error:t}=await ie.from("terms_acceptance").select("*").eq("user_id",V.id).single();t&&t.code,ee(!!e)}catch(e){}};B.useEffect((()=>{const e=e=>{var t;!D.current||D.current.contains(e.target)||(null==(t=M.current)?void 0:t.contains(e.target))||x(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[]),B.useEffect((()=>{const e=e=>{"Escape"===e.key&&(x(!1),u(!1))};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)}),[]),B.useEffect((()=>(h&&window.innerWidth<768?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""})),[h]),B.useEffect((()=>(document.body.style.overflow=r?"hidden":"unset",()=>{document.body.style.overflow="unset"})),[r]);const se=async e=>{try{const{data:t,error:a}=await W((async()=>await ie.from("profiles").select("id").eq("promo_code",e).limit(1)));if(a)throw a;const s=t&&t.length>0;return T(s),s&&L(!1),s}catch(t){return!1}},re=()=>{te()},ne=e=>{if(!e)return!1;const t=e.toLowerCase(),a=t.charAt(0).toUpperCase()+t.slice(1);return H.includes(a)},oe=async()=>{await q()};return V?e.jsxs("div",{className:"relative",ref:D,children:[e.jsxs("button",{ref:M,onClick:()=>x(!h),className:`flex items-center gap-2 relative ${t}`,title:(null==X?void 0:X.full_name)||"Set up profile",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -top-1 -right-1 w-2.5 h-2.5 bg-green-500 rounded-full shadow-lg shadow-green-500/50"}),(null==X?void 0:X.avatar_url)?e.jsx("img",{src:X.avatar_url,alt:"Profile",className:"w-8 h-8 rounded-full object-cover"}):e.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-gold/10 flex items-center justify-center",children:e.jsx(n,{className:"w-5 h-5 text-brand-gold"})})]}),e.jsx("span",{className:"hidden md:inline text-sm font-medium truncate max-w-[150px]",children:K?e.jsx("button",{onClick:re,className:"text-red-500 hover:text-red-600",children:"Retry loading profile"}):(null==X?void 0:X.full_name)||"Set up profile"}),e.jsx(i,{className:"w-4 h-4 transition-transform "+(h?"rotate-180":"")})]}),h&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[1099] md:hidden",onClick:()=>x(!1)}),e.jsxs("div",{className:"fixed md:absolute left-0 right-0 md:left-auto md:right-0 md:w-64 top-[4rem] md:top-[calc(100%+0.5rem)] bg-white dark:bg-gray-800 border-t md:border border-gray-200 dark:border-gray-700 overflow-hidden z-[1100] safe-area-top md:safe-area-top-0 animate-slideIn md:animate-none rounded-none md:rounded-xl shadow-xl h-auto max-h-[calc(100vh-4rem)] md:max-h-[calc(100vh-5rem)] overflow-y-auto",children:[e.jsxs("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[F&&e.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border-b border-red-200 dark:border-red-800",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(o,{className:"w-4 h-4 text-red-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-sm text-red-700 dark:text-red-300 mb-2",children:["Connection Error: ",F]}),e.jsxs("button",{onClick:oe,className:"flex items-center gap-1 text-xs text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300",children:[e.jsx(l,{className:"w-3 h-3"}),"Retry Connection"]})]})]})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"flex-1 min-w-0",children:K?e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-red-500 text-sm",children:K}),e.jsx("button",{onClick:re,className:"text-brand-gold hover:text-brand-gold-dark text-sm",children:"Retry loading profile"})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-xl font-semibold truncate",children:(null==X?void 0:X.full_name)||"Set up profile"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:V.email})]})})}),!Z&&e.jsxs("button",{onClick:()=>{x(!1),R("/terms-of-service")},className:"w-full px-6 py-4 text-left text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",children:[e.jsx(c,{className:"w-5 h-5"}),"Accept Terms of Service"]}),e.jsx("button",{onClick:()=>{x(!1),R("/profile")},className:"w-full px-6 py-4 text-left hover:bg-gray-100 dark:hover:bg-gray-700",children:"Profile Settings"}),e.jsx("button",{onClick:async()=>{await $(),x(!1),R("/")},className:"w-full px-6 py-4 text-left text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700",children:"Sign Out"})]}),e.jsx("div",{className:"h-[env(safe-area-inset-bottom)] md:hidden"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>R("/signin"),className:`flex items-center gap-2 ${t}`,title:"Sign In",children:[e.jsx(d,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden md:inline",children:"Sign In"})]}),r&&e.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm overflow-y-auto",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-md my-auto max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:e.jsxs("div",{className:"relative p-6",children:[e.jsx("button",{onClick:()=>u(!1),className:"absolute top-4 right-4 p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full","aria-label":"Close",children:e.jsx(a,{className:"w-6 h-6"})}),e.jsx("h2",{className:"text-2xl font-bold mb-6",children:p?"Sign In to PitBox":"Create PitBox Account"}),F&&e.jsx("div",{className:"mb-4 p-3 rounded-lg bg-red-100 dark:bg-red-900/30 border border-red-200 dark:border-red-800",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(o,{className:"w-4 h-4 text-red-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-sm text-red-700 dark:text-red-300 mb-2",children:["Connection Error: ",F]}),e.jsxs("button",{onClick:oe,className:"flex items-center gap-1 text-xs text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300",children:[e.jsx(l,{className:"w-3 h-3"}),"Retry Connection"]})]})]})}),e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),v(!0),k(null);try{if(p){const{error:e}=await z(f,y);e?e.message.includes("Invalid login credentials")?k("Invalid email or password"):k(e.message):(u(!1),b(""),j(""),R("/home"))}else{if(!_.trim())return k("Username is required"),void v(!1);if(P){const e=P.toLowerCase(),t=e.charAt(0).toUpperCase()+e.slice(1);if(!ne(t))return k("Invalid promo code"),void v(!1);if(await se(t))return k("This promo code has already been used"),void v(!1)}const{error:e,success:t}=await U(f,y);if(e)e.message.includes("user_already_exists")?(k("An account with this email already exists. Please sign in instead."),g(!0)):k(e.message);else if(t){const{data:{user:e}}=await ie.auth.getUser();if(e){let t=null;if(P&&ne(P)){const e=P.toLowerCase();t=e.charAt(0).toUpperCase()+e.slice(1)}const{error:a}=await ie.from("profiles").upsert({id:e.id,username:_.trim(),full_name:S.trim()||null,promo_code:t,has_premium:!!t,updated_at:(new Date).toISOString()})}u(!1),b(""),j(""),C(""),E(""),I(""),R("/terms-of-service")}}}catch(t){k("An unexpected error occurred. Please try again.")}finally{v(!1)}},className:"space-y-4",children:[N&&e.jsx("div",{className:"p-3 rounded-lg bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 text-sm",children:N}),!p&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"username",className:"block text-sm font-medium mb-1",children:["Username ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"username",value:_,onChange:e=>C(e.target.value),className:"w-full p-3 rounded-lg bg-white/50 dark:bg-gray-800/50 border border-gray-300 dark:border-gray-600",placeholder:"Choose a username",required:!0,disabled:w})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium mb-1",children:"Full Name"}),e.jsx("input",{type:"text",id:"fullName",value:S,onChange:e=>E(e.target.value),className:"w-full p-3 rounded-lg bg-white/50 dark:bg-gray-800/50 border border-gray-300 dark:border-gray-600",placeholder:"Your full name",disabled:w})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"promoCode",className:"block text-sm font-medium mb-1",children:["Promo Code",e.jsx("span",{className:"ml-1 text-xs text-gray-500",children:"(Optional)"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",id:"promoCode",value:P,onChange:e=>{const t=e.target.value;I(t),(e=>{if(!e)return L(null),T(!1),!1;const t=e.toLowerCase(),a=t.charAt(0).toUpperCase()+t.slice(1),s=H.includes(a);L(s),s&&se(a)})(t)},className:"w-full p-3 rounded-lg bg-white/50 dark:bg-gray-800/50 border "+(!0!==A||O?!1===A||O?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-gray-600":"border-green-500 dark:border-green-500"),placeholder:"Enter promo code if you have one",disabled:w}),!0===A&&!O&&e.jsx(m,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-green-500"})]}),!0===A&&!O&&e.jsx("p",{className:"mt-1 text-xs text-green-600 dark:text-green-400",children:"Valid promo code! You'll have premium access."}),!1===A&&P&&!O&&e.jsx("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:"Invalid promo code."}),O&&e.jsx("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:"This promo code has already been used."})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium mb-1",children:"Email"}),e.jsx("input",{type:"email",id:"email",value:f,onChange:e=>b(e.target.value),className:"w-full p-3 rounded-lg bg-white/50 dark:bg-gray-800/50 border border-gray-300 dark:border-gray-600",placeholder:"your@email.com",required:!0,autoComplete:"email",disabled:w})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium mb-1",children:"Password"}),e.jsx("input",{type:"password",id:"password",value:y,onChange:e=>j(e.target.value),className:"w-full p-3 rounded-lg bg-white/50 dark:bg-gray-800/50 border border-gray-300 dark:border-gray-600",placeholder:"••••••••",required:!0,autoComplete:p?"current-password":"new-password",disabled:w,minLength:6}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:p?"":"Password must be at least 6 characters"})]}),e.jsx("button",{type:"submit",disabled:w||P&&(!1===A||O)||!!F,className:"w-full bg-brand-gold text-white py-3 px-4 rounded-lg hover:bg-brand-gold-dark transition text-lg flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:w?e.jsxs(e.Fragment,{children:[e.jsx(s,{className:"w-5 h-5 animate-spin"}),p?"Signing In...":"Creating Account..."]}):e.jsxs(e.Fragment,{children:[e.jsx(d,{className:"w-5 h-5"}),p?"Sign In":"Create Account"]})}),e.jsxs("p",{className:"text-sm text-center text-gray-600 dark:text-gray-400",children:[p?"Don't have an account?":"Already have an account?"," ",e.jsx("button",{type:"button",className:"text-brand-gold hover:text-brand-gold-dark dark:text-brand-gold-light dark:hover:text-brand-gold",onClick:()=>{g(!p),k(null),L(null),I(""),T(!1)},children:p?"Create one":"Sign in"})]})]})]})})})]})}const Oe=(e=>e.CapacitorPlatforms=(e=>{const t=new Map;t.set("web",{name:"web"});const a=e.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:t};return a.addPlatform=(e,t)=>{a.platforms.set(e,t)},a.setPlatform=e=>{a.platforms.has(e)&&(a.currentPlatform=a.platforms.get(e))},a})(e))("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{});var Te,Re;Oe.addPlatform,Oe.setPlatform,(Re=Te||(Te={})).Unimplemented="UNIMPLEMENTED",Re.Unavailable="UNAVAILABLE";class De extends Error{constructor(e,t,a){super(e),this.message=e,this.code=t,this.data=a}}const Me=(e=>e.Capacitor=(e=>{var t,a,s,r,n;const i=e.CapacitorCustomPlatform||null,o=e.Capacitor||{},l=o.Plugins=o.Plugins||{},c=e.CapacitorPlatforms,d=(null===(t=null==c?void 0:c.currentPlatform)||void 0===t?void 0:t.getPlatform)||(()=>null!==i?i.name:(e=>{var t,a;return(null==e?void 0:e.androidBridge)?"android":(null===(a=null===(t=null==e?void 0:e.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===a?void 0:a.bridge)?"ios":"web"})(e)),m=(null===(a=null==c?void 0:c.currentPlatform)||void 0===a?void 0:a.isNativePlatform)||(()=>"web"!==d()),u=(null===(s=null==c?void 0:c.currentPlatform)||void 0===s?void 0:s.isPluginAvailable)||(e=>{const t=x.get(e);return!!(null==t?void 0:t.platforms.has(d()))||!!h(e)}),h=(null===(r=null==c?void 0:c.currentPlatform)||void 0===r?void 0:r.getPluginHeader)||(e=>{var t;return null===(t=o.PluginHeaders)||void 0===t?void 0:t.find((t=>t.name===e))}),x=new Map,p=(null===(n=null==c?void 0:c.currentPlatform)||void 0===n?void 0:n.registerPlugin)||((e,t={})=>{const a=x.get(e);if(a)return a.proxy;const s=d(),r=h(e);let n;const c=a=>{let l;const c=(...c)=>{const d=(async()=>(!n&&s in t?n=n="function"==typeof t[s]?await t[s]():t[s]:null!==i&&!n&&"web"in t&&(n=n="function"==typeof t.web?await t.web():t.web),n))().then((t=>{const n=((t,a)=>{var n,i;if(!r){if(t)return null===(i=t[a])||void 0===i?void 0:i.bind(t);throw new De(`"${e}" plugin is not implemented on ${s}`,Te.Unimplemented)}{const s=null==r?void 0:r.methods.find((e=>a===e.name));if(s)return"promise"===s.rtype?t=>o.nativePromise(e,a.toString(),t):(t,s)=>o.nativeCallback(e,a.toString(),t,s);if(t)return null===(n=t[a])||void 0===n?void 0:n.bind(t)}})(t,a);if(n){const e=n(...c);return l=null==e?void 0:e.remove,e}throw new De(`"${e}.${a}()" is not implemented on ${s}`,Te.Unimplemented)}));return"addListener"===a&&(d.remove=async()=>l()),d};return c.toString=()=>`${a.toString()}() { [capacitor code] }`,Object.defineProperty(c,"name",{value:a,writable:!1,configurable:!1}),c},m=c("addListener"),u=c("removeListener"),p=(e,t)=>{const a=m({eventName:e},t),s=async()=>{const s=await a;u({eventName:e,callbackId:s},t)},r=new Promise((e=>a.then((()=>e({remove:s})))));return r.remove=async()=>{await s()},r},g=new Proxy({},{get(e,t){switch(t){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return r?p:m;case"removeListener":return u;default:return c(t)}}});return l[e]=g,x.set(e,{name:e,proxy:g,platforms:new Set([...Object.keys(t),...r?[s]:[]])}),g});return o.convertFileSrc||(o.convertFileSrc=e=>e),o.getPlatform=d,o.handleError=t=>e.console.error(t),o.isNativePlatform=m,o.isPluginAvailable=u,o.pluginMethodNoop=(e,t,a)=>Promise.reject(`${a} does not have an implementation of "${t}".`),o.registerPlugin=p,o.Exception=De,o.DEBUG=!!o.DEBUG,o.isLoggingEnabled=!!o.isLoggingEnabled,o.platform=o.getPlatform(),o.isNative=o.isNativePlatform(),o})(e))("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}),ze=Me.registerPlugin;Me.Plugins;class Ue{constructor(e){this.listeners={},this.windowListeners={},e&&(this.config=e)}addListener(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t);const a=this.windowListeners[e];a&&!a.registered&&this.addWindowListener(a);const s=async()=>this.removeListener(e,t),r=Promise.resolve({remove:s});return Object.defineProperty(r,"remove",{value:async()=>{await s()}}),r}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t){const a=this.listeners[e];a&&a.forEach((e=>e(t)))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:e=>{this.notifyListeners(t,e)}}}unimplemented(e="not implemented"){return new Me.Exception(e,Te.Unimplemented)}unavailable(e="not available"){return new Me.Exception(e,Te.Unavailable)}async removeListener(e,t){const a=this.listeners[e];if(!a)return;const s=a.indexOf(t);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}}const Ve=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),$e=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Fe extends Ue{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach((e=>{if(e.length<=0)return;let[a,s]=e.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");a=$e(a).trim(),s=$e(s).trim(),t[a]=s})),t}async setCookie(e){try{const t=Ve(e.key),a=Ve(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,r=(e.path||"/").replace("path=",""),n=null!=e.url&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${a||""}${s}; path=${r}; ${n};`}catch(La){return Promise.reject(La)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(La){return Promise.reject(La)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(La){return Promise.reject(La)}}async clearAllCookies(){try{await this.clearCookies()}catch(La){return Promise.reject(La)}}}ze("CapacitorCookies",{web:()=>new Fe});const qe=(e,t={})=>{const a=Object.assign({method:e.method||"GET",headers:e.headers},t),s=((e={})=>{const t=Object.keys(e);return Object.keys(e).map((e=>e.toLocaleLowerCase())).reduce(((a,s,r)=>(a[s]=e[t[r]],a)),{})})(e.headers)["content-type"]||"";if("string"==typeof e.data)a.body=e.data;else if(s.includes("application/x-www-form-urlencoded")){const t=new URLSearchParams;for(const[a,s]of Object.entries(e.data||{}))t.set(a,s);a.body=t.toString()}else if(s.includes("multipart/form-data")||e.data instanceof FormData){const t=new FormData;if(e.data instanceof FormData)e.data.forEach(((e,a)=>{t.append(a,e)}));else for(const a of Object.keys(e.data))t.append(a,e.data[a]);a.body=t;const s=new Headers(a.headers);s.delete("content-type"),a.headers=s}else(s.includes("application/json")||"object"==typeof e.data)&&(a.body=JSON.stringify(e.data));return a};class Be extends Ue{async request(e){const t=qe(e,e.webFetchExtra),a=((e,t=!0)=>e?Object.entries(e).reduce(((e,a)=>{const[s,r]=a;let n,i;return Array.isArray(r)?(i="",r.forEach((e=>{n=t?encodeURIComponent(e):e,i+=`${s}=${n}&`})),i.slice(0,-1)):(n=t?encodeURIComponent(r):r,i=`${s}=${n}`),`${e}&${i}`}),"").substr(1):null)(e.params,e.shouldEncodeUrlParams),s=a?`${e.url}?${a}`:e.url,r=await fetch(s,t),n=r.headers.get("content-type")||"";let i,o,{responseType:l="text"}=r.ok?e:{};switch(n.includes("application/json")&&(l="json"),l){case"arraybuffer":case"blob":o=await r.blob(),i=await(async e=>new Promise(((t,a)=>{const s=new FileReader;s.onload=()=>{const e=s.result;t(e.indexOf(",")>=0?e.split(",")[1]:e)},s.onerror=e=>a(e),s.readAsDataURL(e)})))(o);break;case"json":i=await r.json();break;default:i=await r.text()}const c={};return r.headers.forEach(((e,t)=>{c[t]=e})),{data:i,headers:c,status:r.status,url:r.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}ze("CapacitorHttp",{web:()=>new Be});const We=ze("App",{web:()=>X((()=>import("./web-Nl3H63MX.js")),__vite__mapDeps([0,1,2,3,4])).then((e=>new e.AppWeb))});function He(){const{needRefresh:[t,a],updateServiceWorker:s}=function(e={}){const{immediate:t=!0,onNeedRefresh:a,onOfflineReady:s,onRegistered:r,onRegisteredSW:n,onRegisterError:i}=e,[o,l]=B.useState(!1),[c,d]=B.useState(!1),[m]=B.useState((()=>function(e={}){const{immediate:t=!1,onNeedRefresh:a,onOfflineReady:s,onRegistered:r,onRegisteredSW:n,onRegisterError:i}=e;let o,l;return l=async function(){if("serviceWorker"in navigator){if(o=await X((async()=>{const{Workbox:e}=await import("./workbox-window.prod.es5-BXNXHyjv.js");return{Workbox:e}}),[]).then((({Workbox:e})=>new e("/sw.js",{scope:"/",type:"classic"}))).catch((e=>{null==i||i(e)})),!o)return;o.addEventListener("activated",(e=>{(e.isUpdate||e.isExternal)&&window.location.reload()})),o.addEventListener("installed",(e=>{e.isUpdate||null==s||s()})),o.register({immediate:t}).then((e=>{n?n("/sw.js",e):null==r||r(e)})).catch((e=>{null==i||i(e)}))}}(),async(e=!0)=>{await l}}({immediate:t,onOfflineReady(){d(!0),null==s||s()},onNeedRefresh(){l(!0),null==a||a()},onRegistered:r,onRegisteredSW:n,onRegisterError:i})));return{needRefresh:[o,l],offlineReady:[c,d],updateServiceWorker:m}}({onRegistered(e){},onRegisterError(e){}}),[r,n]=B.useState(!1),[i,o]=B.useState(null),[l,c]=B.useState(null);return B.useEffect((()=>{if((async()=>{if(Me.isNativePlatform())try{const e=await We.getInfo();c(e.version)}catch(e){}})(),!Me.isNativePlatform()){const e=e=>{e.preventDefault(),n(!0),o(e)};return window.addEventListener("beforeinstallprompt",e),()=>{window.removeEventListener("beforeinstallprompt",e)}}}),[]),Me.isNativePlatform()?null:t||r?e.jsxs("div",{className:"fixed bottom-4 right-4 z-50",children:[t&&e.jsx("div",{className:"glass-panel p-4 mb-4 animate-slideIn",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(u,{className:"w-6 h-6 text-brand-gold animate-bounce"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"New version available!"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Click to update to the latest version"})]}),e.jsx("button",{onClick:()=>{s(!0)},className:"btn-primary py-2 px-4",children:"Update"})]})}),r&&e.jsx("div",{className:"glass-panel p-4 animate-slideIn",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:"/android-icon-96-96.png",alt:"PIT-BOX.COM",className:"w-12 h-12"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Install PIT-BOX.COM"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Add to your home screen for quick access"})]}),e.jsx("button",{onClick:async()=>{if(!i)return;i.prompt();const{outcome:e}=await i.userChoice;"accepted"===e&&(n(!1),o(null))},className:"btn-primary py-2 px-4",children:"Install"})]})})]}):null}const Xe=ze("Geolocation",{web:()=>X((()=>import("./web-DGEEeSm5.js")),__vite__mapDeps([5,1,2,3,4])).then((e=>new e.GeolocationWeb))});var Ge,Ye,Je,Ke,Qe,Ze;(Ye=Ge||(Ge={})).Prompt="PROMPT",Ye.Camera="CAMERA",Ye.Photos="PHOTOS",(Ke=Je||(Je={})).Rear="REAR",Ke.Front="FRONT",(Ze=Qe||(Qe={})).Uri="uri",Ze.Base64="base64",Ze.DataUrl="dataUrl";const et=ze("Camera",{web:()=>X((()=>import("./web-h9EUWZQp.js")),__vite__mapDeps([6,1,2,3,4])).then((e=>new e.CameraWeb))});ze("Network",{web:()=>X((()=>import("./web-C5fr-DBe.js")),__vite__mapDeps([7,1,2,3,4])).then((e=>new e.NetworkWeb))});const tt=ze("PushNotifications",{}),at=Me.isNativePlatform(),st=()=>"ios"===Me.getPlatform(),rt=()=>"android"===Me.getPlatform(),nt=()=>"web"===Me.getPlatform(),it=async()=>{if(!at)return null;try{return(await et.getPhoto({quality:90,allowEditing:!1,resultType:Qe.DataUrl,source:Ge.Camera})).dataUrl}catch(La){return null}},ot=async()=>{if(!at)return null;try{return(await et.getPhoto({quality:90,allowEditing:!0,resultType:Qe.DataUrl,source:Ge.Photos})).dataUrl}catch(La){return null}},lt=async()=>{if(!at)return null;try{return await Xe.getCurrentPosition({enableHighAccuracy:!0,timeout:1e4})}catch(La){return null}},ct=async(e,t)=>{if(at)try{localStorage.setItem(e,t)}catch(La){localStorage.setItem(e,t)}else localStorage.setItem(e,t)},dt=async e=>{if(!at)return localStorage.getItem(e);try{return localStorage.getItem(e)}catch(La){return localStorage.getItem(e)}},mt=()=>{const{currentTrack:t,isAtTrack:s,distance:r,isMonitoring:n,startMonitoring:i,stopMonitoring:o}=(()=>{const[e,t]=B.useState({currentTrack:null,isAtTrack:!1,distance:null,checkInId:null}),[a,s]=B.useState(!1),[r,n]=B.useState([]),i=B.useRef(null),o=B.useRef(null);B.useEffect((()=>{l()}),[]);const l=async()=>{try{const{data:e,error:t}=await ie.from("track_locations").select("*");if(t)throw t;e&&n(e)}catch(La){}},c=async e=>{try{const{data:{user:t}}=await ie.auth.getUser();if(!t)return null;let a={timestamp:(new Date).toISOString(),latitude:0,longitude:0};if(at){const e=await Xe.getCurrentPosition();a={timestamp:(new Date).toISOString(),latitude:e.coords.latitude,longitude:e.coords.longitude}}const{data:s,error:r}=await ie.from("track_check_ins").insert({user_id:t.id,track_id:e,check_in_time:(new Date).toISOString(),is_public:!0,weather_conditions:a}).select().single();if(r)throw r;return(null==s?void 0:s.id)||null}catch(La){return null}},d=async e=>{try{const{error:t}=await ie.from("track_check_ins").update({check_out_time:(new Date).toISOString()}).eq("id",e);if(t)throw t}catch(La){}},m=B.useCallback((async(a,s)=>{var n;let i=null,l=1/0;if(r.forEach((e=>{const t=((e,t,a,s)=>{const r=e*Math.PI/180,n=a*Math.PI/180,i=(a-e)*Math.PI/180,o=(s-t)*Math.PI/180,l=Math.sin(i/2)*Math.sin(i/2)+Math.cos(r)*Math.cos(n)*Math.sin(o/2)*Math.sin(o/2);return 2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))*6371e3})(a,s,Number(e.latitude),Number(e.longitude));t<l&&(l=t,i=e)})),i&&l<=(i.radius||500)&&i){if(o.current!==i.id){const e=await c(i.id);o.current=i.id,t({currentTrack:i,isAtTrack:!0,distance:l,checkInId:e}),e&&await ie.from("notifications").insert({user_id:null==(n=(await ie.auth.getUser()).data.user)?void 0:n.id,type:"track_arrival",title:`Welcome to ${i.name}!`,body:`You've arrived at ${i.name} in ${i.city}, ${i.state}`,data:{track_id:i.id,check_in_id:e}})}}else o.current&&e.checkInId&&(await d(e.checkInId),o.current=null),t({currentTrack:i,isAtTrack:!1,distance:l,checkInId:null})}),[r,e.checkInId]);return{...e,isMonitoring:a,tracks:r,startMonitoring:async()=>{if(at)try{if("granted"!==(await Xe.checkPermissions()).location&&"granted"!==(await Xe.requestPermissions()).location)throw new Error("Location permission denied");const e=await Xe.watchPosition({enableHighAccuracy:!0,timeout:1e4,maximumAge:5e3},(e=>{e&&m(e.coords.latitude,e.coords.longitude)}));i.current=e,s(!0)}catch(La){}},stopMonitoring:async()=>{i.current&&(await Xe.clearWatch({id:i.current}),i.current=null),e.checkInId&&await d(e.checkInId),s(!1)},manualCheckIn:async e=>{var a;try{const s=r.find((t=>t.id===e));if(!s)return;const n=await c(e);o.current=e,t({currentTrack:s,isAtTrack:!0,distance:0,checkInId:n}),await ie.from("notifications").insert({user_id:null==(a=(await ie.auth.getUser()).data.user)?void 0:a.id,type:"track_arrival",title:`Checked in at ${s.name}`,body:`Manual check-in at ${s.name}`,data:{track_id:e,check_in_id:n}})}catch(La){}},refreshTracks:l}})(),[l,c]=B.useState(!1),[d,m]=B.useState(0);B.useEffect((()=>(i(),()=>{o()})),[]),B.useEffect((()=>{s&&t&&(c(!1),u())}),[s,t]);const u=async()=>{if(!t)return;const{supabase:e}=await X((async()=>{const{supabase:e}=await Promise.resolve().then((()=>le));return{supabase:e}}),void 0),{data:{user:a}}=await e.auth.getUser();if(!a)return;const{count:s}=await e.from("setups").select("*",{count:"exact",head:!0}).eq("user_id",a.id).eq("location",t.name);m(s||0)};return n&&!l&&t?s?e.jsx("div",{className:"fixed top-20 left-0 right-0 z-50 mx-4 animate-slide-down",children:e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg shadow-2xl p-4 max-w-2xl mx-auto",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(h,{className:"w-6 h-6"}),e.jsxs("h3",{className:"text-lg font-bold",children:["Welcome to ",t.name,"!"]})]}),e.jsxs("p",{className:"text-sm text-green-50 mb-3",children:[t.city,", ",t.state," • ",t.track_type," • ",t.surface]}),d>0&&e.jsx("div",{className:"bg-white/20 rounded-lg p-3 mb-3",children:e.jsxs("p",{className:"text-sm font-medium",children:["You have ",d," saved ",1===d?"setup":"setups"," for this track"]})}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(J,{to:"/saved-setups",className:"bg-white text-green-600 px-4 py-2 rounded-lg text-sm font-medium hover:bg-green-50 transition-colors",children:"View Setups"}),e.jsx(J,{to:"/"+("dirt"===t.track_type?"sprint-410":"late-model"),className:"bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-green-800 transition-colors",children:"New Setup"})]})]}),e.jsx("button",{onClick:()=>c(!0),className:"text-white/80 hover:text-white transition-colors",children:e.jsx(a,{className:"w-5 h-5"})})]})})}):r&&r<5e3?e.jsx("div",{className:"fixed bottom-24 left-0 right-0 z-50 mx-4",children:e.jsxs("div",{className:"bg-blue-500 text-white rounded-lg shadow-xl p-3 max-w-md mx-auto flex items-center gap-3",children:[e.jsx(x,{className:"w-5 h-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:t.name}),e.jsxs("p",{className:"text-xs text-blue-100",children:[(r/1e3).toFixed(1)," km away"]})]}),e.jsx("button",{onClick:()=>c(!0),className:"text-white/80 hover:text-white",children:e.jsx(a,{className:"w-4 h-4"})})]})}):null:null};function ut({onComplete:t,videoSrc:a="/splash_animation.mp4"}){const[s,r]=B.useState(!0),[n,i]=B.useState(!1),o=B.useRef(null),l=B.useRef(!1);return B.useEffect((()=>{const e=o.current;if(!e)return;const a=()=>{l.current||(l.current=!0,r(!1),setTimeout((()=>{t()}),300))},s=()=>{i(!0),setTimeout((()=>{l.current||(l.current=!0,t())}),2e3)},n=()=>{e.play().catch((e=>{i(!0),setTimeout((()=>{l.current||(l.current=!0,t())}),2e3)}))};return e.addEventListener("ended",a),e.addEventListener("error",s),e.addEventListener("canplay",n),()=>{e.removeEventListener("ended",a),e.removeEventListener("error",s),e.removeEventListener("canplay",n)}}),[t]),e.jsx(p,{children:s&&e.jsx(g.div,{initial:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"fixed inset-0 z-[9999] bg-brand-black flex items-center justify-center",style:{isolation:"isolate"},children:n?e.jsx("div",{className:"flex flex-col items-center justify-center",children:e.jsx("img",{src:"/android-icon-512-512.png",alt:"PIT-BOX",className:"w-64 h-64 object-contain animate-pulse"})}):e.jsxs(e.Fragment,{children:[e.jsx("video",{ref:o,src:a,className:"w-full h-full object-cover",playsInline:!0,autoPlay:!0,preload:"auto"}),e.jsx("button",{onClick:()=>{l.current||(l.current=!0,r(!1),setTimeout((()=>{t()}),100))},className:"absolute bottom-8 right-8 px-6 py-3 bg-white/10 hover:bg-white/20 backdrop-blur-sm rounded-full text-white font-medium transition-all duration-300 hover:scale-105",children:"Skip"})]})})})}const ht=new class{constructor(){this.LiveUpdate=null,this.pluginLoaded=!1}async loadPlugin(){if(!this.pluginLoaded)try{const e=await X((()=>import("./index-QNObs8UV.js")),__vite__mapDeps([8,3,2,1,4]));this.LiveUpdate=e.LiveUpdate,this.pluginLoaded=!0}catch(La){this.pluginLoaded=!1}}async isAvailable(){return await this.loadPlugin(),null!==this.LiveUpdate&&Me.isNativePlatform()}async initialize(){if(await this.isAvailable())try{await this.LiveUpdate.ready(),await this.LiveUpdate.getCurrentBundle(),await this.checkForUpdates()}catch(La){}}async checkForUpdates(){if(await this.isAvailable())try{(await this.LiveUpdate.sync()).nextBundleId&&await this.LiveUpdate.reload()}catch(La){}}async getCurrentBundleInfo(){if(!(await this.isAvailable()))return null;try{return await this.LiveUpdate.getCurrentBundle()}catch(La){return null}}async downloadUpdate(){if(!(await this.isAvailable()))throw new Error("Live Update plugin not available");try{await this.LiveUpdate.download()}catch(La){throw La}}async reloadApp(){if(!(await this.isAvailable()))throw new Error("Live Update plugin not available");try{await this.LiveUpdate.reload()}catch(La){throw La}}};function xt({isOpen:t,onClose:s}){return B.useEffect((()=>{const e=e=>{"Escape"===e.key&&t&&s()};return t&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}}),[t,s]),t?e.jsx(p,{children:e.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:e.jsxs(g.div,{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{type:"spring",damping:20,stiffness:300},children:[e.jsxs("div",{className:"relative p-8 bg-gradient-to-br from-brand-gold/10 to-brand-gold-dark/10 rounded-t-2xl",children:[e.jsx("button",{onClick:s,className:"absolute top-4 right-4 p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors","aria-label":"Close welcome modal",children:e.jsx(a,{className:"w-6 h-6"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"relative w-full max-w-md mx-auto mb-6",children:e.jsx("img",{src:"/android-icon-512-512.png",alt:"PIT-BOX.COM Logo",className:"w-full h-auto object-contain drop-shadow-xl transform hover:scale-105 transition-transform duration-300"})}),e.jsx("h1",{className:"text-4xl font-bold mb-4 bg-gradient-to-r from-brand-gold to-brand-gold-light bg-clip-text text-transparent",children:"Welcome to PIT-BOX.COM"}),e.jsx("p",{className:"text-xl text-gray-700 dark:text-gray-300 mb-6",children:"Where The Winners Go! Your Digital Crew Chief for Racing Excellence"})]})]}),e.jsxs("div",{className:"p-8 space-y-8",children:[e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs(g.div,{className:"glass-panel p-6 text-center bg-gradient-to-br from-green-500/10 to-emerald-500/10",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-green-500/20 flex items-center justify-center mx-auto mb-4",children:e.jsx(f,{className:"w-8 h-8 text-green-500"})}),e.jsx("h3",{className:"text-xl font-bold mb-3",children:"Professional Setup Tools"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 leading-relaxed",children:"Save unlimited racing setups to the cloud. Access your data from anywhere, anytime. Track chassis adjustments, suspension settings, and engine parameters with professional-grade tools designed by racers, for racers."})]}),e.jsxs(g.div,{className:"glass-panel p-6 text-center bg-gradient-to-br from-blue-500/10 to-indigo-500/10",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-blue-500/20 flex items-center justify-center mx-auto mb-4",children:e.jsx(b,{className:"w-8 h-8 text-blue-500"})}),e.jsx("h3",{className:"text-xl font-bold mb-3",children:"Swap Meet Marketplace"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 leading-relaxed",children:"Buy, sell, and trade racing equipment with verified community members. List your products with photos, connect directly with buyers, and grow your racing business in our trusted marketplace."})]}),e.jsxs(g.div,{className:"glass-panel p-6 text-center bg-gradient-to-br from-purple-500/10 to-pink-500/10",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-purple-500/20 flex items-center justify-center mx-auto mb-4",children:e.jsx(y,{className:"w-8 h-8 text-purple-500"})}),e.jsx("h3",{className:"text-xl font-bold mb-3",children:"Racing Social Network"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 leading-relaxed",children:"Connect with fellow racers worldwide. Share your victories, learn from champions, and build lasting friendships in our exclusive racing community. Network with drivers, crew chiefs, and industry professionals."})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-brand-gold/5 to-brand-gold-dark/5 rounded-xl p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:"Why Champions Choose PIT-BOX.COM"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(j,{className:"w-6 h-6 text-brand-gold flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-1",children:"Cloud-Based Setup Management"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Never lose your setups again. Access your data from any device, anywhere in the world."})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(w,{className:"w-6 h-6 text-brand-gold flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-1",children:"Secure & Reliable"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Your proprietary setups are protected with bank-level security and encrypted storage."})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(v,{className:"w-6 h-6 text-brand-gold flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-1",children:"Global Racing Network"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Join thousands of racers from sprint cars to late models, all using PIT-BOX.COM."})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(N,{className:"w-6 h-6 text-brand-gold flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-1",children:"Real-Time Performance"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Make instant setup adjustments and track changes in real-time during race events."})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(k,{className:"w-6 h-6 text-brand-gold flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-1",children:"Proven by Champions"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Trusted by winning teams and professional drivers across all racing divisions."})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(_,{className:"w-6 h-6 text-brand-gold flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-1",children:"Built by Racers"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Created by racing enthusiasts who understand what it takes to win on the track."})]})]})]})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Ready to Transform Your Racing?"}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400 mb-6",children:"Join the revolution that's changing how champions prepare, compete, and win."}),e.jsx("button",{onClick:s,className:"btn-primary text-lg px-8 py-3 font-semibold",children:"Get Started Now"})]})]})]})})}):null}var pt,gt,ft,bt;(gt=pt||(pt={})).Dark="DARK",gt.Light="LIGHT",gt.Default="DEFAULT",(bt=ft||(ft={})).None="NONE",bt.Slide="SLIDE",bt.Fade="FADE";const yt=ze("StatusBar"),jt=ze("SplashScreen",{web:()=>X((()=>import("./web-ld2oWJ7q.js")),__vite__mapDeps([9,1,2,3,4])).then((e=>new e.SplashScreenWeb))});function wt(){const[t,a]=W.useState(!1);return B.useEffect((()=>{(async()=>{if(Me.isNativePlatform())try{await yt.setStyle({style:pt.Dark}),await yt.setBackgroundColor({color:"#000000"}),await jt.hide()}catch(La){}})(),localStorage.getItem("pitbox-has-visited")||(a(!0),localStorage.setItem("pitbox-has-visited","true"))}),[]),e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-lg text-center",children:[e.jsx("div",{className:"relative w-full max-w-md mx-auto mb-8",children:e.jsx("img",{src:"/android-icon-512-512.png",alt:"PIT-BOX.COM Logo",width:"800",height:"240",className:"w-full h-auto object-contain drop-shadow-2xl transform hover:scale-105 transition-transform duration-300"})}),e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-6 text-brand-gold",children:"Welcome to PIT-BOX.COM"}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 mb-8",children:"Your Digital Crew Chief for Racing Excellence"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:()=>navigate("/home"),className:"w-full btn-primary flex items-center justify-center gap-2 text-lg",children:[e.jsx(d,{className:"w-5 h-5"}),"Get Started"]}),e.jsx(J,{to:"/home",className:"w-full btn-secondary block text-center",children:"Continue as Guest"}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-4 flex items-center justify-center gap-1",children:[e.jsx(c,{className:"w-4 h-4"}),e.jsx("span",{children:Me.isNativePlatform()?"Native app version":"Web version"})]})]}),e.jsx(Le,{className:"hidden sign-in-trigger"}),e.jsx(xt,{isOpen:t,onClose:()=>{a(!1)}})]})})}function vt({isOpen:t,onClose:s,onSignIn:r}){const n=G();return t?e.jsx("div",{className:"modal-overlay",onClick:s,children:e.jsx("div",{className:"modal-content max-w-lg",onClick:e=>e.stopPropagation(),children:e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:s,className:"absolute top-0 right-0 p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:e.jsx(a,{className:"w-6 h-6"})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"inline-block p-3 rounded-full bg-brand-gold/10 mb-4",children:e.jsx(k,{className:"w-12 h-12 text-brand-gold"})}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Join the Winners Circle!"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Unlock the full potential of PIT-BOX.COM - the most advanced setup management tool in racing. Champions trust us for their success!"})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-brand-gold/5",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-brand-gold/10 flex items-center justify-center",children:"✓"}),e.jsx("p",{className:"text-sm",children:"Save unlimited setup configurations"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-brand-gold/5",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-brand-gold/10 flex items-center justify-center",children:"✓"}),e.jsx("p",{className:"text-sm",children:"Track changes across different conditions"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-brand-gold/5",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-brand-gold/10 flex items-center justify-center",children:"✓"}),e.jsx("p",{className:"text-sm",children:"Access your setups from anywhere"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>{n("/signin"),s()},className:"w-full btn-primary flex items-center justify-center gap-2",children:[e.jsx(d,{className:"w-5 h-5"}),"Sign In Now"]}),e.jsx("button",{onClick:()=>{s()},className:"w-full btn-secondary",children:"Continue as Guest"})]})]})})}):null}function Nt({size:t="md",message:a,fullScreen:s=!1}){const r={sm:"w-5 h-5",md:"w-8 h-8",lg:"w-12 h-12"},n=e.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`${r[t]} absolute inset-0 border-4 border-brand-gold/20 rounded-full`}),e.jsx("div",{className:`${r[t]} absolute inset-0 border-4 border-transparent border-t-brand-gold rounded-full animate-spin`}),e.jsx("div",{className:`${r[t]} absolute inset-0 border-4 border-transparent border-t-brand-gold-light rounded-full animate-spin`,style:{animationDirection:"reverse",animationDuration:"1s"}})]}),a&&e.jsx("p",{className:"text-gray-600 dark:text-gray-400 animate-pulse mt-8",children:a})]});return s?e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-white/80 dark:bg-brand-black/80 backdrop-blur-sm z-50",children:n}):n}function kt({variant:t="floating",dismissible:s=!0,showDelay:r=3e3}){const[n,i]=B.useState("inline"===t),[o,l]=B.useState(!1);B.useEffect((()=>{if("inline"===t)return void i(!0);const e=localStorage.getItem("socialBannerDismissed");if(e){const t=parseInt(e),a=864e5;if(Date.now()-t<a)return void l(!0)}const a=setTimeout((()=>{i(!0)}),r);return()=>clearTimeout(a)}),[r,t]);const c=()=>{i(!1),"inline"!==t&&localStorage.setItem("socialBannerDismissed",Date.now().toString()),setTimeout((()=>l(!0)),300)};if(o&&"inline"!==t)return null;const d=[{name:"TikTok",icon:({className:t})=>e.jsx("svg",{className:t,fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M19.59 6.69a4.83 4.83 0 01-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 01-5.2 1.74 2.89 2.89 0 012.31-4.64 2.93 2.93 0 01.88.13V9.4a6.84 6.84 0 00-1-.05A6.33 6.33 0 005 20.1a6.34 6.34 0 0010.86-4.43v-7a8.16 8.16 0 004.77 1.52v-3.4a4.85 4.85 0 01-1-.1z"})}),handle:"@pitbox2025",url:"https://www.tiktok.com/@pitbox2025",gradient:"from-cyan-400 to-pink-500"},{name:"Instagram",icon:E,handle:"@pitbox25",url:"https://www.instagram.com/pitbox25",gradient:"from-purple-600 to-pink-600"},{name:"Facebook",icon:P,handle:"@pitbox25",url:"https://www.facebook.com/pitbox25",gradient:"from-blue-600 to-blue-700"},{name:"Threads",icon:I,handle:"@pitbox25",url:"https://www.threads.net/@pitbox25",gradient:"from-gray-900 to-black"},{name:"X",icon:({className:t})=>e.jsx("svg",{className:t,fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),handle:"@PitBox2025",url:"https://x.com/PitBox2025",gradient:"from-gray-800 to-gray-950"}];return"inline"!==t||o?"sticky"===t?e.jsx("div",{className:"sticky top-20 z-30 transition-all duration-500 "+(n?"translate-y-0 opacity-100":"-translate-y-full opacity-0"),children:e.jsx("div",{className:"bg-gradient-to-r from-brand-gold via-orange-500 to-brand-gold-dark text-white shadow-xl",children:e.jsx("div",{className:"container mx-auto px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(C,{className:"w-5 h-5 animate-pulse"}),e.jsx("p",{className:"font-medium text-sm md:text-base",children:"Follow us for daily racing tips & exclusive content!"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[d.map((t=>{const a=t.icon;return e.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-lg bg-white/20 hover:bg-white/30 transition-all duration-200 hover:scale-110","aria-label":t.name,children:e.jsx(a,{className:"w-4 h-4"})},t.name)})),s&&e.jsx("button",{onClick:c,className:"p-2 rounded-lg bg-white/20 hover:bg-white/30 transition-colors ml-2","aria-label":"Dismiss",children:e.jsx(a,{className:"w-4 h-4"})})]})]})})})}):e.jsx("div",{className:"fixed bottom-6 right-6 z-50 max-w-md transition-all duration-500 "+(n?"translate-x-0 opacity-100":"translate-x-full opacity-0"),children:e.jsxs("div",{className:"glass-panel p-6 bg-white dark:bg-gray-900 shadow-2xl rounded-2xl border-2 border-brand-gold/20",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-brand-gold to-orange-500",children:e.jsx(C,{className:"w-5 h-5 text-white"})}),e.jsx("h4",{className:"text-lg font-bold",children:"Stay Connected!"})]}),s&&e.jsx("button",{onClick:c,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors","aria-label":"Dismiss",children:e.jsx(a,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Follow us on social media for daily racing news, track updates, and exclusive content!"}),e.jsx("div",{className:"space-y-2 mb-4",children:d.map((t=>{const a=t.icon;return e.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors group",children:[e.jsx("div",{className:`p-2 rounded-lg bg-gradient-to-br ${t.gradient}`,children:e.jsx(a,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-semibold",children:t.name}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:t.handle})]}),e.jsx(S,{className:"w-4 h-4 text-gray-400 group-hover:text-brand-gold transition-colors"})]},t.name)}))}),e.jsx(J,{to:"/social",className:"block w-full text-center py-2 px-4 rounded-lg bg-gradient-to-r from-brand-gold to-orange-500 text-white font-medium hover:shadow-lg transition-all duration-200 hover:scale-105",children:"View All Social Channels"})]})}):e.jsxs("div",{className:"glass-panel p-6 bg-gradient-to-br from-brand-gold/10 via-orange-50/50 to-brand-gold-dark/10 dark:from-brand-gold/5 dark:via-gray-900/50 dark:to-brand-gold-dark/5 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-brand-gold/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-orange-500/5 rounded-full blur-3xl translate-y-1/2 -translate-x-1/2"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(C,{className:"w-6 h-6 text-brand-gold animate-pulse"}),e.jsx("h3",{className:"text-2xl font-bold",children:"Join Our Pit Community"})]}),s&&e.jsx("button",{onClick:c,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors","aria-label":"Dismiss",children:e.jsx(a,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-6 max-w-2xl",children:"Follow us on social media for daily racing news, track updates, technical tips, and exclusive content from the racing world."}),e.jsx("div",{className:"flex flex-wrap items-center gap-4",children:d.map((t=>{const a=t.icon;return e.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"group flex items-center gap-3 px-4 py-3 rounded-xl bg-white dark:bg-gray-800 hover:shadow-lg transition-all duration-300 hover:scale-105",children:[e.jsx("div",{className:`p-2 rounded-lg bg-gradient-to-br ${t.gradient}`,children:e.jsx(a,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-sm font-semibold",children:t.name}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:t.handle})]}),e.jsx(S,{className:"w-4 h-4 text-gray-400 group-hover:text-brand-gold transition-colors"})]},t.name)}))}),e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:e.jsxs(J,{to:"/social",className:"inline-flex items-center gap-2 text-brand-gold hover:text-brand-gold-dark font-medium group",children:[e.jsx("span",{children:"View all our social channels"}),e.jsx(S,{className:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]})})]})]})}function _t({children:t,requiredTier:a="basic"}){const{subscriptionStatus:r,isLoading:n,error:i}=Pe(),o=G();return n?e.jsxs("div",{className:"glass-panel p-6 flex items-center justify-center",children:[e.jsx(s,{className:"w-6 h-6 animate-spin text-brand-gold mr-3"}),e.jsx("span",{children:"Checking subscription..."})]}):"basic"===a&&("basic"===r||"premium"===r)||"premium"===a&&"premium"===r?e.jsx(e.Fragment,{children:t}):e.jsxs("div",{className:"glass-panel p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-brand-gold/10 flex items-center justify-center mx-auto mb-4",children:e.jsx(A,{className:"w-8 h-8 text-brand-gold"})}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Subscription Required"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"premium"===a?"This feature requires an Encrypted Setup Access subscription.":"This feature requires a subscription."}),e.jsx("button",{onClick:()=>o("/subscription"),className:"btn-primary",children:"View Subscription Plans"})]})}function Ct(){const t=G(),{user:a}=ue(),[s,r]=B.useState(!0),[n,o]=B.useState(null),[l,c]=B.useState(!1),[d,m]=B.useState(!1);return e.jsxs("div",{className:"space-y-12",children:[d&&e.jsx(Nt,{fullScreen:!0,message:"Loading..."}),e.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-brand-black via-brand-black-light to-brand-black-dark",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-radial from-brand-gold/20 via-transparent to-transparent"}),e.jsx("div",{className:"relative px-6 py-12 sm:px-12 sm:py-24",children:e.jsxs("div",{className:"mx-auto max-w-4xl text-center",children:[e.jsx("div",{className:"relative w-full max-w-lg mx-auto mb-8",children:e.jsx("img",{src:"/android-icon-512-512.png",alt:"PIT-BOX.COM Logo",width:"800",height:"240",className:"w-full h-auto object-contain drop-shadow-2xl transform hover:scale-105 transition-transform duration-300"})}),e.jsx("h1",{className:"text-4xl font-bold tracking-tight text-white sm:text-6xl mb-6",children:"The Future of Racing is Here"}),e.jsx("p",{className:"text-xl leading-8 text-gray-300 mb-8",children:"Experience the most advanced setup management platform in motorsports history. PIT-BOX.COM revolutionizes how champions prepare, compete, and win."})]})})]}),e.jsxs("div",{className:"glass-panel p-8 bg-gradient-to-br from-brand-gold/10 to-brand-gold-dark/10 transform hover:scale-[1.02] transition-all duration-300",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-brand-gold to-brand-gold-light bg-clip-text text-transparent mb-6",children:"Master Your Racing Machine"}),e.jsx("p",{className:"text-xl text-gray-700 dark:text-gray-300 max-w-4xl mx-auto leading-relaxed",children:"Welcome to the heart of PIT-BOX.COM - your comprehensive setup management system. Our professional-grade tools are designed to help you achieve peak performance and maintain your competitive edge. Select your vehicle class below to access detailed setup sheets, track changes, and optimize your racing machine for victory."})]}),e.jsxs("div",{className:"max-w-3xl mx-auto space-y-4",children:[e.jsxs(g.button,{className:"w-full glass-panel p-6 cursor-pointer bg-gradient-to-br from-brand-gold/5 to-brand-gold-dark/5 hover:from-brand-gold/10 hover:to-brand-gold-dark/10 transition-all duration-300 relative group",onClick:()=>r(!s),whileHover:{scale:1.02},transition:{type:"spring",stiffness:400,damping:10},children:[e.jsx("div",{className:"absolute inset-0 rounded-xl border-2 border-brand-gold/50 opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(L,{className:"w-8 h-8 text-brand-gold"}),e.jsx("span",{className:"text-2xl font-bold",children:"Racing Setup Headquarters"})]}),e.jsx(i,{className:"w-6 h-6 transition-transform duration-300 "+(s?"rotate-180":"")})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-left mt-2 pl-12",children:"Unlock championship-caliber performance with our professional setup tools"}),e.jsxs("div",{className:"flex items-center gap-2 mt-3 text-brand-gold font-medium pl-12",children:[e.jsx(O,{className:"w-5 h-5"}),e.jsx("span",{children:"Click to access your racing vehicle setup tools"}),e.jsx(T,{className:"w-5 h-5 transform group-hover:translate-x-2 transition-transform"})]})]}),s&&e.jsx(_t,{children:e.jsx("div",{className:"space-y-4 transition-all duration-500 opacity-100 max-h-[2000px] mb-48",children:Ca.Vehicles.map((a=>e.jsxs("div",{className:"pl-4",children:[e.jsx("button",{className:"w-full glass-panel p-4 cursor-pointer bg-gradient-to-br from-brand-gold/5 to-brand-gold-dark/5 hover:from-brand-gold/10 hover:to-brand-gold-dark/10 transition-all duration-300",onClick:()=>o(n===a.name?null:a.name),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(R,{className:"w-6 h-6 text-brand-gold"}),e.jsxs("span",{className:"text-xl font-semibold",children:["Setup Tools: ",a.name]})]}),e.jsx(i,{className:"w-5 h-5 transition-transform duration-300 "+(n===a.name?"rotate-180":"")})]})}),e.jsx("div",{className:"grid gap-3 pl-4 mt-3 transition-all duration-300 "+(n===a.name?"opacity-100 max-h-[1000px]":"opacity-0 max-h-0 overflow-hidden"),children:a.subcategories.map((a=>e.jsx("button",{onClick:()=>(async e=>{m(!0);try{await t(e)}finally{m(!1)}})(a.path),className:"glass-panel p-4 text-left group hover:bg-brand-gold/5 transition-all duration-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(f,{className:"w-5 h-5 text-brand-gold"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-lg font-medium",children:a.name}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Access setup sheets and optimization tools"})]})]}),e.jsx(T,{className:"w-5 h-5 transform group-hover:translate-x-1 transition-transform"})]})},a.path)))})]},a.name)))})}),e.jsxs("div",{className:"text-center mt-12 mb-16",children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Get started now with our professional setup management tools"}),!a&&e.jsxs("button",{onClick:()=>t("/signin"),className:"btn-primary flex items-center gap-2 mx-auto",children:[e.jsx(A,{className:"w-5 h-5"}),"Sign In to Access Setup Tools"]}),a&&!s&&e.jsxs("button",{onClick:()=>r(!0),className:"btn-primary flex items-center gap-2 mx-auto",children:[e.jsx(f,{className:"w-5 h-5"}),"View Setup Tools"]}),a&&s&&e.jsxs("button",{onClick:()=>t("/subscription"),className:"btn-primary flex items-center gap-2 mx-auto mb-8",children:[e.jsx(w,{className:"w-5 h-5"}),"View Subscription Plans"]})]})]})]}),e.jsxs("div",{className:"glass-panel p-8 mt-12 mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-center mb-12",children:"Why Champions Choose PIT-BOX.COM"}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(O,{className:"w-8 h-8 text-brand-gold"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Real-Time Excellence"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Make split-second decisions with confidence. Update and analyze setups instantly during race day."})]})]}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(D,{className:"w-8 h-8 text-brand-gold"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Universal Access"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Your entire racing history at your fingertips, accessible anywhere in the world."})]})]}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(y,{className:"w-8 h-8 text-brand-gold"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Team Synergy"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Seamless collaboration between crew members, engineers, and drivers."})]})]}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(M,{className:"w-8 h-8 text-brand-gold"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Performance Analytics"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Advanced data analysis reveals winning patterns and optimization opportunities."})]})]}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(A,{className:"w-8 h-8 text-brand-gold"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Secure Innovation"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Your proprietary setups are protected with bank-level security protocols."})]})]}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(v,{className:"w-8 h-8 text-brand-gold"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Pit Community"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Join an elite network of racing professionals and champions."})]})]})]})]}),e.jsxs("div",{className:"glass-panel p-8 bg-gradient-to-br from-brand-gold/5 to-brand-gold-light/5",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx(z,{className:"w-6 h-6 text-brand-gold"}),e.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-brand-gold to-brand-gold-light bg-clip-text text-transparent",children:"Sponsored Affiliates"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Proud to partner with premier racing venues"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 max-w-5xl mx-auto",children:[e.jsxs("a",{href:"https://www.silverdollarspeedway.com",target:"_blank",rel:"noopener noreferrer",className:"glass-panel p-6 hover:shadow-xl transition-all duration-300 group relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-brand-gold/10 to-brand-gold-light/10 opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex items-center justify-end mb-4",children:e.jsx("div",{className:"px-2 py-1 rounded-full bg-brand-gold/10 text-brand-gold text-xs font-semibold",children:"SPONSORED"})}),e.jsx("div",{className:"mb-4",children:e.jsx("img",{src:"/logo.png",alt:"Silver Dollar Speedway",className:"w-full h-auto object-contain max-h-24 md:max-h-32 mx-auto"})}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-600 dark:text-gray-400 mb-3",children:[e.jsx(U,{className:"w-4 h-4"}),e.jsx("span",{children:"Chico, California"})]}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4 text-center",children:"Home of the legendary Gold Cup Race of Champions and exciting sprint car racing. One of California's premier dirt racing facilities."}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-brand-gold font-semibold group-hover:gap-3 transition-all",children:[e.jsx("span",{children:"Visit Silver Dollar Speedway"}),e.jsx(S,{className:"w-5 h-5"})]})]})]}),e.jsxs("a",{href:"https://www.thunderbowlraceway.com",target:"_blank",rel:"noopener noreferrer",className:"glass-panel p-6 hover:shadow-xl transition-all duration-300 group relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-brand-gold/10 to-brand-gold-light/10 opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex items-center justify-end mb-4",children:e.jsx("div",{className:"px-2 py-1 rounded-full bg-brand-gold/10 text-brand-gold text-xs font-semibold",children:"SPONSORED"})}),e.jsx("div",{className:"mb-4",children:e.jsx("img",{src:"/image (2).png",alt:"Thunderbowl Raceway",className:"w-full h-auto object-contain max-h-24 md:max-h-32 mx-auto"})}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-600 dark:text-gray-400 mb-3",children:[e.jsx(U,{className:"w-4 h-4"}),e.jsx("span",{children:"Tulare, California"})]}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4 text-center",children:"Home of exciting sprint car racing featuring NARC 410 Sprint Cars and the annual Trophy Cup. One of California's premier dirt racing venues."}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-brand-gold font-semibold group-hover:gap-3 transition-all",children:[e.jsx("span",{children:"Visit Thunderbowl Raceway"}),e.jsx(S,{className:"w-5 h-5"})]})]})]})]})]}),e.jsx("div",{className:"glass-panel p-8 bg-gradient-to-br from-brand-gold/10 via-brand-gold/5 to-brand-gold/10 mb-24",children:e.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[e.jsx(_,{className:"w-16 h-16 text-brand-gold mx-auto mb-6 animate-pulse"}),e.jsx("h2",{className:"text-3xl font-bold mb-6 bg-gradient-to-r from-brand-gold to-brand-gold-light bg-clip-text text-transparent",children:"With Gratitude"}),e.jsx("p",{className:"text-xl text-gray-700 dark:text-gray-300 leading-relaxed mb-8",children:"PIT-BOX.COM would not be possible without the incredible support and dedication of many amazing people. A special heartfelt thank you to my beautiful wife, whose unwavering support, patience, and understanding has been the cornerstone of this journey. Her sacrifices of time and endless encouragement have made this dream a reality."}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:"To our early adopters, development team, and racing community - your trust and feedback have been invaluable in shaping PIT-BOX.COM into the revolutionary platform it is today. Together, we're changing the future of racing."})]})}),e.jsx(kt,{variant:"inline",dismissible:!0}),e.jsx("div",{className:"h-16 md:h-0"}),e.jsx(vt,{isOpen:l,onClose:()=>c(!1),onSignIn:()=>{var e;c(!1),null==(e=document.querySelector(".sign-in-trigger"))||e.click()}}),e.jsx(Le,{className:"hidden sign-in-trigger"})]})}function St(){const[t,a]=B.useState(!0),[r,n]=B.useState(""),[i,c]=B.useState(""),[u,h]=B.useState(!1),[x,p]=B.useState(null),[g,f]=B.useState(""),[b,y]=B.useState(""),[j,w]=B.useState(""),[v,N]=B.useState(null),[k,_]=B.useState(!1),C=G(),S=Y(),{signIn:E,signUp:P,user:I,connectionError:A,retryConnection:L}=ue(),{executeWithRetry:O}=ce(),T=["Silva57","Daniels5","Larson57","Colby5","Andy92","Brad49","Kyle54","Kaleb3","Slingin18","Claygrip33","Highline22","Dirtdog77","Slidejob04","Cushion55","Roostertail81","Gasit49","Sprintcar92","Latemodel68","Bullring11","Checkered99","Fullthrottle07","Redclay36","Wheelie29","Chassis14","Featurewin63","Trackside70","Pitside88","Glorylaps44","Pitboxmike","Chaz44","Chaz33","Chaz22","Chaz55","Chaz11"];B.useEffect((()=>{var e,t;if(I){const a=(null==(t=null==(e=S.state)?void 0:e.from)?void 0:t.pathname)||"/home";C(a,{replace:!0})}}),[I,C,S]);const R=async e=>{try{const{data:t,error:a}=await O((async()=>await ie.from("profiles").select("id").eq("promo_code",e).limit(1)));if(a)throw a;const s=t&&t.length>0;return _(s),s&&N(!1),s}catch(t){return!1}},D=e=>{if(!e)return!1;const t=e.toLowerCase(),a=t.charAt(0).toUpperCase()+t.slice(1);return T.includes(a)};return e.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-brand-black via-brand-black-light to-brand-black-dark",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-radial from-brand-gold/10 via-transparent to-transparent"}),e.jsxs("div",{className:"relative w-full max-w-md",children:[e.jsxs("div",{className:"glass-panel p-8 bg-white/95 dark:bg-gray-800/95",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("img",{src:"/android-icon-192-192.png",alt:"PIT-BOX.COM",className:"w-24 h-24 mx-auto mb-4"}),e.jsx("h1",{className:"text-3xl font-bold mb-2",children:t?"Sign In to PitBox":"Create PitBox Account"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:t?"Welcome back!":"Join the winners circle"})]}),A&&e.jsx("div",{className:"mb-4 p-3 rounded-lg bg-red-100 dark:bg-red-900/30 border border-red-200 dark:border-red-800",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(o,{className:"w-4 h-4 text-red-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-sm text-red-700 dark:text-red-300 mb-2",children:["Connection Error: ",A]}),e.jsxs("button",{onClick:async()=>{await L()},className:"flex items-center gap-1 text-xs text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300",children:[e.jsx(l,{className:"w-3 h-3"}),"Retry Connection"]})]})]})}),e.jsxs("form",{onSubmit:async e=>{var s,n;e.preventDefault(),h(!0),p(null);try{if(t){const{error:e}=await E(r,i);if(e)e.message.includes("Invalid login credentials")?p("Invalid email or password"):p(e.message);else{const e=(null==(n=null==(s=S.state)?void 0:s.from)?void 0:n.pathname)||"/home";C(e,{replace:!0})}}else{if(!g.trim())return p("Username is required"),void h(!1);if(j){const e=j.toLowerCase(),t=e.charAt(0).toUpperCase()+e.slice(1);if(!D(t))return p("Invalid promo code"),void h(!1);if(await R(t))return p("This promo code has already been used"),void h(!1)}const{error:e,success:t}=await P(r,i);if(e)e.message.includes("user_already_exists")?(p("An account with this email already exists. Please sign in instead."),a(!0)):p(e.message);else if(t){const{data:{user:e}}=await ie.auth.getUser();if(e){let t=null;if(j&&D(j)){const e=j.toLowerCase();t=e.charAt(0).toUpperCase()+e.slice(1)}const{error:a}=await ie.from("profiles").upsert({id:e.id,username:g.trim(),full_name:b.trim()||null,promo_code:t,has_premium:!!t,updated_at:(new Date).toISOString()})}C("/terms-of-service",{replace:!0})}}}catch(o){p("An unexpected error occurred. Please try again.")}finally{h(!1)}},className:"space-y-4",children:[x&&e.jsx("div",{className:"p-3 rounded-lg bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 text-sm",children:x}),!t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"username",className:"block text-sm font-medium mb-1",children:["Username ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"username",value:g,onChange:e=>f(e.target.value),className:"w-full p-3 rounded-lg bg-white/50 dark:bg-gray-800/50 border border-gray-300 dark:border-gray-600 focus:border-brand-gold focus:ring-2 focus:ring-brand-gold/20 outline-none transition",placeholder:"Choose a username",required:!0,disabled:u})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium mb-1",children:"Full Name"}),e.jsx("input",{type:"text",id:"fullName",value:b,onChange:e=>y(e.target.value),className:"w-full p-3 rounded-lg bg-white/50 dark:bg-gray-800/50 border border-gray-300 dark:border-gray-600 focus:border-brand-gold focus:ring-2 focus:ring-brand-gold/20 outline-none transition",placeholder:"Your full name",disabled:u})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"promoCode",className:"block text-sm font-medium mb-1",children:["Promo Code",e.jsx("span",{className:"ml-1 text-xs text-gray-500",children:"(Optional)"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",id:"promoCode",value:j,onChange:e=>{const t=e.target.value;w(t),(e=>{if(!e)return N(null),_(!1),!1;const t=e.toLowerCase(),a=t.charAt(0).toUpperCase()+t.slice(1),s=T.includes(a);N(s),s&&R(a)})(t)},className:`w-full p-3 rounded-lg bg-white/50 dark:bg-gray-800/50 border ${!0!==v||k?!1===v||k?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-gray-600":"border-green-500 dark:border-green-500"} focus:ring-2 focus:ring-brand-gold/20 outline-none transition`,placeholder:"Enter promo code if you have one",disabled:u}),!0===v&&!k&&e.jsx(m,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-green-500"})]}),!0===v&&!k&&e.jsx("p",{className:"mt-1 text-xs text-green-600 dark:text-green-400",children:"Valid promo code! You'll have premium access."}),!1===v&&j&&!k&&e.jsx("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:"Invalid promo code."}),k&&e.jsx("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:"This promo code has already been used."})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium mb-1",children:"Email"}),e.jsx("input",{type:"email",id:"email",value:r,onChange:e=>n(e.target.value),className:"w-full p-3 rounded-lg bg-white/50 dark:bg-gray-800/50 border border-gray-300 dark:border-gray-600 focus:border-brand-gold focus:ring-2 focus:ring-brand-gold/20 outline-none transition",placeholder:"your@email.com",required:!0,autoComplete:"email",disabled:u})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium mb-1",children:"Password"}),e.jsx("input",{type:"password",id:"password",value:i,onChange:e=>c(e.target.value),className:"w-full p-3 rounded-lg bg-white/50 dark:bg-gray-800/50 border border-gray-300 dark:border-gray-600 focus:border-brand-gold focus:ring-2 focus:ring-brand-gold/20 outline-none transition",placeholder:"••••••••",required:!0,autoComplete:t?"current-password":"new-password",disabled:u,minLength:6}),!t&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 6 characters"})]}),e.jsx("button",{type:"submit",disabled:u||j&&(!1===v||k)||!!A,className:"w-full bg-brand-gold text-white py-3 px-4 rounded-lg hover:bg-brand-gold-dark transition text-lg flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed font-semibold shadow-lg hover:shadow-xl",children:u?e.jsxs(e.Fragment,{children:[e.jsx(s,{className:"w-5 h-5 animate-spin"}),t?"Signing In...":"Creating Account..."]}):e.jsxs(e.Fragment,{children:[e.jsx(d,{className:"w-5 h-5"}),t?"Sign In":"Create Account"]})}),e.jsxs("p",{className:"text-sm text-center text-gray-600 dark:text-gray-400",children:[t?"Don't have an account?":"Already have an account?"," ",e.jsx("button",{type:"button",className:"text-brand-gold hover:text-brand-gold-dark dark:text-brand-gold-light dark:hover:text-brand-gold font-medium",onClick:()=>{a(!t),p(null),N(null),w(""),_(!1)},children:t?"Create one":"Sign in"})]})]})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsx("button",{onClick:()=>C(-1),className:"text-gray-400 hover:text-gray-300 text-sm",children:"Go Back"})})]})]})}const Et=B.lazy((()=>X((()=>import("./WinglessSprints-KPYRDP9e.js")),__vite__mapDeps([10,1,2,11,12,13,14,4,3])))),Pt=B.lazy((()=>X((()=>import("./CrateSprints-B76e4m4E.js")),__vite__mapDeps([15,1,2,11,12,13,14,4,3])))),It=B.lazy((()=>X((()=>import("./Sprint360-DMsL5884.js")),__vite__mapDeps([16,1,2,11,12,13,14,4,3])))),At=B.lazy((()=>X((()=>import("./Sprint410-B4PiOdPm.js")),__vite__mapDeps([17,1,2,11,12,13,14,4,3])))),Lt=B.lazy((()=>X((()=>import("./NonWinged410-CmV_lRga.js")),__vite__mapDeps([18,1,2,11,12,13,14,4,3])))),Ot=B.lazy((()=>X((()=>import("./DirtModified2-mnGTMioQ.js")),__vite__mapDeps([19,1,2,11,12,13,14,4,3])))),Tt=B.lazy((()=>X((()=>import("./UMPModified-oefWF-tz.js")),__vite__mapDeps([20,1,2,11,12,13,14,4,3])))),Rt=B.lazy((()=>X((()=>import("./IMCAModifieds-UReNUvJA.js")),__vite__mapDeps([21,1,2,11,12,13,14,4,3])))),Dt=B.lazy((()=>X((()=>import("./IMCASportMods-DK7ytuSO.js")),__vite__mapDeps([22,1,2,11,12,13,14,4,3])))),Mt=B.lazy((()=>X((()=>import("./BModified-D8HlulAF.js")),__vite__mapDeps([23,1,2,11,12,13,14,4,3])))),zt=B.lazy((()=>X((()=>import("./Micro600-3DAa6vB3.js")),__vite__mapDeps([24,1,2,11,12,13,14,4,3])))),Ut=B.lazy((()=>X((()=>import("./MiniSprint-Ce6kIQpE.js")),__vite__mapDeps([25,1,2,11,12,13,14,4,3])))),Vt=B.lazy((()=>X((()=>import("./JrSprint-BhT78FRR.js")),__vite__mapDeps([26,1,2,11,12,13,14,4,3])))),$t=B.lazy((()=>X((()=>import("./QuarterMidget-Dijd-s80.js")),__vite__mapDeps([27,1,2,11,12,13,14,4,3])))),Ft=B.lazy((()=>X((()=>import("./FocusMidget-YZFlKdPQ.js")),__vite__mapDeps([28,1,2,11,12,13,14,4,3])))),qt=B.lazy((()=>X((()=>import("./OutlawKart-D9c1qv0l.js")),__vite__mapDeps([29,1,2,11,12,13,14,4,3])))),Bt=B.lazy((()=>X((()=>import("./LO206Kart-C6-dUFiP.js")),__vite__mapDeps([30,1,2,11,12,13,14,4,3])))),Wt=B.lazy((()=>X((()=>import("./LateDirt-DM-5wMiB.js")),__vite__mapDeps([31,1,2,11,12,13,14,4,3])))),Ht=B.lazy((()=>X((()=>import("./CrateLateMod-Cmvf4d1O.js")),__vite__mapDeps([32,1,2,11,12,13,14,4,3])))),Xt=B.lazy((()=>X((()=>import("./SuperLateModel-B88zyGPV.js")),__vite__mapDeps([33,1,2,11,12,13,14,4,3])))),Gt=B.lazy((()=>X((()=>import("./StreetStock-Dm1E4rlT.js")),__vite__mapDeps([34,1,2,11,12,13,14,4,3])))),Yt=B.lazy((()=>X((()=>import("./RestrictedBoxStock-0ZpUIpvl.js")),__vite__mapDeps([35,1,2,11,12,13,14,4,3])))),Jt=B.lazy((()=>X((()=>import("./BoxStock-o6-QWb67.js")),__vite__mapDeps([36,1,2,11,12,13,14,4,3])))),Kt=B.lazy((()=>X((()=>import("./Intermediate250-CTICFcas.js")),__vite__mapDeps([37,1,2,11,12,13,14,4,3])))),Qt=B.lazy((()=>X((()=>import("./OpenIntermediate-qNUn3YHu.js")),__vite__mapDeps([38,1,2,11,12,13,14,4,3])))),Zt=B.lazy((()=>X((()=>import("./OpenClass-CV1CL1Qt.js")),__vite__mapDeps([39,1,2,11,12,13,14,4,3])))),ea=B.lazy((()=>X((()=>import("./SportsmanClass-DXhBNuH-.js")),__vite__mapDeps([40,1,2,11,12,13,14,4,3])))),ta=B.lazy((()=>X((()=>import("./CagedCloneClass-CS1a7iI9.js")),__vite__mapDeps([41,1,2,11,12,13,14,4,3])))),aa=B.lazy((()=>X((()=>import("./Contact-CrD0nIuJ.js")),__vite__mapDeps([42,1,2,4,3])))),sa=B.lazy((()=>X((()=>import("./Affiliates-BBTcgnHa.js")),__vite__mapDeps([43,1,2,4])))),ra=B.lazy((()=>X((()=>import("./PartnerWithUs-CLagkIac.js")),__vite__mapDeps([44,1,2,4,3])))),na=B.lazy((()=>X((()=>import("./SwapMeet-Ixob39Bf.js")),__vite__mapDeps([45,1,2,46,47,48,49,4,3])))),ia=B.lazy((()=>X((()=>import("./Profile-BQgIqWNu.js")),__vite__mapDeps([50,1,2,51,4,48,52,3])))),oa=B.lazy((()=>X((()=>import("./UserProfile-Y4s3HFo5.js")),__vite__mapDeps([53,1,2,54,46,47,48,55,4,3])))),la=B.lazy((()=>X((()=>import("./RacingCommunity-C3PA4-Gi.js")),__vite__mapDeps([56,1,2,57,3,49,47,48,4,55])))),ca=B.lazy((()=>X((()=>import("./PostView-CR7_lTSh.js")),__vite__mapDeps([58,1,2,57,3,49,47,48,59,4,60])))),da=B.lazy((()=>X((()=>import("./TireTool-Dj5UzMRy.js")),__vite__mapDeps([61,1,2,62,13,4,3])))),ma=B.lazy((()=>X((()=>import("./Friends-D2xX_tiE.js")),__vite__mapDeps([63,1,2,54,4,3])))),ua=B.lazy((()=>X((()=>import("./SavedSetups-9NS0CcBh.js").then((e=>e.S))),__vite__mapDeps([64,1,2,3,12,4])))),ha=B.lazy((()=>X((()=>import("./Subscription-BLJ3i6JX.js")),__vite__mapDeps([65,1,2,51,4,3])))),xa=B.lazy((()=>X((()=>import("./SubscriptionSuccess-CX18KuG4.js")),__vite__mapDeps([66,1,2,4])))),pa=B.lazy((()=>X((()=>import("./SubscriptionCancel-DAgYDahj.js")),__vite__mapDeps([67,1,2,4])))),ga=B.lazy((()=>X((()=>import("./TermsOfService-Dg3JiORj.js")),__vite__mapDeps([68,1,2,4,3])))),fa=B.lazy((()=>X((()=>import("./Privacy-DeyK-TFz.js")),__vite__mapDeps([69,1,2,4])))),ba=B.lazy((()=>X((()=>import("./AdvertiserTerms-pG5hHjUr.js")),__vite__mapDeps([70,1,2,4])))),ya=B.lazy((()=>X((()=>import("./MotorWear-DgwmQfp3.js")),__vite__mapDeps([71,1,2,72,3,4])))),ja=B.lazy((()=>X((()=>import("./MaintenanceChecklist-DKWfNyLg.js")),__vite__mapDeps([73,1,2,74,4,3])))),wa=B.lazy((()=>X((()=>import("./Tools-DtGKGT3U.js")),__vite__mapDeps([75,3,2,1,4])))),va=B.lazy((()=>X((()=>import("./SocialMedia-DsrTJSJJ.js")),__vite__mapDeps([76,1,2,4])))),Na=B.lazy((()=>X((()=>import("./QRCodeDownload-2QM-1qFx.js")),__vite__mapDeps([77,1,2,52]))));function ka(){return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-brand-black",children:e.jsxs("div",{className:"text-center",children:[e.jsx(s,{className:"w-12 h-12 animate-spin text-brand-gold mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"Loading..."})]})})}function _a(){const{pathname:e}=Y();return B.useEffect((()=>{window.scrollTo(0,0)}),[e]),null}const Ca={Vehicles:[{name:"Sprint Cars",subcategories:[{name:"Wingless Sprints",path:"/wingless"},{name:"Crate Sprints",path:"/crate"},{name:"360 Sprints",path:"/360"},{name:"410 Sprints",path:"/410"},{name:"Non-Winged 410 Sprints",path:"/nonwinged410"},{name:"600 Micro",path:"/600"},{name:"Mini Sprint",path:"/mini"},{name:"Jr Sprint",path:"/jr"}]},{name:"Midget Cars",subcategories:[{name:"Quarter Midget",path:"/quarter"},{name:"Focus Midget",path:"/focus"}]},{name:"Modifieds",subcategories:[{name:"Dirt Modified 2",path:"/modified2"},{name:"UMP Modifieds",path:"/ump-modified"},{name:"IMCA Modifieds",path:"/imca-modified"},{name:"IMCA SportMods",path:"/imca-sportmod"},{name:"B-Modifieds",path:"/b-modified"}]},{name:"Late Models",subcategories:[{name:"Late Model Dirt",path:"/latemodel"},{name:"Crate Late Models",path:"/crate-latemodel"},{name:"Super Late Model",path:"/super-latemodel"}]},{name:"Stock Cars",subcategories:[{name:"Street Stocks",path:"/street-stock"}]},{name:"Youth Racing / Kart",subcategories:[{name:"Outlaw Kart",path:"/outlaw"},{name:"LO206 Kart",path:"/lo206-kart"},{name:"Restricted Box Stock",path:"/restricted-boxstock"},{name:"Box Stock Class",path:"/boxstock"},{name:"250 Intermediate",path:"/intermediate250"},{name:"Open Intermediate",path:"/open-intermediate"},{name:"Open Class",path:"/open-class"},{name:"Sportsman Class",path:"/sportsman"},{name:"Caged Clone Class",path:"/caged-clone"}]}]};function Sa(){const[t,s]=B.useState(!1),[r,n]=B.useState(!1),[i,o]=B.useState(0),[l,c]=B.useState(!1),[d,m]=B.useState(null),[u,h]=B.useState(null),[x,p]=B.useState(!0),[g,f]=B.useState(!1),b=Y(),{user:y}=ue(),{showNav:j}=function(){const e=B.useContext(Ie);if(void 0===e)throw new Error("useNavVisibility must be used within a NavVisibilityProvider");return e}(),w="/"===b.pathname;(()=>{const[e,t]=B.useState(!1),[a,s]=B.useState(null);B.useEffect((()=>(Me.isNativePlatform()&&r(),()=>{Me.isNativePlatform()&&tt.removeAllListeners()})),[]);const r=async()=>{let e=await tt.checkPermissions();"prompt"===e.receive&&(e=await tt.requestPermissions()),"granted"===e.receive&&(await tt.register(),await tt.addListener("registration",(async e=>{s(e.value),await n(e.value),t(!0)})),await tt.addListener("registrationError",(e=>{})),await tt.addListener("pushNotificationReceived",(e=>{})),await tt.addListener("pushNotificationActionPerformed",(e=>{})))},n=async e=>{try{const{data:{user:t}}=await ie.auth.getUser();if(!t)return;const a=Me.getPlatform(),s={platform:a,userAgent:navigator.userAgent,timestamp:(new Date).toISOString()},{error:r}=await ie.from("push_notification_tokens").upsert({user_id:t.id,token:e,platform:a,device_info:s,last_used:(new Date).toISOString()},{onConflict:"token"})}catch(La){}}})(),B.useEffect((()=>{ht.initialize()}),[]),B.useEffect((()=>{"true"===sessionStorage.getItem("hasSeenVideoSplash")&&(f(!0),p(!1))}),[]);B.useEffect((()=>{const e=()=>{const e=window.scrollY;c(e>i&&e>100),o(e)};return window.addEventListener("scroll",e,{passive:!0}),()=>window.removeEventListener("scroll",e)}),[i]);const v=()=>{s(!t),document.documentElement.classList.toggle("dark")},N=()=>{n(!1)};return x&&!g?e.jsx(ut,{onComplete:()=>{p(!1),f(!0),sessionStorage.setItem("hasSeenVideoSplash","true")}}):y&&w?e.jsx(Q,{to:"/home",replace:!0}):w?e.jsxs("div",{className:t?"dark":"light",children:[e.jsx(Z,{children:e.jsx(ee,{path:"/",element:e.jsx(wt,{})})}),e.jsx(He,{})]}):e.jsxs("div",{className:"min-h-screen "+(t?"dark":"light"),children:[e.jsxs("div",{className:"bg-pattern-wrapper",children:[e.jsx("div",{className:"bg-pattern"}),e.jsx("div",{className:"bg-pattern-overlay"})]}),e.jsx(mt,{}),j&&e.jsx("nav",{className:"fixed top-safe-top left-0 right-0 z-[1000] px-4 py-2 transition-all duration-300 "+(l&&!r?"-translate-y-full":"translate-y-0"),children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"glass-nav rounded-2xl backdrop-blur-lg border border-white/10 shadow-lg transition-all duration-300",children:e.jsxs("div",{className:"flex items-center justify-between h-16 px-4",children:[e.jsx("div",{className:"flex items-center",children:e.jsx(te,{to:"/home",className:"flex items-center transition-transform hover:scale-105",children:e.jsx("img",{src:"/android-icon-192-192.png",alt:"PIT-BOX.COM Logo",className:"h-10 w-auto drop-shadow-lg"})})}),e.jsxs("div",{className:"hidden md:flex md:items-center md:space-x-1",children:[e.jsx(te,{to:"/home",className:({isActive:e})=>`\n                      nav-link px-4 py-2 rounded-lg transition-all duration-200\n                      ${e?"bg-brand-gold/10 text-brand-gold":"hover:bg-gray-100/10"}\n                    `,onClick:N,children:"Home"}),e.jsx(te,{to:"/community",className:({isActive:e})=>`\n                      nav-link px-4 py-2 rounded-lg transition-all duration-200\n                      ${e?"bg-brand-gold/10 text-brand-gold":"hover:bg-gray-100/10"}\n                    `,onClick:N,children:"Pit Community"}),e.jsx(te,{to:"/swap-meet",className:({isActive:e})=>`\n                      nav-link px-4 py-2 rounded-lg transition-all duration-200\n                      ${e?"bg-brand-gold/10 text-brand-gold":"hover:bg-gray-100/10"}\n                    `,onClick:N,children:"Swap Meet"}),e.jsx(te,{to:"/tools",className:({isActive:e})=>`\n                      nav-link px-4 py-2 rounded-lg transition-all duration-200\n                      ${e?"bg-brand-gold/10 text-brand-gold":"hover:bg-gray-100/10"}\n                    `,onClick:N,children:"Racing Tools"}),e.jsx(te,{to:"/contact",className:({isActive:e})=>`\n                      nav-link px-4 py-2 rounded-lg transition-all duration-200\n                      ${e?"bg-brand-gold/10 text-brand-gold":"hover:bg-gray-100/10"}\n                    `,onClick:N,children:"Contact"}),e.jsx(te,{to:"/affiliates",className:({isActive:e})=>`\n                      nav-link px-4 py-2 rounded-lg transition-all duration-200\n                      ${e?"bg-brand-gold/10 text-brand-gold":"hover:bg-gray-100/10"}\n                    `,onClick:N,children:"Affiliates"}),e.jsx(te,{to:"/social",className:({isActive:e})=>`\n                      nav-link px-4 py-2 rounded-lg transition-all duration-200\n                      ${e?"bg-brand-gold/10 text-brand-gold":"hover:bg-gray-100/10"}\n                    `,onClick:N,children:"Follow Us"}),e.jsx("div",{className:"ml-2 pl-2 border-l border-gray-200/10",children:e.jsx(Le,{className:"nav-link"})}),e.jsx("button",{onClick:v,className:"p-2 rounded-lg hover:bg-gray-100/10 transition-colors ml-2","aria-label":t?"Switch to light mode":"Switch to dark mode",children:t?e.jsx(V,{className:"w-5 h-5"}):e.jsx($,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"md:hidden flex items-center gap-2",children:[e.jsx(Le,{className:"nav-link"}),e.jsx("button",{onClick:()=>n(!r),className:"p-2 rounded-lg hover:bg-gray-100/10 transition-colors","aria-label":r?"Close menu":"Open menu",children:r?e.jsx(a,{className:"w-6 h-6"}):e.jsx(F,{className:"w-6 h-6"})})]})]})}),e.jsx("div",{className:`\n                fixed inset-x-4 top-24 z-50 transform transition-all duration-300 origin-top\n                ${r?"scale-y-100 opacity-100":"scale-y-95 opacity-0 pointer-events-none"}\n              `,onTouchStart:e=>{h(null),m(e.targetTouches[0].clientY)},onTouchMove:e=>{h(e.targetTouches[0].clientY)},onTouchEnd:()=>{d&&u&&d-u>50&&N()},children:e.jsx("div",{className:"glass-nav rounded-2xl backdrop-blur-lg border border-white/10 shadow-lg overflow-hidden",children:e.jsxs("div",{className:"p-4 space-y-1",children:[e.jsx(te,{to:"/home",className:({isActive:e})=>`\n                      block px-4 py-3 rounded-lg transition-all duration-200\n                      ${e?"bg-brand-gold/10 text-brand-gold":"hover:bg-gray-100/10"}\n                    `,onClick:N,children:"Home"}),e.jsx(te,{to:"/community",className:({isActive:e})=>`\n                      block px-4 py-3 rounded-lg transition-all duration-200\n                      ${e?"bg-brand-gold/10 text-brand-gold":"hover:bg-gray-100/10"}\n                    `,onClick:N,children:"Pit Community"}),e.jsx(te,{to:"/swap-meet",className:({isActive:e})=>`\n                      block px-4 py-3 rounded-lg transition-all duration-200\n                      ${e?"bg-brand-gold/10 text-brand-gold":"hover:bg-gray-100/10"}\n                    `,onClick:N,children:"Swap Meet"}),e.jsx(te,{to:"/tools",className:({isActive:e})=>`\n                      block px-4 py-3 rounded-lg transition-all duration-200\n                      ${e?"bg-brand-gold/10 text-brand-gold":"hover:bg-gray-100/10"}\n                    `,onClick:N,children:"Racing Tools"}),e.jsx(te,{to:"/contact",className:({isActive:e})=>`\n                      block px-4 py-3 rounded-lg transition-all duration-200\n                      ${e?"bg-brand-gold/10 text-brand-gold":"hover:bg-gray-100/10"}\n                    `,onClick:N,children:"Contact"}),e.jsx(te,{to:"/affiliates",className:({isActive:e})=>`\n                      block px-4 py-3 rounded-lg transition-all duration-200\n                      ${e?"bg-brand-gold/10 text-brand-gold":"hover:bg-gray-100/10"}\n                    `,onClick:N,children:"Affiliates"}),e.jsx(te,{to:"/social",className:({isActive:e})=>`\n                      block px-4 py-3 rounded-lg transition-all duration-200\n                      ${e?"bg-brand-gold/10 text-brand-gold":"hover:bg-gray-100/10"}\n                    `,onClick:N,children:"Follow Us"}),e.jsx("div",{className:"h-px bg-gray-200/10 my-2"}),e.jsxs("button",{onClick:()=>{v(),N()},className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-100/10 transition-colors",children:[t?e.jsx(V,{className:"w-5 h-5"}):e.jsx($,{className:"w-5 h-5"}),t?"Light Mode":"Dark Mode"]})]})})})]})}),e.jsx("main",{className:"pt-24 pb-32 md:pb-8 px-4 max-w-7xl mx-auto",children:e.jsx(B.Suspense,{fallback:e.jsx(ka,{}),children:e.jsxs(Z,{children:[e.jsx(ee,{path:"/signin",element:e.jsx(St,{})}),e.jsx(ee,{path:"/home",element:e.jsx(Ct,{})}),e.jsx(ee,{path:"/contact",element:e.jsx(aa,{})}),e.jsx(ee,{path:"/affiliates",element:e.jsx(sa,{})}),e.jsx(ee,{path:"/partner-with-us",element:e.jsx(ra,{})}),e.jsx(ee,{path:"/swap-meet",element:e.jsx(na,{})}),e.jsx(ee,{path:"/community",element:e.jsx(la,{})}),e.jsx(ee,{path:"/community/post/:postId",element:e.jsx(ca,{})}),e.jsx(ee,{path:"/profile",element:e.jsx(ia,{})}),e.jsx(ee,{path:"/user/:userId",element:e.jsx(oa,{})}),e.jsx(ee,{path:"/friends",element:e.jsx(ma,{})}),e.jsx(ee,{path:"/terms",element:e.jsx(ga,{})}),e.jsx(ee,{path:"/privacy",element:e.jsx(fa,{})}),e.jsx(ee,{path:"/advertiser-terms",element:e.jsx(ba,{})}),e.jsx(ee,{path:"/motor-wear",element:e.jsx(ya,{})}),e.jsx(ee,{path:"/tools",element:e.jsx(wa,{})}),e.jsx(ee,{path:"/social",element:e.jsx(va,{})}),e.jsx(ee,{path:"/qr-download",element:e.jsx(Na,{})}),e.jsx(ee,{path:"/wingless",element:e.jsx(Et,{})}),e.jsx(ee,{path:"/crate",element:e.jsx(Pt,{})}),e.jsx(ee,{path:"/360",element:e.jsx(It,{})}),e.jsx(ee,{path:"/410",element:e.jsx(At,{})}),e.jsx(ee,{path:"/nonwinged410",element:e.jsx(Lt,{})}),e.jsx(ee,{path:"/600",element:e.jsx(zt,{})}),e.jsx(ee,{path:"/mini",element:e.jsx(Ut,{})}),e.jsx(ee,{path:"/jr",element:e.jsx(Vt,{})}),e.jsx(ee,{path:"/quarter",element:e.jsx($t,{})}),e.jsx(ee,{path:"/focus",element:e.jsx(Ft,{})}),e.jsx(ee,{path:"/outlaw",element:e.jsx(qt,{})}),e.jsx(ee,{path:"/lo206-kart",element:e.jsx(Bt,{})}),e.jsx(ee,{path:"/modified2",element:e.jsx(Ot,{})}),e.jsx(ee,{path:"/ump-modified",element:e.jsx(Tt,{})}),e.jsx(ee,{path:"/imca-modified",element:e.jsx(Rt,{})}),e.jsx(ee,{path:"/imca-sportmod",element:e.jsx(Dt,{})}),e.jsx(ee,{path:"/b-modified",element:e.jsx(Mt,{})}),e.jsx(ee,{path:"/latemodel",element:e.jsx(Wt,{})}),e.jsx(ee,{path:"/crate-latemodel",element:e.jsx(Ht,{})}),e.jsx(ee,{path:"/super-latemodel",element:e.jsx(Xt,{})}),e.jsx(ee,{path:"/street-stock",element:e.jsx(Gt,{})}),e.jsx(ee,{path:"/restricted-boxstock",element:e.jsx(Yt,{})}),e.jsx(ee,{path:"/boxstock",element:e.jsx(Jt,{})}),e.jsx(ee,{path:"/intermediate250",element:e.jsx(Kt,{})}),e.jsx(ee,{path:"/open-intermediate",element:e.jsx(Qt,{})}),e.jsx(ee,{path:"/open-class",element:e.jsx(Zt,{})}),e.jsx(ee,{path:"/sportsman",element:e.jsx(ea,{})}),e.jsx(ee,{path:"/caged-clone",element:e.jsx(ta,{})}),e.jsx(ee,{path:"/tire-tool",element:e.jsx(da,{})}),e.jsx(ee,{path:"/setups/:carType",element:e.jsx(ua,{})}),e.jsx(ee,{path:"/subscription",element:e.jsx(ha,{})}),e.jsx(ee,{path:"/subscription/success",element:e.jsx(xa,{})}),e.jsx(ee,{path:"/subscription/cancel",element:e.jsx(pa,{})}),e.jsx(ee,{path:"/maintenance",element:e.jsx(ja,{})}),e.jsx(ee,{path:"/",element:e.jsx(Q,{to:"/home",replace:!0})})]})})}),e.jsx(He,{})]})}function Ea(){return e.jsx(K,{children:e.jsx(me,{children:e.jsx(pe,{children:e.jsx(Ee,{children:e.jsxs(Ae,{children:[e.jsx(_a,{}),e.jsx(Sa,{})]})})})})})}class Pa extends W.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){}render(){var t;return this.state.hasError?this.props.fallback||e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:e.jsxs("div",{className:"glass-panel p-8 max-w-lg text-center",children:[e.jsx(o,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Something went wrong"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:(null==(t=this.state.error)?void 0:t.message)||"An unexpected error occurred"}),e.jsx("button",{onClick:()=>window.location.reload(),className:"btn-primary",children:"Reload Page"})]})}):this.props.children}}const Ia={setups:{maxAge:6048e5,priority:"high"},tracks:{maxAge:2592e6,priority:"high"},profile:{maxAge:864e5,priority:"medium"},friends:{maxAge:864e5,priority:"medium"},checklists:{maxAge:2592e6,priority:"high"},lapTimes:{maxAge:6048e5,priority:"medium"},trackConditions:{maxAge:216e5,priority:"low"}},Aa=new class{constructor(){this.dbName="pitbox_offline_cache",this.version=1,this.db=null}async init(){return new Promise(((e,t)=>{const a=indexedDB.open(this.dbName,this.version);a.onerror=()=>t(a.error),a.onsuccess=()=>{this.db=a.result,e()},a.onupgradeneeded=e=>{const t=e.target.result;if(!t.objectStoreNames.contains("cache")){const e=t.createObjectStore("cache",{keyPath:"key"});e.createIndex("timestamp","timestamp"),e.createIndex("priority","priority")}t.objectStoreNames.contains("pending_operations")||t.createObjectStore("pending_operations",{keyPath:"id",autoIncrement:!0})}}))}async set(e,t,a){this.db||await this.init();const s={...Ia[e.split(":")[0]],...a},r=this.db.transaction(["cache"],"readwrite").objectStore("cache"),n={key:e,data:t,timestamp:Date.now(),maxAge:s.maxAge,priority:s.priority};return new Promise(((e,t)=>{const a=r.put(n);a.onsuccess=()=>e(),a.onerror=()=>t(a.error)}))}async get(e){this.db||await this.init();const t=this.db.transaction(["cache"],"readonly").objectStore("cache");return new Promise(((a,s)=>{const r=t.get(e);r.onsuccess=()=>{const t=r.result;if(t)return Date.now()-t.timestamp>t.maxAge?(this.delete(e),void a(null)):void a(t.data);a(null)},r.onerror=()=>s(r.error)}))}async delete(e){this.db||await this.init();const t=this.db.transaction(["cache"],"readwrite").objectStore("cache");return new Promise(((a,s)=>{const r=t.delete(e);r.onsuccess=()=>a(),r.onerror=()=>s(r.error)}))}async clear(){this.db||await this.init();const e=this.db.transaction(["cache"],"readwrite").objectStore("cache");return new Promise(((t,a)=>{const s=e.clear();s.onsuccess=()=>t(),s.onerror=()=>a(s.error)}))}async addPendingOperation(e){this.db||await this.init();const t=this.db.transaction(["pending_operations"],"readwrite").objectStore("pending_operations");return new Promise(((a,s)=>{const r=t.add({...e,timestamp:Date.now()});r.onsuccess=()=>a(r.result),r.onerror=()=>s(r.error)}))}async getPendingOperations(){this.db||await this.init();const e=this.db.transaction(["pending_operations"],"readonly").objectStore("pending_operations");return new Promise(((t,a)=>{const s=e.getAll();s.onsuccess=()=>t(s.result),s.onerror=()=>a(s.error)}))}async removePendingOperation(e){this.db||await this.init();const t=this.db.transaction(["pending_operations"],"readwrite").objectStore("pending_operations");return new Promise(((a,s)=>{const r=t.delete(e);r.onsuccess=()=>a(),r.onerror=()=>s(r.error)}))}async syncPendingOperations(){const e=await this.getPendingOperations();for(const t of e)try{"insert"===t.type?await ie.from(t.table).insert(t.data):"update"===t.type?await ie.from(t.table).update(t.data).eq("id",t.id):"delete"===t.type&&await ie.from(t.table).delete().eq("id",t.id),await this.removePendingOperation(t.id)}catch(La){}}async cacheUserSetups(e){try{const{data:t,error:a}=await ie.from("setups").select("*").eq("user_id",e).order("created_at",{ascending:!1}).limit(100);if(a)throw a;return await this.set(`setups:${e}`,t),t}catch(La){return await this.get(`setups:${e}`)}}async cacheTrackLocations(){try{const{data:e,error:t}=await ie.from("track_locations").select("*");if(t)throw t;return await this.set("tracks:all",e),e}catch(La){return await this.get("tracks:all")}}async cacheMaintenanceChecklists(e){try{const{data:t,error:a}=await ie.from("maintenance_checklists").select("*").eq("car_class",e);if(a)throw a;return await this.set(`checklists:${e}`,t),t}catch(La){return await this.get(`checklists:${e}`)}}async prefetchForTrack(e,t){try{const[a,s,r]=await Promise.all([ie.from("setups").select("*").eq("user_id",t).order("created_at",{ascending:!1}),ie.from("track_conditions").select("*").eq("track_id",e).gte("reported_at",new Date(Date.now()-864e5).toISOString()),ie.from("lap_times").select("*").eq("user_id",t).eq("track_id",e)]);await Promise.all([this.set(`setups:${t}:${e}`,a.data),this.set(`conditions:${e}`,s.data),this.set(`laptimes:${t}:${e}`,r.data)])}catch(La){}}};(async()=>{if(Me.isNativePlatform())try{await yt.setStyle({style:pt.Dark}),await yt.setBackgroundColor({color:"#1A1A1A"}),await jt.hide({fadeOutDuration:500})}catch(La){}})(),(async()=>{try{await Aa.init(),window.addEventListener("online",(()=>{Aa.syncPendingOperations()}));const{data:{user:e}}=await ie.auth.getUser();e&&await Promise.all([Aa.cacheUserSetups(e.id),Aa.cacheTrackLocations()])}catch(La){}})(),ae(document.getElementById("root")).render(e.jsx(B.StrictMode,{children:e.jsx(Pa,{children:e.jsx(Ea,{})})}));export{Me as C,Xe as G,Nt as L,vt as S,Ue as W,ce as a,ot as b,ge as c,dt as d,ct as e,Pe as f,lt as g,et as h,at as i,Qe as j,Ge as k,kt as l,st as m,rt as n,nt as o,Ce as p,Je as q,ze as r,ie as s,it as t,ue as u,Ca as v,De as w,qe as x};
